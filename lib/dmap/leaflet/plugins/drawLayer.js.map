{"version":3,"sources":["webpack:///plugins/drawLayer.js","webpack:///webpack/bootstrap 3be2d1c8824e8c545cfd","webpack:///./src/polyfill/Popup.js","webpack:///./src/utils/Loader.js","webpack:///./src/plugins/DrawLayer.js","webpack:///./src/plugins/tools/DistanceTool.js","webpack:///./src/plugins/tools/PenTool.js","webpack:///./src/plugins/tools/PenFillTool.js","webpack:///./src/plugins/tools/RectTool.js","webpack:///./src/feature/Circle.js","webpack:///./src/plugins/tools/EllipseTool.js","webpack:///./src/plugins/tools/MilitaryArrowTool.js","webpack:///./src/plugins/tools/TextTool.js","webpack:///./src/utils/geoUtils.js","webpack:///./src/plugins/meature/leaflet-measure-path.js","webpack:///./src/plugins/meature/leaflet-measure-path.css?1037","webpack:///./src/plugins/meature/leaflet-measure-path.css","webpack:///./src/feature/VectorMarker.js","webpack:///./src/feature/Ellipse.js","webpack:///./src/feature/MilitaryArrow.js","webpack:///./node_modules/vue-style-loader/lib/listToStyles.js","webpack:///./src/layer/FeatureLayer.js","webpack:///./src/plugins/tools/Tool.js","webpack:///./src/feature/Typhoon.js","webpack:///./src/feature/Quadrant.js","webpack:///./src/feature/Text.js","webpack:///./src/feature/Heat.js","webpack:///./src/feature/River.js","webpack:///./src/utils/Bezier.js","webpack:///./node_modules/overlapping-marker-spiderfier-leaflet/build/oms.js","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./src/plugins/tools/PointTool.js","webpack:///./node_modules/vue-style-loader/lib/addStylesClient.js","webpack:///./src/plugins/tools/PolylineTool.js","webpack:///./src/plugins/tools/PolygonTool.js","webpack:///./src/plugins/tools/CircleTool.js","webpack:///./src/utils/LonLats.js"],"names":["define","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","11","__webpack_exports__","_L","L","Layer","Popup","DomEvent","_T","T","$div","div","Popup2","extend","options","maxWidth","minWidth","autoPan","autoPosition","closeButton","autoClose","_initLayout","_this","this","that","branch","leaf","className","container","_container","prefix","_contentNode","disableScrollPropagation","disableClickPropagation","el","props","assign","owner","marker","_source","data","__data","render","then","vm","$el","style","width","clientWidth","height","clientHeight","setContent","_getAnchor","point","map","_map","firstChild","_latlng","left","top","contentHeight","_map$latLngToContaine","latLngToContainerPoint","x","y","size","getSize","dx","dy","_point","include","bindPopup","content","setOptions","_popup","_popupHandlersAdded","events","click","_openPopup","keypress","_onKeyPress","remove","closePopup","move","_movePopup","hover","mouseover","on","unbindPopup","off","12","imgs","url","funcs","img","Image","complete","loader","func","push","src","onload","length","shift","164","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","writable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__tools_PointTool__","__WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__","__WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__","__WEBPACK_IMPORTED_MODULE_3__tools_PenTool__","__WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__","__WEBPACK_IMPORTED_MODULE_5__tools_RectTool__","__WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__","__WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__","__WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__","__WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__","__WEBPACK_IMPORTED_MODULE_10__tools_TextTool__","__WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__","__WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__","__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__","__WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__","__WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__","isArray","Marker","Polyline","Polygon","Circle","CircleMarker","DrawLayer","_FeatureLayer","_temp","_ret","_len","arguments","args","Array","_key","apply","concat","history","next","addTo","dmap","onDrawEnd","bind","add","tooltip","draggable","_check","editEnable","makeDraggable","dragging","enable","change","pan","tool","reset","cursor","clear","todo","restore","pop","includes","done","reback","start","do","target","type","cancel","disable","Tool","feature","interactive","e","_this2","_tool","reable","setTimeout","setStyle","Text","_bindText","searchable","event","search","multi","clone","result","_radius","center","getLatLng","eachLayer","layer","latLngToLayerPoint","distanceTo","latlngs","getLatLngs","len","_rings","165","DistancePolylineTool","DistancePolygonTool","__WEBPACK_IMPORTED_MODULE_0__PolylineTool__","__WEBPACK_IMPORTED_MODULE_1__PolygonTool__","_PolylineTool","color","weight","showMeasurements","onMouseMove","updateMeasurements","_PolygonTool","_temp2","_ret2","_len2","_key2","fillOpacity","166","__WEBPACK_IMPORTED_MODULE_0__Tool__","PenTool","_Tool","once","onMouseDown","restart","latlng","onEnd","addLatLng","167","PenFillTool","initMouseDownHandler","_onMouseDown","rectangle","latLngBounds","168","Rectangle","RectTool","sp","setBounds","redraw","169","toGeoJSON","_getLatLng","lat","lng","radius","_mRadius","properties","geometry","coordinates","_updateBounds","_radiusY","170","__WEBPACK_IMPORTED_MODULE_0__CircleTool__","__WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__","EllipseTool","_CircleTool","latlng1","latlng2","r","ry","setRadius","setRadiusY","171","__WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__","MilitaryArrowTool","LatLng","fillColor","mp","lp","layerPoint","172","__WEBPACK_IMPORTED_MODULE_0__PointTool__","TextTool","_PointTool","text","173","pointInPolygon","arr","nCross","p0","p1","p2","174","Measurement","pane","initialize","measurement","title","rotation","_measurement","_title","_rotation","addLayer","onAdd","getPane","getPanes","markerPane","_element","DomUtil","inner","innerHTML","_animateZoom","_setPosition","onRemove","removeChild","setPosition","transform","opt","pos","_latLngToNewLayerPoint","zoom","round","latLng","formatDistance","unit","feet","_measurementOptions","imperial","toFixed","Math","formatArea","a","ringArea","coords","p3","lowerIndex","middleIndex","upperIndex","rad","_","PI","area","coordsLength","sin","abs","circleArea","rho","cos","override","method","fn","hookAfter","_measurementLayer","showOnHover","minPixelDistance","showDistances","showArea","lang","totalLength","totalArea","segmentLength","layerGroup","hideMeasurements","removeLayer","measurementOptions","setLatLngs","spliceLatLngs","formatter","ll1","ll2","dist","latLngs","isPolygon","totalDist","Util","clearLayers","layerPointToLatLng","_getRotation","getBounds","getCenter","project","atan","addInitHook","setLatLng","getRadius","175","locals","default","176","2","__WEBPACK_IMPORTED_MODULE_0__utils_Loader__","VectorMarker","stroke","fill","angle","riseOnHover","radiusY","_clickTolerance","_project","offset","icon","iconAnchor","subtract","beforeAdd","preferCanvas","renderer","__canvas","canvas","_updatePath","_renderer","_updateTriangle","_updateRect","_updateCircle","_updateLine","_loader","_updateIcon","indexOf","20","legacyOptions","_mRadiusY","crs","CRS","EPSG3857","unproject","latlng3","getRadiusY","21","__WEBPACK_IMPORTED_MODULE_0__utils_Bezier__","toPoint","_Polyline$prototype","_projectLatlngs","noClip","projectedBounds","temp","_containsPoint","json","22","listToStyles","parentId","list","styles","newStyles","item","id","css","media","sourceMap","part","parts","29","__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__","__WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__","__WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__","__WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__","__WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__","__WEBPACK_IMPORTED_MODULE_5__feature_Text__","__WEBPACK_IMPORTED_MODULE_6__feature_Heat__","__WEBPACK_IMPORTED_MODULE_7__feature_River__","__WEBPACK_IMPORTED_MODULE_8__feature_MilitaryArrow__","__WEBPACK_IMPORTED_MODULE_9_overlapping_marker_spiderfier_leaflet_build_oms__","isFunction","fmt","$assign","toGroup","featureGroup","toMarker","toPolyline","polyline","toPolygon","polygon","toCircle","circle","toIcon","toDivIcon","divIcon","toImageOverlay","imageOverlay","toArray","toOptions","FeatureLayer","_T$Class","initHook","config","forEach","addFnHook","precall","_this3","defer","connect","has","hasLayer","getMarkers","getLayers","_add","_bindToolTip","_bindPopup","addPoints","_this4","featureOptions","createPoint","addClusterPoints","_this5","group","markerClusterGroup","addClusterPoints2","oms","OverlappingMarkerSpiderfier","addMarker","addPolylines","_this6","createPolyLine","bringToBack","addPolygons","_this7","createPolygon","addCircles","_this8","createCircle","addEllipses","_this9","createEllipse","addTexts","_this10","addRivers","_this11","deep","addImage","addMilitaryArrows","_this12","addTyphoon","typhoons","tfbh","update","createTyphoon","addAlarmLines","createPolyline","coor","m48","g48","s48","m24","g24","s24","addHeat","heat","addVelocity","_this13","Promise","resolve","require","_ref","createLayer","addWindy","_this14","_ref2","createWindyLayer","tempOverlay","windfarm","loadWindy","removeFrom","addShp","shapefile","addWFS","_this15","_ref3","wfst","WFST","Format","GeoJSON","EPSG4326","fitBounds","addGeoJSON","geojson","_this16","geometries","removeTyphoons","ids","keys","each","typhoon","getTyphoon","_ref4","tag","anchor","iconUrl","_options","bindTooltip","popup","bindText","updateTooltips","getTooltip","isOpen","hideTooltip","hide","suspend","suspended","resume","types","ctx","fire","precision","jsons","getText","Class","3","originalEvent","button","_defaultShape","30","__WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__","__WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__","__WEBPACK_IMPORTED_MODULE_3__VectorMarker__","toCanvas","circleMarker","toTooltip","toFeatureGroup","toLatLng","Typhoon","autoPlay","hasLsljLater","inView","keepZoom","click2drawOnTime","hitForPoint","ls","opacity","lsyb","org","dashArray","orgs","label","th","grade","grades","F1","F2","GRADENAME","c7","c10","c12","land","action","val","_points","ci","points","draw","createLand","createCicle","createQuadrant","ne","nw","sw","se","zIndex","createHurricane","colorIndex","parseInt","rotate","time","lsp","hurricane","handleEvent","getTimeIndex","index","array","getDistance","sqrt","tempLayer","addTempLayer","drawing","prev","lslj","lslj_yb","yblj","tffq","landPoints","lslj_prev","slice","lslj_after","point_prev","power","merge","direction","tm","clock","land_time","ctm","date","radius7_quad","radius10_quad","radius12_quad","forecast","h","r7","radius7","r10","radius10","r12","radius12","sets","find","_item","j","playing","init","tf","attr","setView","setTimeIndex","_overTarget","dataProvider","selItem","openPopup","31","Earth","distance","getR","latR","R","bottom","divideBy","getPixelOrigin","xy","_updateCircular","w","maxR","max","_pxBounds","Bounds","32","_text","_initTextInteractions","openText","_closeText","_moveText","unbindText","Canvas","_getTextWidth","_ctx","font","measureText","_updateText","_drawing","_empty","_drawnLayers","_leaflet_id","translate","fillStyle","textAlign","fillText","Path","String","_update","bounds","_bounds","intersects","33","simpleheat","_canvas","document","getElementById","getContext","_width","_height","_max","_data","Heat","_latlngs","_heat","_updateOptions","_frame","_animating","requestAnimFrame","_redraw","_initCanvas","appendChild","_panes","overlayPane","_reset","zoomAnimation","Browser","any3d","originProp","testProp","animated","addClass","defaultRadius","blur","gradient","topLeft","containerPointToLayerPoint","cell","len2","k","_r","undefined","maxZoom","getMaxZoom","v","pow","min","getZoom","cellSize","grid","panePos","_getMapPanePos","offsetX","offsetY","contains","floor","alt","minOpacity","scale","getZoomScale","_getCenterOffset","_multiplyBy","setTransform","TRANSFORM","getTranslateString","defaultGradient","0.4","0.6","0.7","0.8","1","_circle","_createCanvas","r2","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","closePath","resize","grad","createLinearGradient","addColorStop","fillRect","_grad","getImageData","clearRect","globalAlpha","drawImage","colored","_colorize","putImageData","pixels","createElement","34","FeatureGroup","FeatureGroupPrototype","ratio","_latLngs","_buildLines","_getLength","line","_length","layers","_layers","key","setMinWidth","setMaxWidth","getMinWidth","getMaxWidth","useLength","convertToPolyline","35","coattail","step","_T$assign","ra","ma","num","ceil","PBezier","radians","atan2","t","b","px","py","BEZ","C","Factorial","36","hasProp","_Class","opts","ref","initMarkerArrays","listeners","addEventListener","twoPi","usual","highlighted","markers","markerListeners","markerListener","spiderListener","arrIndexOf","splice","removeEventListener","base","trigger","ref1","results","generatePtsCircle","count","centerPt","angleStep","circumference","legLength","Point","generatePtsSpiral","pt","mPt","markerPt","markerSpiderfied","nearbyMarkerData","nonNearbyMarkers","pxSq","ptDistanceSq","spiderfy","makeHighlightListeners","highlight","leg","unhighlight","markerData","bodyPt","footLl","footPt","footPts","md","mhl","nearestMarkerDatum","numFeet","spiderfiedMarkers","spiderfying","ptAverage","reverse","minExtract","clickable","usualPosition","highlightListeners","setZIndexOffset","spiderfied","markerNotToMove","unspiderfiedMarkers","unspiderfying","pt1","pt2","pts","numPts","sumX","sumY","set","bestIndex","bestVal","obj","window","4","cssWithMappingToString","useSourceMap","cssMapping","btoa","sourceMapping","toComment","sources","source","sourceRoot","join","unescape","encodeURIComponent","JSON","stringify","toString","mediaQuery","alreadyImportedModules","49","__WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__","PointTool","5","addStylesClient","_isProduction","isProduction","__WEBPACK_IMPORTED_MODULE_0__listToStyles__","addStylesToDom","newList","mayRemove","domStyle","stylesInDom","refs","addStyle","createStyleElement","styleElement","head","querySelector","ssrIdKey","noop","parentNode","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","applyToTag","newObj","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","hasDocument","DEBUG","Error","getElementsByTagName","navigator","test","userAgent","toLowerCase","textStore","replacement","filter","Boolean","50","PolylineTool","51","PolygonTool","52","__WEBPACK_IMPORTED_MODULE_1__feature_Circle__","CircleTool","8","lonlats"],"mappings":"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","file":"plugins/drawLayer.js","sourcesContent":["/*! version:1.4.3 */\ndefine(function() { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 164);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 11:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.5.26\r\n */\nvar _L = L,\n    Layer = _L.Layer,\n    Popup = _L.Popup,\n    DomEvent = _L.DomEvent;\nvar _T = T,\n    $div = _T.div;\n//\n/**\r\n * 弹出层\r\n * @param {props,el}\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.Popup2 = Popup.extend({\n\toptions: {\n\t\t// 最大宽度,设置为 Infinity 居中\n\t\tmaxWidth: 0,\n\t\t// // 最小宽度\n\t\tminWidth: 0,\n\t\t// 自动平移，拖动地图以便于popup的最佳显示\n\t\tautoPan: false,\n\t\t//\n\t\tautoPosition: true,\n\t\t//\n\t\t// keepInView: false,\n\t\t// 点击不关闭\n\t\tcloseButton: false,\n\t\t//\n\t\t// closeOnClick: false,\n\t\t//\n\t\tautoClose: false\n\t\t//\n\t\t// autoPanPaddingTopLeft: L.point(0, 50)\n\t},\n\t// update() {\n\t// \tPopup.prototype.update.call(this)\n\t// },\n\t_initLayout: function _initLayout() {\n\t\tvar _this = this;\n\n\t\tvar that = this;\n\t\tvar options = that.options,\n\t\t    branch = that.branch;\n\t\tvar leaf = options.leaf;\n\n\t\tif (leaf && !branch) {\n\t\t\t// L.setOptions(that, { maxWidth: Infinity || 0, minWidth: leaf.minWidth || 0 });\n\t\t\t//\n\t\t\tvar className = options.className;\n\n\t\t\tvar prefix = 'leaflet-popup';\n\t\t\tvar container = that._container = $div(prefix + ' ' + (className || '') + ' leaflet-zoom-animated');\n\t\t\tvar contentNode = that._contentNode = $div('', container); //挂载的对象\n\t\t\t// 禁止滚轮和点击事件，用于拦截地图事件\n\t\t\tDomEvent.disableScrollPropagation(container);\n\t\t\tDomEvent.disableClickPropagation(container);\n\t\t\t// \n\t\t\tleaf.el = $div();\n\t\t\tleaf.props = T.assign({}, leaf.props, {\n\t\t\t\towner: that, // 弹出层对象\n\t\t\t\tmarker: that._source, // 图元对象\n\t\t\t\tdata: that._source && that._source.__data // 图元数据\n\t\t\t});\n\t\t\t// __vue__\n\t\t\tthis.branch = T.render(leaf).then(function (vm) {\n\t\t\t\tvar el = vm.$el;\n\t\t\t\tif (options.maxWidth) {\n\t\t\t\t\tvar style = container.style;\n\t\t\t\t\tstyle.width = el.clientWidth + 'px';\n\t\t\t\t\tstyle.height = el.clientHeight + 'px';\n\t\t\t\t}\n\t\t\t\t_this.setContent(el);\n\t\t\t\treturn vm;\n\t\t\t});\n\t\t} else {\n\t\t\tPopup.prototype._initLayout.call(that);\n\t\t}\n\t},\n\n\t/**\r\n  * 向下翻转\r\n  */\n\t_getAnchor: function _getAnchor() {\n\t\tvar point = Popup.prototype._getAnchor.call(this);\n\t\tvar map = this._map,\n\t\t    container = this._contentNode,\n\t\t    marker = this._source,\n\t\t    options = this.options;\n\n\t\tvar leaf = container.firstChild;\n\t\t// 点\n\t\t// todo 面的弹出\n\t\tif (options.autoPosition && options.leaf && leaf && marker && marker._latlng) {\n\t\t\tvar style = leaf.style;\n\n\t\t\tstyle.left = style.top = '0px'; //todo，拖动位置还原\n\t\t\tvar contentHeight = leaf.clientHeight + 20; //20 marginBottom\n\n\t\t\tvar _map$latLngToContaine = map.latLngToContainerPoint(marker._latlng),\n\t\t\t    x = _map$latLngToContaine.x,\n\t\t\t    y = _map$latLngToContaine.y;\n\n\t\t\tvar size = map.getSize();\n\t\t\tvar dx = 16,\n\t\t\t    dy = 0;\n\t\t\t//\n\t\t\tif (container.clientHeight) {\n\t\t\t\t// 上下边界\n\t\t\t\tif (y - contentHeight < 0) {\n\t\t\t\t\tdy = contentHeight;\n\t\t\t\t\tif (y + dy > size.y) {\n\t\t\t\t\t\tdy -= y + dy - size.y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 上下边界\n\t\t\t\tif (y + contentHeight > size.y) {\n\t\t\t\t\tdy = -contentHeight;\n\t\t\t\t\tif (y + dy < 0) {\n\t\t\t\t\t\tdy -= y + dy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 右边界\n\t\t\tif (x + leaf.clientWidth > size.x) {\n\t\t\t\tdx = -leaf.clientWidth - dx;\n\t\t\t}\n\t\t\t// \n\t\t\tif (dx || dy) {\n\t\t\t\tvar _point = point,\n\t\t\t\t    _x = _point.x,\n\t\t\t\t    _y = _point.y;\n\n\t\t\t\tpoint = [dx + _x, dy + _y];\n\t\t\t}\n\t\t}\n\t\treturn point;\n\t}\n}));\n\n/**\r\n * 默认初始化为Popup\r\n */\nLayer.include({\n\tbindPopup: function bindPopup(content, options) {\n\t\tif (content instanceof Popup) {\n\t\t\tL.setOptions(content, options);\n\t\t\tthis._popup = content;\n\t\t\tcontent._source = this;\n\t\t} else {\n\t\t\tif (!this._popup || options) {\n\t\t\t\tthis._popup = new Popup(options, this);\n\t\t\t}\n\t\t\tthis._popup.setContent(content);\n\t\t}\n\n\t\tif (!this._popupHandlersAdded) {\n\t\t\tvar events = {\n\t\t\t\tclick: this._openPopup,\n\t\t\t\tkeypress: this._onKeyPress,\n\t\t\t\tremove: this.closePopup,\n\t\t\t\tmove: this._movePopup\n\t\t\t};\n\t\t\tif (options && options.hover) events.mouseover = this._openPopup;\n\t\t\tthis.on(events);\n\t\t\tthis._popupHandlersAdded = true;\n\t\t}\n\t\treturn this;\n\t},\n\tunbindPopup: function unbindPopup() {\n\t\tif (this._popup) {\n\t\t\tthis.off({\n\t\t\t\tclick: this._openPopup,\n\t\t\t\tkeypress: this._onKeyPress,\n\t\t\t\tremove: this.closePopup,\n\t\t\t\tmove: this._movePopup\n\t\t\t});\n\t\t\tthis._popupHandlersAdded = false;\n\t\t\tthis._popup = null;\n\t\t}\n\t\treturn this;\n\t}\n});\n\n/***/ }),\n\n/***/ 12:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @since 2018-8-3\r\n */\nvar imgs = {};\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (url) {\n  return imgs[url] = imgs[url] || function () {\n    var funcs = [];\n    var img = new Image();\n    var complete = false;\n    var loader = imgs[url] = {\n      then: function then(func) {\n        complete ? func(img) : funcs.push(func);\n      }\n    };\n    img.src = url;\n    img.onload = function () {\n      complete = true;\n      while (funcs.length > 0) {\n        funcs.shift()(img);\n      }\n    };\n    return loader;\n  }();\n});\n\n/**\r\n * 弃用\r\n * ie下，基于 polyfill 的 promise 太影响性能。\r\n */\n// export default url => imgs[url] = imgs[url] || new Promise(reject => {\n//   let img = new Image();\n//   img.src = url;\n//   // 加载src资源时 complete 为true,即使图片尚未加载\n//   // img.addEventListener('load', e => {\n//   //   reject(img);\n//   // })\n//   img.onload = e => { reject(img) }\n// })\n\n/***/ }),\n\n/***/ 164:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tools_PointTool__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__ = __webpack_require__(165);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tools_PenTool__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tools_RectTool__ = __webpack_require__(168);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__ = __webpack_require__(170);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__tools_TextTool__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__ = __webpack_require__(174);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__plugins_meature_leaflet_measure_path__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__ = __webpack_require__(175);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15__plugins_meature_leaflet_measure_path_css__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//\n// 涉及重写Polyline 的 onAdd 和 flow 有顺序执行的冲突\n\n\n//\nvar _T = T,\n    isArray = _T.isArray;\nvar _L = L,\n    Marker = _L.Marker,\n    Polyline = _L.Polyline,\n    Polygon = _L.Polygon,\n    Circle = _L.Circle,\n    CircleMarker = _L.CircleMarker;\n/**\r\n * 标绘工具-管理器\r\n */\n\nvar DrawLayer = function (_FeatureLayer) {\n  _inherits(DrawLayer, _FeatureLayer);\n\n  function DrawLayer() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DrawLayer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _FeatureLayer.call.apply(_FeatureLayer, [this].concat(args))), _this), _this.history = [], _this.next = [], _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\r\n   * 用于回滚\r\n   */\n\n  /**\r\n   * 用于前进\r\n   */\n\n  /**\r\n   * 当前的绘制编辑对象\r\n   */\n\n  /**\r\n   * 当前的绘制工具对象\r\n   */\n\n  /**\r\n   * 当前的绘制工具类\r\n   */\n\n\n  /**\r\n   * \r\n   */\n  // options = { reable: false, editable: true, draggable: true }\n  /**\r\n   * \r\n   * @param dmap \r\n   */\n  DrawLayer.prototype.addTo = function addTo(dmap) {\n    dmap.on('draw-end', this.onDrawEnd.bind(this));\n    return _FeatureLayer.prototype.addTo.call(this, dmap);\n  };\n  /**\r\n   * \r\n   * @param {*} marker \r\n   * @param {*} options \r\n   * @param {*} data \r\n   */\n\n\n  DrawLayer.prototype.add = function add(marker, options, data) {\n    //\n    if (options.tooltip) {\n      options.tooltip.draggable = true;\n    }\n\n    _FeatureLayer.prototype.add.call(this, marker, options, data);\n    this._check(marker);\n    //\n  };\n  /**\r\n   * 确保 marker 可编辑拖拽\r\n   */\n\n\n  DrawLayer.prototype._check = function _check(marker) {\n    if (marker) {\n      // 设置为可编辑\n      marker.editEnable();\n      // 设置为可拖拽\n      marker.makeDraggable();\n      marker.dragging.enable();\n    }\n  };\n  /**\r\n   * 改变地图工具\r\n   * @param options {tool,feature,tooltip,popup,onDrawEnd}\r\n   */\n\n\n  DrawLayer.prototype.change = function change(options) {\n    var that = this;\n    if (options) {\n      T.data.pan = false;\n      var dmap = that.dmap,\n          history = that.history,\n          next = that.next;\n\n      switch (options.tool) {\n        case 'pan':\n          that.reset();\n          dmap.el.style.cursor = \"-webkit-grab\"; //grab\n          T.data.pan = true;\n          break;\n        case 'clear':\n          //不要break;\n          that.clear();\n        case 'pointer':\n          that.reset();\n          dmap.el.style.cursor = 'default';\n          break;\n        case 'go':\n          // 前进\n          var todo = next[next.length - 1];\n          if (todo && todo.restore()) {\n            next.pop();\n          }\n          !history.includes(todo) && history.push(todo);\n          that.reset();\n          break;\n        case 'back':\n          // 回滚\n          var done = history[history.length - 1];\n          if (done && done.reback()) {\n            history.pop();\n          }\n          !next.includes(done) && next.push(done);\n          that.reset();\n          break;\n        default:\n          that.start(options);\n          break;\n      }\n      dmap.do('tool-change', { target: that, options: options });\n    }\n    return that;\n  };\n  /**\r\n   * 启动绘制\r\n   * @param options {tool:'',feature,tooltip,popup}\r\n   */\n\n\n  DrawLayer.prototype.start = function start(options) {\n    var that = this;\n    var map = that.map;\n\n    var type = options.tool;\n    that.cancel();\n    map.dragging.disable();\n    var Tool = that.get(type);\n    var tool = Tool.create(that, options);\n    // if (tool) {\n    //   let mergeOptions = T.assign({}, that.options, options);\n    //   let toolOptions = tool.options;\n    //   toolOptions.feature.draggable = mergeOptions.draggable;\n    //   toolOptions.feature.interactive = false;\n    //   toolOptions.editable = mergeOptions.editable;\n    //   toolOptions.reable = mergeOptions.reable;\n    //   tool.start();\n    // }\n    if (tool) {\n      var toolOptions = tool.options;\n      toolOptions.feature.interactive = false;\n      tool.start();\n    }\n\n    that.tool = tool;\n  };\n\n  /**\r\n   * 获取绘制工具\r\n   * @param tool \r\n   */\n\n\n  DrawLayer.prototype.get = function get(tool) {\n    switch (tool) {\n      case 'point':\n        return __WEBPACK_IMPORTED_MODULE_0__tools_PointTool__[\"a\" /* default */];\n      case 'distance':\n        return __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__[\"b\" /* DistancePolylineTool */];\n      case 'distancePolygon':\n        return __WEBPACK_IMPORTED_MODULE_2__tools_DistanceTool__[\"a\" /* DistancePolygonTool */];\n      case 'polyline':\n        return __WEBPACK_IMPORTED_MODULE_1__tools_PolylineTool__[\"a\" /* default */];\n      case \"pen\":\n        return __WEBPACK_IMPORTED_MODULE_3__tools_PenTool__[\"a\" /* default */];\n      case \"circle\":\n        return __WEBPACK_IMPORTED_MODULE_7__tools_CircleTool__[\"a\" /* default */];\n      case 'ellipse':\n        return __WEBPACK_IMPORTED_MODULE_8__tools_EllipseTool__[\"a\" /* default */];\n      case \"rect\":\n        return __WEBPACK_IMPORTED_MODULE_5__tools_RectTool__[\"a\" /* default */];\n      case \"polygon\":\n        return __WEBPACK_IMPORTED_MODULE_6__tools_PolygonTool__[\"a\" /* default */];\n      case 'penfill':\n        return __WEBPACK_IMPORTED_MODULE_4__tools_PenFillTool__[\"a\" /* default */];\n      case 'militaryArrow':\n        return __WEBPACK_IMPORTED_MODULE_9__tools_MilitaryArrowTool__[\"a\" /* default */];\n      case 'text':\n        return __WEBPACK_IMPORTED_MODULE_10__tools_TextTool__[\"a\" /* default */];\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  DrawLayer.prototype.cancel = function cancel() {\n    this.tool && this.tool.cancel();\n    this.tool = null;\n  };\n  /**\r\n   * 重置\r\n   */\n\n\n  DrawLayer.prototype.reset = function reset() {\n    this.cancel();\n    this.map.dragging.enable();\n    //  map.doubleClickZoom.enable();\n  };\n  /**\r\n   * 绘制结束\r\n   */\n\n\n  DrawLayer.prototype.onDrawEnd = function onDrawEnd(e) {\n    var _this2 = this;\n\n    // 重置前进内容\n    this.next.length = 0;\n    //\n    var tool = this.tool;\n\n    if (tool) {\n      // 推进历史\n      !this.history.includes(tool) && this.history.push(tool);\n      //\n      var _tool = tool,\n          options = _tool.options,\n          marker = _tool.marker;\n\n\n      marker.__data = tool.data; //余姚新会标绘\n\n      // 延迟交互\n      if (tool.options.tool !== 'distance' && tool.options.tool !== 'distancePolygon' && !options.reable) {\n        setTimeout(function () {\n          marker.setStyle({ interactive: true, draggable: true });\n          _this2._check(marker);\n          if (marker instanceof L.Text === false) _this2._bindText(marker, tool.options);\n        }, 100);\n      }\n      if (options.searchable) {\n        this.dmap.do('search-end', { target: this, event: e, value: this.search(e) });\n      }\n      //\n      options.onDrawEnd && options.onDrawEnd(e);\n      // 绘制模式\n      if (options.multi) {\n        // 重复绘制\n        tool.cancel();\n        tool = this.tool = tool.clone();\n        tool.start();\n      } else if (options.reable) {\n        // 重新绘制\n        tool.cancel();\n        this.tool = tool;\n        tool.start();\n      } else {\n        // 重置\n        this.reset();\n      }\n    } else {\n      this.reset();\n    }\n  };\n  /**\r\n   * 搜索\r\n   */\n\n\n  DrawLayer.prototype.search = function search(e) {\n    var marker = e.marker,\n        result = [];\n\n    if (!marker) {\n      throw 'search error';\n    }\n    var map = marker._map;\n\n    if (marker instanceof Circle) {\n      var _radius = marker._radius;\n\n      var center = marker.getLatLng();\n      map.eachLayer(function (layer) {\n        //\n        if (layer instanceof Marker || layer instanceof __WEBPACK_IMPORTED_MODULE_11__feature_VectorMarker__[\"a\" /* default */]) {\n          if (map.latLngToLayerPoint(layer.getLatLng()).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\n            result.push(layer);\n          }\n        } else if (layer instanceof Polyline) {\n          var latlngs = layer.getLatLngs();\n          if (isArray(latlngs[0])) {\n            //todo \n            latlngs = latlngs[0];\n          }\n          for (var i = 0, len = latlngs.length; i < len; i++) {\n            if (map.latLngToLayerPoint(latlngs[i]).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\n              result.push(layer);\n              break;\n            }\n          }\n        } else if (layer instanceof Polygon) {\n          var _latlngs = layer.getLatLngs();\n          if (isArray(_latlngs[0])) {\n            _latlngs = _latlngs[0];\n          }\n          for (var _i = 0, _len2 = _latlngs.length; _i < _len2; _i++) {\n            if (map.latLngToLayerPoint(_latlngs[_i]).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\n              result.push(layer);\n              break;\n            }\n          }\n        }\n      });\n    } else if (marker instanceof Polygon) {\n      var _rings = marker._rings;\n\n      map.eachLayer(function (layer) {\n        if (layer instanceof Marker || layer instanceof CircleMarker) {\n          if (Object(__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__[\"a\" /* pointInPolygon */])(map.latLngToLayerPoint(layer.getLatLng()), _rings[0])) {\n            result.push(layer);\n          }\n        } else if (layer instanceof Polyline) {\n          var latlngs = layer.getLatLngs();\n          if (isArray(latlngs[0])) {\n            //todo \n            latlngs = latlngs[0];\n          }\n          for (var i = 0, len = latlngs.length; i < len; i++) {\n            if (Object(__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__[\"a\" /* pointInPolygon */])(map.latLngToLayerPoint(latlngs[i]), _rings[0])) {\n              result.push(layer);\n              break;\n            }\n          }\n        } else if (layer instanceof Polygon) {\n          var _latlngs2 = layer.getLatLngs();\n          if (isArray(_latlngs2[0])) {\n            _latlngs2 = _latlngs2[0];\n          }\n          for (var _i2 = 0, _len3 = _latlngs2.length; _i2 < _len3; _i2++) {\n            if (Object(__WEBPACK_IMPORTED_MODULE_13__utils_geoUtils__[\"a\" /* pointInPolygon */])(map.latLngToLayerPoint(_latlngs2[_i2]), _rings[0])) {\n              result.push(layer);\n              break;\n            }\n          }\n        }\n      });\n    }\n    return result;\n  };\n\n  return DrawLayer;\n}(__WEBPACK_IMPORTED_MODULE_12__layer_FeatureLayer__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DrawLayer);\n\n/***/ }),\n\n/***/ 165:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DistancePolylineTool; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DistancePolygonTool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__PolylineTool__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__PolygonTool__ = __webpack_require__(51);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n/**\r\n * 测距\r\n */\nvar DistancePolylineTool = function (_PolylineTool) {\n  _inherits(DistancePolylineTool, _PolylineTool);\n\n  function DistancePolylineTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DistancePolylineTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PolylineTool.call.apply(_PolylineTool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', weight: 2, showMeasurements: true }\n      /**\r\n       * \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  DistancePolylineTool.prototype.onMouseMove = function onMouseMove(e) {\n    _PolylineTool.prototype.onMouseMove.call(this, e);\n    this.marker.updateMeasurements();\n  };\n\n  return DistancePolylineTool;\n}(__WEBPACK_IMPORTED_MODULE_0__PolylineTool__[\"a\" /* default */]);\n/**\r\n * 测面\r\n */\nvar DistancePolygonTool = function (_PolygonTool) {\n  _inherits(DistancePolygonTool, _PolygonTool);\n\n  function DistancePolygonTool() {\n    var _temp2, _this2, _ret2;\n\n    _classCallCheck(this, DistancePolygonTool);\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _ret2 = (_temp2 = (_this2 = _possibleConstructorReturn(this, _PolygonTool.call.apply(_PolygonTool, [this].concat(args))), _this2), _this2.options = { feature: { color: 'red', fillOpacity: .5, weight: 1, showMeasurements: true }\n      /**\r\n       * \r\n       */\n    }, _temp2), _possibleConstructorReturn(_this2, _ret2);\n  }\n\n  DistancePolygonTool.prototype.onMouseMove = function onMouseMove(e) {\n    _PolygonTool.prototype.onMouseMove.call(this, e);\n    this.marker.updateMeasurements();\n  };\n\n  return DistancePolygonTool;\n}(__WEBPACK_IMPORTED_MODULE_1__PolygonTool__[\"a\" /* default */]);\n\n/***/ }),\n\n/***/ 166:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\n\n//\nvar _L = L,\n    Polyline = _L.Polyline;\n/**\r\n * 铅笔工具\r\n */\n\nvar PenTool = function (_Tool) {\n  _inherits(PenTool, _Tool);\n\n  function PenTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PenTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red' }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PenTool.prototype.start = function start() {\n    this.map.once('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PenTool.prototype.cancel = function cancel() {\n    this.map.off('mousedown', this.onMouseDown, this);\n    this.map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\n\n\n  PenTool.prototype.onMouseDown = function onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        options = this.options,\n        map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer);\n      map.once('mouseup', this.onEnd, this);\n      map.on('mousemove', this.onMouseMove, this);\n    }\n  };\n  /**\r\n   * 绘制ing\r\n   * @param e \r\n   */\n\n\n  PenTool.prototype.onMouseMove = function onMouseMove(e) {\n    this.marker.addLatLng(e.latlng);\n  };\n\n  return PenTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PenTool);\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\n\nvar PenFillTool = function (_Tool) {\n  _inherits(PenFillTool, _Tool);\n\n  function PenFillTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PenFillTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PenFillTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PenFillTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  PenFillTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        options = this.options,\n        map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = L.rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('mouseup', this.onEnd, this);\n      // map.off('mousedown', this.onMouseDown);\n    }\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  PenFillTool.prototype.onMouseMove = function onMouseMove(e) {\n    this.marker.addLatLng(e.latlng);\n  };\n\n  return PenFillTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PenFillTool);\n\n/***/ }),\n\n/***/ 168:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\nvar _L = L,\n    Rectangle = _L.Rectangle;\n/**\r\n * 矩形绘制工具\r\n */\n\nvar RectTool = function (_Tool) {\n  _inherits(RectTool, _Tool);\n\n  function RectTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, RectTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  RectTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.once('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  RectTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.sp = null;\n  };\n  /**\r\n   * 绘制\r\n   * @param e \r\n   */\n\n\n  RectTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new Rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer);\n    this.sp = latlng;\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  RectTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n    var latlng = e.latlng;\n\n    marker.setBounds(L.latLngBounds(this.sp, latlng));\n    marker.redraw();\n  };\n\n  return RectTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RectTool);\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    Circle = _L.Circle;\n/**\r\n * \r\n */\n\nCircle.include({\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.radius = this._mRadius;\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: { coordinates: [lng, lat], type: 'Circle' }\n    };\n  }\n});\n/**\r\n * \r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * 原L.Circle在非经纬度等间隔投影的情况下是椭圆\r\n   * 确保是圆形，用于标绘，但实际上是不推荐的，因为半径已经不算是实际的半径\r\n   */\n  _updateBounds: function _updateBounds() {\n    this._radius = this._radiusY;\n    Circle.prototype._updateBounds.call(this);\n  }\n}));\n\n/***/ }),\n\n/***/ 170:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CircleTool__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__ = __webpack_require__(20);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n\n/**\r\n * 椭圆绘制工具\r\n */\n\nvar EllipseTool = function (_CircleTool) {\n  _inherits(EllipseTool, _CircleTool);\n\n  function EllipseTool() {\n    _classCallCheck(this, EllipseTool);\n\n    return _possibleConstructorReturn(this, _CircleTool.apply(this, arguments));\n  }\n\n  /**\r\n   * \r\n   * @param e \r\n   */\n  EllipseTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var options = this.options;\n    var map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_Ellipse__[\"a\" /* default */](latlng, 0, options.feature).addTo(layer);\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  EllipseTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n\n    var latlng = e.latlng;\n    var center = marker.getLatLng();\n    var latlng1 = latlng.clone();\n    var latlng2 = latlng.clone();\n    latlng1.lat = center.lat;\n    latlng2.lng = center.lng;\n    var r = latlng1.distanceTo(center);\n    var ry = latlng2.distanceTo(center);\n    //\n    marker.setRadius(r);\n    marker.setRadiusY(ry);\n    marker.redraw();\n  };\n\n  return EllipseTool;\n}(__WEBPACK_IMPORTED_MODULE_0__CircleTool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EllipseTool);\n\n/***/ }),\n\n/***/ 171:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__ = __webpack_require__(21);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n//\nvar _L = L,\n    LatLng = _L.LatLng;\n/**\r\n * 军标箭头\r\n */\n\nvar MilitaryArrowTool = function (_Tool) {\n  _inherits(MilitaryArrowTool, _Tool);\n\n  function MilitaryArrowTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, MilitaryArrowTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { fillColor: 'red', weight: 1, fillOpacity: .5, color: '#333' }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  MilitaryArrowTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  MilitaryArrowTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  MilitaryArrowTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var feature = options.feature;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      feature.draggable = false;\n      // feature.interactive = false;\n      marker = this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_MilitaryArrow__[\"a\" /* default */]([latlng], feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    } else {\n      this.mp = null;\n    }\n    this.lp = e.layerPoint;\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  MilitaryArrowTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp,\n        latlng = e.latlng,\n        layerPoint = e.layerPoint,\n        latlngs = marker.getLatLngs();\n\n    if (!mp) {\n      var lp = this.lp;\n\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      // marker.getBounds().extend(mp)\n      marker.redraw();\n    }\n  };\n\n  return MilitaryArrowTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (MilitaryArrowTool);\n\n/***/ }),\n\n/***/ 172:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__PointTool__ = __webpack_require__(49);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\n\n\n//\n/**\r\n * 点图元绘制工具\r\n */\n\nvar TextTool = function (_PointTool) {\n  _inherits(TextTool, _PointTool);\n\n  function TextTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, TextTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _PointTool.call.apply(_PointTool, [this].concat(args))), _this), _this.options = { feature: {}\n      /**\r\n       * 绘制-start\r\n       * @param e \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  TextTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var latlng = e.latlng;\n    var options = this.options,\n        layer = this.layer;\n    //\n\n    this.marker = L.text(latlng, options.text, options.feature).addTo(layer);\n    this.onEnd();\n  };\n\n  return TextTool;\n}(__WEBPACK_IMPORTED_MODULE_0__PointTool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextTool);\n\n/***/ }),\n\n/***/ 173:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return pointInPolygon; });\n/* unused harmony export distance */\n/* unused harmony export toRotate */\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.10\r\n */\n/**\r\n * 点在多边形\r\n */\nvar pointInPolygon = function pointInPolygon(p, arr) {\n  var nCross = 0;\n  if (arr.length > 0) {\n    for (var i = 0; i < arr.length; i++) {\n      var p0 = p,\n          p1 = arr[i],\n          p2 = arr[(i + 1) % arr.length];\n      // 求解 y=p.y 与 p1p2 的交点\n      if (p1.y == p2.y || p0.y < (p1.y <= p2.y ? p1.y : p2.y) || p0.y >= (p1.y >= p2.y ? p1.y : p2.y)) // p1p2 与 y=p0.y平行,交点在p1p2延长线上,交点在p1p2延长线上 \n        continue;\n      if ((p0.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x > p0.x) nCross++; //交点的X坐标大于p0的x坐标，只统计单边交点 \t\t\t\n    }\n  }\n  // 单边交点为偶数，点在多边形之外 --- \n  return nCross % 2 == 1;\n};\n/**\r\n* \r\n* @param s start point\r\n* @param p end point\r\n*/\nvar distance = function distance(s, p) {\n  return Math.sqrt((p[0] - s[0]) * (p[0] - s[0]) + (p[1] - s[1]) * (p[1] - s[1]));\n};\n/**\r\n * \r\n * @param p \r\n * @param angle \r\n */\nvar toRotate = function toRotate(p, angle) {\n  angle = Math.atan2(p.y, p.x) + angle;\n  var r = Math.sqrt(p.x * p.x + p.y * p.y); //半径\n  return {\n    x: Math.cos(angle) * r,\n    y: Math.sin(angle) * r\n  };\n};\n\n/***/ }),\n\n/***/ 174:\n/***/ (function(module, exports) {\n\n/**\n * @see https://github.com/ProminentEdge/leaflet-measure-path\n */\n!function () {\n\n  L.Marker.Measurement = L.Layer.extend({\n    options: {\n      pane: 'markerPane'\n    },\n\n    initialize: function initialize(latlng, measurement, title, rotation, options) {\n      L.setOptions(this, options);\n\n      this._latlng = latlng;\n      this._measurement = measurement;\n      this._title = title;\n      this._rotation = rotation;\n    },\n\n    addTo: function addTo(map) {\n      map.addLayer(this);\n      return this;\n    },\n\n    onAdd: function onAdd(map) {\n      this._map = map;\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      var el = this._element = L.DomUtil.create('div', 'leaflet-zoom-animated leaflet-measure-path-measurement', pane);\n      var inner = L.DomUtil.create('div', '', el);\n      inner.title = this._title;\n      inner.innerHTML = this._measurement;\n\n      map.on('zoomanim', this._animateZoom, this);\n\n      this._setPosition();\n    },\n\n    onRemove: function onRemove(map) {\n      map.off('zoomanim', this._animateZoom, this);\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      pane.removeChild(this._element);\n      this._map = null;\n    },\n\n    _setPosition: function _setPosition() {\n      L.DomUtil.setPosition(this._element, this._map.latLngToLayerPoint(this._latlng));\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    },\n\n    _animateZoom: function _animateZoom(opt) {\n      var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\n      L.DomUtil.setPosition(this._element, pos);\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    }\n  });\n\n  L.marker.measurement = function (latLng, measurement, title, rotation, options) {\n    return new L.Marker.Measurement(latLng, measurement, title, rotation, options);\n  };\n\n  var formatDistance = function formatDistance(d) {\n    var unit, feet;\n\n    if (this._measurementOptions.imperial) {\n      feet = d / 0.3048;\n      if (feet > 3000) {\n        d = d / 1609.344;\n        unit = 'mi';\n      } else {\n        d = feet;\n        unit = 'ft';\n      }\n    } else {\n      if (d > 1000) {\n        d = d / 1000;\n        unit = 'km';\n      } else {\n        unit = 'm';\n      }\n    }\n\n    if (d < 100) {\n      return d.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(d) + ' ' + unit;\n    }\n  };\n\n  var formatArea = function formatArea(a) {\n    var unit, sqfeet;\n\n    if (this._measurementOptions.imperial) {\n      if (a > 404.685642) {\n        a = a / 4046.85642;\n        unit = 'ac';\n      } else {\n        a = a / 0.09290304;\n        unit = 'ft²';\n      }\n    } else {\n      if (a > 1000000) {\n        a = a / 1000000;\n        unit = 'km²';\n      } else {\n        unit = 'm²';\n      }\n    }\n\n    if (a < 100) {\n      return a.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(a) + ' ' + unit;\n    }\n  };\n\n  var RADIUS = 6378137;\n  // ringArea function copied from geojson-area\n  // (https://github.com/mapbox/geojson-area)\n  // This function is distributed under a separate license,\n  // see LICENSE.md.\n  var ringArea = function ringArea(coords) {\n    var rad = function rad(_) {\n      return _ * Math.PI / 180;\n    };\n    var p1,\n        p2,\n        p3,\n        lowerIndex,\n        middleIndex,\n        upperIndex,\n        area = 0,\n        coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n      for (var i = 0; i < coordsLength; i++) {\n        if (i === coordsLength - 2) {\n          // i = N-2\n          lowerIndex = coordsLength - 2;\n          middleIndex = coordsLength - 1;\n          upperIndex = 0;\n        } else if (i === coordsLength - 1) {\n          // i = N-1\n          lowerIndex = coordsLength - 1;\n          middleIndex = 0;\n          upperIndex = 1;\n        } else {\n          // i = 0 to N-3\n          lowerIndex = i;\n          middleIndex = i + 1;\n          upperIndex = i + 2;\n        }\n        p1 = coords[lowerIndex];\n        p2 = coords[middleIndex];\n        p3 = coords[upperIndex];\n        area += (rad(p3.lng) - rad(p1.lng)) * Math.sin(rad(p2.lat));\n      }\n\n      area = area * RADIUS * RADIUS / 2;\n    }\n\n    return Math.abs(area);\n  };\n\n  var circleArea = function circleArea(d) {\n    var rho = d / RADIUS;\n    return 2 * Math.PI * RADIUS * RADIUS * (1 - Math.cos(rho));\n  };\n\n  var override = function override(method, fn, hookAfter) {\n    if (!hookAfter) {\n      return function () {\n        method.apply(this, arguments);\n        return fn.apply(this, arguments);\n      };\n    } else {\n      return function () {\n        fn.apply(this, arguments);\n        return method.apply(this, arguments);\n      };\n    }\n  };\n\n  L.Polyline.include({\n    showMeasurements: function showMeasurements(options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        minPixelDistance: 30,\n        showDistances: true,\n        showArea: true,\n        lang: {\n          totalLength: 'Total length',\n          totalArea: 'Total area',\n          segmentLength: 'Segment length'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function hideMeasurements() {\n      this._map.off('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Polyline.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Polyline.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLngs: override(L.Polyline.prototype.setLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    spliceLatLngs: override(L.Polyline.prototype.spliceLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    formatDistance: formatDistance,\n    formatArea: formatArea,\n\n    updateMeasurements: function updateMeasurements() {\n      if (!this._measurementLayer) return this;\n\n      var latLngs = this.getLatLngs(),\n          isPolygon = this instanceof L.Polygon,\n          options = this._measurementOptions,\n          totalDist = 0,\n          formatter,\n          ll1,\n          ll2,\n          p1,\n          p2,\n          pixelDist,\n          dist;\n\n      if (latLngs && latLngs.length && L.Util.isArray(latLngs[0])) {\n        // Outer ring is stored as an array in the first element,\n        // use that instead.\n        latLngs = latLngs[0];\n      }\n\n      this._measurementLayer.clearLayers();\n\n      if (this._measurementOptions.showDistances && latLngs.length > 1) {\n        formatter = this._measurementOptions.formatDistance || L.bind(this.formatDistance, this);\n\n        for (var i = 1, len = latLngs.length; isPolygon && i <= len || i < len; i++) {\n          ll1 = latLngs[i - 1];\n          ll2 = latLngs[i % len];\n          dist = ll1.distanceTo(ll2);\n          totalDist += dist;\n\n          p1 = this._map.latLngToLayerPoint(ll1);\n          p2 = this._map.latLngToLayerPoint(ll2);\n\n          pixelDist = p1.distanceTo(p2);\n\n          if (pixelDist >= options.minPixelDistance) {\n            L.marker.measurement(this._map.layerPointToLatLng([(p1.x + p2.x) / 2, (p1.y + p2.y) / 2]), formatter(dist), options.lang.segmentLength, this._getRotation(ll1, ll2), options).addTo(this._measurementLayer);\n          }\n        }\n\n        // Show total length for polylines\n        if (!isPolygon) {\n          L.marker.measurement(ll2, formatter(totalDist), options.lang.totalLength, 0, options).addTo(this._measurementLayer);\n        }\n      }\n\n      if (isPolygon && options.showArea && latLngs.length > 2) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = ringArea(latLngs);\n        L.marker.measurement(this.getBounds().getCenter(), formatter(area), options.lang.totalArea, 0, options).addTo(this._measurementLayer);\n      }\n\n      return this;\n    },\n\n    _getRotation: function _getRotation(ll1, ll2) {\n      var p1 = this._map.project(ll1),\n          p2 = this._map.project(ll2);\n\n      return Math.atan((p2.y - p1.y) / (p2.x - p1.x));\n    }\n  });\n\n  L.Polyline.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n\n  L.Circle.include({\n    showMeasurements: function showMeasurements(options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        showArea: true,\n        lang: {\n          totalArea: 'Total area'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function hideMeasurements() {\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Circle.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Circle.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLng: override(L.Circle.prototype.setLatLng, function () {\n      this.updateMeasurements();\n    }),\n\n    setRadius: override(L.Circle.prototype.setRadius, function () {\n      this.updateMeasurements();\n    }),\n\n    formatArea: formatArea,\n\n    updateMeasurements: function updateMeasurements() {\n      if (!this._measurementLayer) return;\n\n      var latLng = this.getLatLng(),\n          options = this._measurementOptions,\n          formatter = options.formatArea || L.bind(this.formatArea, this);\n\n      this._measurementLayer.clearLayers();\n\n      if (options.showArea) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = circleArea(this.getRadius());\n        L.marker.measurement(latLng, formatter(area), options.lang.totalArea, 0, options).addTo(this._measurementLayer);\n      }\n    }\n  });\n\n  L.Circle.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n}();\n\n/***/ }),\n\n/***/ 175:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(176);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = __webpack_require__(5).default\nvar update = add(\"10279068\", content, true, {});\n\n/***/ }),\n\n/***/ 176:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(4)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".leaflet-measure-path-measurement{position:absolute;font-size:10px;color:#000;text-shadow:-1px 0 0 #fff,-1px -1px 0 #fff,0 -1px 0 #fff,1px -1px 0 #fff,1px 0 0 #fff,1px 1px 0 #fff,0 1px 0 #fff,-1px 1px 0 #fff;white-space:nowrap;transform-origin:0;pointer-events:none}.leaflet-measure-path-measurement>div{position:relative;margin-top:-25%;left:-50%}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Loader__ = __webpack_require__(12);\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    CircleMarker = _L.CircleMarker;\n\n\n/**\r\n * 矢量图元\r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (L.VectorMarker = CircleMarker.extend({\n  /**\r\n   * \r\n   */\n  options: {\n    // 闪烁,常用于水雨情预警\n    // glow: false,\n    // 线条粗细\n    weight: 1,\n    // 颜色\n    color: '#000',\n    // 是否绘制线条\n    stroke: true,\n    // 是否填充\n    fill: true,\n    // 圆的半径，等腰三角形的底边长\n    radius: 5,\n    // 弧度单位 Math.random() * 2 * Math.PI 三角形角度 \n    angle: 0,\n    // 移入上调层级\n    riseOnHover: true\n  },\n  initialize: function initialize(latlng, options) {\n    CircleMarker.prototype.initialize.call(this, latlng, options);\n    this._radiusY = this.options.radiusY;\n  },\n  // _updateBounds: function () {\n  //   var r = this._radius,\n  //     r2 = this._radiusY || r,\n  //     w = this._clickTolerance() ,\n  //     p = [r + w, r2 + w];\n  //   this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\n  // },\n  // _empty: function () {\n  //   return this._radius && !this._renderer._bounds.intersects(this._pxBounds);\n  // },\n  // \n  // _containsPoint: function (p) {\n  //   return p.distanceTo(this._point) <= this._radius + this._clickTolerance();\n  // },\n\n  _clickTolerance: function _clickTolerance() {\n    return CircleMarker.prototype._clickTolerance.call(this) + 1;\n  },\n  /**\r\n   * @override\r\n   */\n  _project: function _project() {\n    this._point = this._map.latLngToLayerPoint(this._latlng);\n    var options = this.options;\n    var offset = options.offset,\n        icon = options.icon;\n    // 图元整体偏移\n\n    if (offset) {\n      this._point = this._point.add(offset);\n    }\n    // 图元锚点偏移\n    if (icon && icon.iconAnchor) {\n      this._point = this._point.subtract(icon.iconAnchor);\n    }\n    this._updateBounds();\n  },\n\n  /**\r\n   * @override\r\n   */\n  beforeAdd: function beforeAdd(map) {\n    var _this = this;\n\n    var options = this.options;\n\n    CircleMarker.prototype.beforeAdd.call(this, map);\n    // 确保 renderer is canvas,且canvas是唯一的。否则图层相互覆盖影响;\n    if (!map.options.preferCanvas && !options.renderer) {\n      options.renderer = map.__canvas = map.__canvas || L.canvas();\n    }\n    // 用于旋转\n    this.on('transformed', function (e) {\n      options.angle = e.rotation;\n      _this.redraw();\n    });\n  },\n\n  /**\r\n   * @override\r\n   * todo 优化性能，预执行\r\n   */\n  _updatePath: function _updatePath() {\n    var that = this;\n    var options = that.options,\n        _renderer = that._renderer;\n    var src = options.src;\n\n    src = src || 'circle';\n    switch (src) {\n      case 'triangle':\n        return _renderer._updateTriangle(that);\n      case 'rect':\n        if (!options.radiusY) {\n          that._radius = that._radiusY = 8;\n        }\n        return _renderer._updateRect(that);\n      case 'circle':\n        return _renderer._updateCircle(that);\n      case 'line':\n        //旋转句柄\n        return _renderer._updateLine(that);\n      default:\n        if (that._loader) {\n          _renderer._updateIcon(that);\n        } else {\n          // todo\n          if (src && src.indexOf('/') !== 0 && !src.includes('http')) {\n            src = options.src = T + src;\n          }\n          !that.loader && (that.loader = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Loader__[\"a\" /* default */])(src)).then(function (img) {\n            that._loader = img;\n            that._radius = img.width / 2;\n            that._radiusY = img.height / 2;\n            that.redraw();\n          });\n        }\n        break;\n    }\n  }\n}));\n\n/***/ }),\n\n/***/ 20:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\nvar _L = L,\n    Circle = _L.Circle;\n/**\r\n * \r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * \r\n   */\n  initialize: function initialize(latlng, options, legacyOptions) {\n    Circle.prototype.initialize.call(this, latlng, options, legacyOptions);\n    this._mRadiusY = this.options.radiusY;\n  },\n  /**\r\n   * \r\n   */\n  _project: function _project() {\n    var _latlng = this._latlng,\n        map = this._map,\n        _mRadius = this._mRadius,\n        _mRadiusY = this._mRadiusY;\n\n    _mRadiusY = _mRadiusY || _mRadius;\n    // let { crs } = map.options;\n    var crs = L.CRS.EPSG3857; // 暂时，因为在其他坐标投影中暂时有问题。\n    var _point = this._point = map.latLngToLayerPoint(_latlng);\n    //\n    var latlng2 = crs.unproject(crs.project(_latlng).subtract([_mRadius, 0]));\n    var latlng3 = crs.unproject(crs.project(_latlng).subtract([_mRadiusY, 0]));\n    //\n    this._radius = _point.x - map.latLngToLayerPoint(latlng2).x;\n    this._radiusY = _point.x - map.latLngToLayerPoint(latlng3).x;\n    this._updateBounds();\n    //\n  },\n  /**\r\n   * \r\n   */\n  setRadiusY: function setRadiusY(radiusY) {\n    this._mRadiusY = radiusY;\n    return this.redraw();\n  },\n  /**\r\n   * \r\n   */\n  getRadiusY: function getRadiusY() {\n    return this._mRadiusY;\n  },\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.radius = this._mRadius;\n    this.options.radiusY = this._mRadiusY;\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: { coordinates: [lng, lat], type: 'Ellipse' }\n    };\n  }\n}));\n\n/**\r\n * @see https://github.com/jdfergason/Leaflet.Ellipse\r\n */\n\n// L.Canvas.include ({\n//   _updateEllipse: function (layer) {\n//       if (layer._empty()) { return; }\n\n//       var p = layer._point,\n//           ctx = this._ctx,\n//           r = layer._radiusX,\n//           s = (layer._radiusY || r) / r;\n\n//       this._drawnLayers[layer._leaflet_id] = layer;\n\n//       ctx.save();\n\n//       ctx.translate(p.x, p.y);\n//       if (layer._tilt !== 0) {\n//           ctx.rotate( layer._tilt );\n//       }\n//       if (s !== 1) {\n//           ctx.scale(1, s);\n//       }\n\n//       ctx.beginPath();\n//       ctx.arc(0, 0, r, 0, Math.PI * 2);\n//       ctx.restore();\n\n//       this._fillStroke(ctx, layer);\n//   },\n// });\n\n// export default L.Path.extend({\n\n//   options: {\n//       fill: true,\n//       startAngle: 0,\n//       endAngle: 359.9\n//   },\n\n//   initialize: function (latlng, radii, tilt, options) {\n\n//       L.setOptions(this, options);\n//       this._latlng = L.latLng(latlng);\n\n//       if (tilt) {\n//           this._tiltDeg = tilt;\n//       } else {\n//           this._tiltDeg = 0;\n//       }\n\n//       if (radii) {\n//           this._mRadiusX = radii[0];\n//           this._mRadiusY = radii[1];\n//       }\n//   },\n\n//   setRadius: function (radii) {\n//       this._mRadiusX = radii[0];\n//       this._mRadiusY = radii[1];\n//       return this.redraw();\n//   },\n\n//   getRadius: function () {\n//       return new L.point(this._mRadiusX, this._mRadiusY);\n//   },\n\n//   setTilt: function (tilt) {\n//       this._tiltDeg = tilt;\n//       return this.redraw();\n//   },\n\n//   getBounds: function () {\n//       // TODO respect tilt (bounds are too big)\n//       var lngRadius = this._getLngRadius(),\n//           latRadius = this._getLatRadius(),\n//           latlng = this._latlng;\n\n//       return new L.LatLngBounds(\n//           [latlng.lat - latRadius, latlng.lng - lngRadius],\n//           [latlng.lat + latRadius, latlng.lng + lngRadius]);\n//   },\n\n//   // @method setLatLng(latLng: LatLng): this\n//   // Sets the position of a circle marker to a new location.\n//   setLatLng: function (latlng) {\n//       this._latlng = L.latLng(latlng);\n//       this.redraw();\n//       return this.fire('move', {latlng: this._latlng});\n//   },\n\n//   // @method getLatLng(): LatLng\n//   // Returns the current geographical position of the circle marker\n//   getLatLng: function () {\n//       return this._latlng;\n//   },\n\n//   setStyle: L.Path.prototype.setStyle,\n\n//   _project: function () {\n//       var lngRadius = this._getLngRadius(),\n//           latRadius = this._getLatRadius(),\n//           latlng = this._latlng,\n//           pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]),\n//           pointBelow = this._map.latLngToLayerPoint([latlng.lat - latRadius, latlng.lng]);\n\n//       this._point = this._map.latLngToLayerPoint(latlng);\n//       this._radiusX = Math.max(this._point.x - pointLeft.x, 1);\n//       this._radiusY = Math.max(pointBelow.y - this._point.y, 1);\n//       this._tilt = Math.PI * this._tiltDeg / 180;\n//       this._endPointParams = this._centerPointToEndPoint();\n//       this._updateBounds();\n//   },\n\n//   _updateBounds: function () {\n//       // http://math.stackexchange.com/questions/91132/how-to-get-the-limits-of-rotated-ellipse\n//       var sin = Math.sin(this._tilt);\n//       var cos = Math.cos(this._tilt);\n//       var sinSquare = sin * sin;\n//       var cosSquare = cos * cos;\n//       var aSquare = this._radiusX * this._radiusX;\n//       var bSquare = this._radiusY * this._radiusY;\n//       var halfWidth = Math.sqrt(aSquare*cosSquare+bSquare*sinSquare);\n//       var halfHeight = Math.sqrt(aSquare*sinSquare+bSquare*cosSquare);\n//       var w = this._clickTolerance();\n//       var p = [halfWidth + w, halfHeight + w];\n//       this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\n//   },\n\n//   _update: function () {\n//       if (this._map) {\n//           this._updatePath();\n//       }\n//   },\n\n//   _updatePath: function () {\n//       this._renderer._updateEllipse(this);\n//   },\n\n//   _getLatRadius: function () {\n//       return (this._mRadiusY / 40075017) * 360;\n//   },\n\n//   _getLngRadius: function () {\n//       return ((this._mRadiusX / 40075017) * 360) / Math.cos((Math.PI / 180) * this._latlng.lat);\n//   },\n\n//   _centerPointToEndPoint: function () {\n//       // Convert between center point parameterization of an ellipse\n//       // too SVG's end-point and sweep parameters.  This is an\n//       // adaptation of the perl code found here:\n//       // http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths\n//       var c = this._point,\n//           rx = this._radiusX,\n//           ry = this._radiusY,\n//           theta2 = (this.options.startAngle + this.options.endAngle) * (Math.PI / 180),\n//           theta1 = this.options.startAngle * (Math.PI / 180),\n//           delta = this.options.endAngle,\n//           phi = this._tiltDeg * (Math.PI / 180);\n\n//       // Determine start and end-point coordinates\n//       var x0 = c.x + Math.cos(phi) * rx * Math.cos(theta1) +\n//           Math.sin(-phi) * ry * Math.sin(theta1);\n//       var y0 = c.y + Math.sin(phi) * rx * Math.cos(theta1) +\n//           Math.cos(phi) * ry * Math.sin(theta1);\n\n//       var x1 = c.x + Math.cos(phi) * rx * Math.cos(theta2) +\n//           Math.sin(-phi) * ry * Math.sin(theta2);\n//       var y1 = c.y + Math.sin(phi) * rx * Math.cos(theta2) +\n//           Math.cos(phi) * ry * Math.sin(theta2);\n\n//       var largeArc = (delta > 180) ? 1 : 0;\n//       var sweep = (delta > 0) ? 1 : 0;\n\n//       return {'x0': x0, 'y0': y0, 'tilt': phi, 'largeArc': largeArc,\n//           'sweep': sweep, 'x1': x1, 'y1': y1};\n//   },\n\n//   _empty: function () {\n//       return this._radiusX && this._radiusY && !this._renderer._bounds.intersects(this._pxBounds);\n//   },\n\n//   _containsPoint : function (p) {\n//       // http://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\n//       var sin = Math.sin(this._tilt);\n//       var cos = Math.cos(this._tilt);\n//       var dx = p.x - this._point.x;\n//       var dy = p.y - this._point.y;\n//       var sumA = cos * dx + sin * dy;\n//       var sumB = sin * dx - cos * dy;\n//       return sumA * sumA / (this._radiusX * this._radiusX)  + sumB * sumB / (this._radiusY * this._radiusY) <= 1;\n//   }\n// });\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_Bezier__ = __webpack_require__(35);\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017-6-15\r\n */\n\nvar _L = L,\n    Polyline = _L.Polyline,\n    Polygon = _L.Polygon,\n    toPoint = _L.point;\nvar _Polyline$prototype = Polyline.prototype,\n    _projectLatlngs2 = _Polyline$prototype._projectLatlngs,\n    _toGeoJSON = _Polyline$prototype.toGeoJSON;\n/**\r\n * 军标箭头\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Polyline.extend({\n  /**\r\n   * @param options\r\n   */\n  options: {\n    fill: true,\n    noClip: true\n  },\n  /**\r\n   * @override\r\n   */\n  _projectLatlngs: function _projectLatlngs(latlngs, result, projectedBounds) {\n    var temp = [];\n    _projectLatlngs2.call(this, latlngs, temp, projectedBounds);\n    temp = temp[0].map(function (p) {\n      return [p.x, p.y];\n    });\n    temp = Object(__WEBPACK_IMPORTED_MODULE_0__utils_Bezier__[\"a\" /* coattail */])(temp, 0.005, this.options);\n    result = result[0] = [];\n    for (var i = 0, l = temp.length; i < l; i++) {\n      result[i] = toPoint(temp[i][0], temp[i][1]);\n      projectedBounds.extend(result[i]);\n    }\n  },\n\n  /**\r\n   * \r\n   */\n  _containsPoint: function _containsPoint(p) {\n    return Polygon.prototype._containsPoint.call(this, p, true);\n  },\n\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var json = _toGeoJSON.call(this);\n    json.geometry.type = 'MilitaryArrow';\n    return json;\n  }\n}));\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = listToStyles;\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nfunction listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_LonLats__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__feature_Text__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__feature_Text___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__feature_Text__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__feature_Heat__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__feature_Heat___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__feature_Heat__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feature_River__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__feature_MilitaryArrow__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_overlapping_marker_spiderfier_leaflet_build_oms__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_overlapping_marker_spiderfier_leaflet_build_oms___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_overlapping_marker_spiderfier_leaflet_build_oms__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2016-11-4\r\n */\n\n\n\n\n\n\n\n\n\n\n// import { AntPath, antPath } from 'leaflet-ant-path';\n//\nvar _T = T,\n    isFunction = _T.isFunction,\n    isArray = _T.isArray,\n    fmt = _T.fmt,\n    $assign = _T.assign;\nvar _L = L,\n    toGroup = _L.featureGroup,\n    toMarker = _L.marker,\n    toPolyline = _L.polyline,\n    toPolygon = _L.polygon,\n    toCircle = _L.circle,\n    toTooltip = _L.tooltip,\n    toIcon = _L.icon,\n    toDivIcon = _L.divIcon,\n    toImageOverlay = _L.imageOverlay;\n\nvar toArray = function toArray(data) {\n  return isArray(data) ? data : [data];\n};\nvar toOptions = function toOptions(options, data) {\n  return isFunction(options) ? options(data) : options || {};\n};\n/**\r\n * 要素管理的通用图层\r\n */\n\nvar FeatureLayer = function (_T$Class) {\n  _inherits(FeatureLayer, _T$Class);\n\n  // 样式，图层配置\n  /**\r\n   * \r\n   * @param {*} options \r\n   */\n  function FeatureLayer(options) {\n    _classCallCheck(this, FeatureLayer);\n\n    var _this = _possibleConstructorReturn(this, _T$Class.call(this));\n\n    _this.initHook();\n    // 台风模块需要设置预报机构\n    _this.config(options);\n    return _this;\n  }\n  /**\r\n   * \r\n   */\n  // 预留，提供给菜单，用于绑定检索\n\n\n  FeatureLayer.prototype.initHook = function initHook() {\n    var _this2 = this;\n\n    var that = this;\n    that._source = [];\n    ['addPoints', 'addPolylines', 'addPolygons', 'addTyphoon', 'addAlarmLines'].forEach(function (name) {\n      _this2.addFnHook(name, {\n        precall: function precall() {\n          var _this3 = this;\n\n          var data = {\n            fn: name,\n            args: arguments\n          };\n          that._source.push(data);\n          T.defer(function () {\n            _this3.do('feature-add', data);\n          });\n        }\n      });\n    });\n    this.addFnHook('clear', {\n      precall: function precall() {\n        that._source.length = 0;\n        T.defer(function () {\n          that.do('feature-clear');\n        });\n      }\n    });\n  };\n  /**\r\n   * 连接，复制\r\n   * @param {*} layer \r\n   */\n\n\n  FeatureLayer.prototype.connect = function connect(layer) {\n    var options = this.options,\n        _source = this._source;\n\n    layer.options = options;\n    _source.forEach(function (item) {\n      layer[item.fn].apply(layer, item.args);\n    });\n    //\n    this.on(\"feature-add\", function (e) {\n      layer[e.fn].apply(layer, e.args);\n    }).on('feature-clear', function () {\n      layer.clear();\n    });\n  };\n  /**\r\n   * 配置\r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype.config = function config(options) {\n    this.options = options;\n    this.layer = toGroup();\n  };\n  /**\r\n   * 判断图元是否存在\r\n   * @param {*} marker \r\n   */\n\n\n  FeatureLayer.prototype.has = function has(marker) {\n    return this.layer.hasLayer(marker);\n  };\n  /**\r\n   * 获取所有图层\r\n   */\n\n\n  FeatureLayer.prototype.getMarkers = function getMarkers() {\n    return this.layer.getLayers();\n  };\n  /**\r\n   * 添加图元\r\n   * @param {*} feature \r\n   */\n\n\n  FeatureLayer.prototype._add = function _add(feature) {\n    this.layer.addLayer(feature);\n  };\n  /**\r\n   * 添加图元，并绑定tooltip、popup、text\r\n   * @param feature \r\n   */\n\n\n  FeatureLayer.prototype.add = function add(feature, options, data) {\n    if (feature) {\n      feature.__data = data;\n      this._add(feature);\n      this._bindToolTip(feature, options, data);\n      this._bindPopup(feature, options, data);\n      this._bindText(feature, options, data);\n      //\n    }\n  };\n  /**\r\n   * 添加点图元\r\n   * @param data [{coordinates:[lon,lat] or [{lon,lat}] or [{lat,lng}]\r\n   * @param style\r\n   */\n\n\n  FeatureLayer.prototype.addPoints = function addPoints(data, options) {\n    var _this4 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var feature = _this4.createPoint(item, featureOptions);\n      _this4.add(feature, featureOptions, item);\n      return feature;\n    });\n  };\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addClusterPoints = function addClusterPoints(data, options) {\n    var _this5 = this;\n\n    var group = L.markerClusterGroup();\n    var layer = this.layer,\n        _bindToolTip = this._bindToolTip,\n        _bindPopup = this._bindPopup;\n\n    layer.addLayer(group);\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this5.createPoint(item, featureOptions);\n      if (marker) {\n        marker.__data = item;\n        _bindToolTip(marker, featureOptions, item);\n        _bindPopup(marker, featureOptions, item);\n        group.addLayer(marker);\n      }\n      return marker;\n    });\n  };\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addClusterPoints2 = function addClusterPoints2(data, options) {\n    var group = this.oms = this.oms || new L.OverlappingMarkerSpiderfier(this.map);\n    var markers = this.addPoints(data, options);\n    markers.forEach(function (marker) {\n      group.addMarker(marker);\n    });\n  };\n  /**\r\n   * 添加线图元\r\n   * @param {*} data\r\n   * @param {*} options\r\n   */\n\n\n  FeatureLayer.prototype.addPolylines = function addPolylines(data, options) {\n    var _this6 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this6.createPolyLine(item, featureOptions);\n      _this6.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部 \n      return marker;\n    });\n  };\n  /**\r\n   * 添加多边形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addPolygons = function addPolygons(data, options) {\n    var _this7 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this7.createPolygon(item, featureOptions);\n      _this7.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部\n      return marker;\n    });\n  };\n  /**\r\n   * 添加圆形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   *  \r\n   */\n\n\n  FeatureLayer.prototype.addCircles = function addCircles(data, options) {\n    var _this8 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this8.createCircle(item, featureOptions);\n      _this8.add(marker, featureOptions, item);\n      marker.bringToBack(); // 暂时底部\n    });\n  };\n  /**\r\n   * 添加椭圆\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addEllipses = function addEllipses(data, options) {\n    var _this9 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = _this9.createEllipse(item, featureOptions);\n      _this9.add(marker, featureOptions, item);\n      marker.bringToBack(); // 暂时底部\n    });\n  };\n  /**\r\n   * 添加文本图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addTexts = function addTexts(data, options) {\n    var _this10 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var marker = L.text(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(item.coordinates || item), item.text || item.properties.text, featureOptions.feature || featureOptions);\n      marker.__data = item;\n      _this10.layer.addLayer(marker);\n    });\n  };\n  /**\r\n   * 添加河流\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addRivers = function addRivers(data, options) {\n    var _this11 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var feature = featureOptions.feature;\n      var coordinates = item.coordinates;\n\n      var deep = coordinates[0] && isArray(coordinates[0][0]) ? 2 : 1;\n      var marker = new __WEBPACK_IMPORTED_MODULE_7__feature_River__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n      _this11.layer.addLayer(marker);\n    });\n  };\n  /**\r\n   * 添加图片图元(雷达图、云图)\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addImage = function addImage(data, options) {\n    var marker = toImageOverlay(options.url, Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates, 1), options);\n    this.layer.addLayer(marker);\n    return marker;\n  };\n  /**\r\n   * 添加军标箭头\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addMilitaryArrows = function addMilitaryArrows(data, options) {\n    var _this12 = this;\n\n    return toArray(data).map(function (item) {\n      var featureOptions = toOptions(options, item);\n      var feature = featureOptions.feature;\n      var coordinates = item.coordinates,\n          deep = 1;\n      if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\n        deep = 2;\n      }\n      var marker = new __WEBPACK_IMPORTED_MODULE_8__feature_MilitaryArrow__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n      _this12.add(marker, featureOptions, item);\n      marker.bringToBack(); //暂时底部 \n      return marker;\n    });\n  };\n  /**\r\n   * 添加台风 \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addTyphoon = function addTyphoon(data, options) {\n    var typhoons = this.typhoons || (this.typhoons = {});\n    var feature = typhoons[data.tfbh];\n    var featureOptions = toOptions(options || this.options);\n    if (!feature) {\n      feature = typhoons[data.tfbh] = this.createTyphoon(data, featureOptions);\n      feature.addTo(this);\n    } else {\n      // 刷新\n      feature.update(data);\n    }\n    return feature;\n  };\n  /**\r\n   * 台风警戒线 \r\n   * @deprecated 慎用，可能被废弃\r\n   * @param data {\r\n   *  g24: [[105, 0], [113, 4.5], [119, 11], [119, 18], [127, 22], [127, 34]],\r\n   *  s24: { color: '#0000FF', opacity: 1, weight: 1, dashArray: '10,3', interactive: false },\r\n   *  g48: [[105, 0], [120, 0], [132, 15], [132, 34]],\r\n   *  s48: { color: '#FFFF00', opacity: 1, weight: 1, dashArray: '10,3', interactive: false } \r\n   * }\r\n   */\n\n\n  FeatureLayer.prototype.addAlarmLines = function addAlarmLines(data) {\n    if (!data) return;\n    var layer = this.layer;\n\n    var createPolyline = function createPolyline(coor, options) {\n      return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor, 1), options);\n    };\n    var m48 = createPolyline(data.g48, data.s48);\n    var m24 = createPolyline(data.g24, data.s24);\n    layer.addLayer(m48).addLayer(m24);\n  };\n  /**\r\n   * 添加热力图\r\n   * @param data\r\n   * @param options\r\n   */\n\n\n  FeatureLayer.prototype.addHeat = function addHeat(data, options) {\n    options = toOptions(options);\n    var marker = L.heat(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data, 1), options.feature);\n    return this.add(marker, options, data), marker;\n  };\n  /**\r\n   * todo:\r\n   * 1、支持4326投影\r\n   * @param data\r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype.addVelocity = function addVelocity(data, options) {\n    var _this13 = this;\n\n    return new Promise(function (resolve) {\n      T.require(['dmap/leaflet/plugins/velocityLayer'], function (_ref) {\n        var createLayer = _ref.default;\n\n        var marker = createLayer(data, options);\n        _this13._add(marker);\n        resolve(marker);\n      });\n    });\n  };\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.addWindy = function addWindy(data, options) {\n    var _this14 = this;\n\n    return new Promise(function (resolve) {\n      T.require(['dmap/leaflet/plugins/windyLayer'], function (_ref2) {\n        var createWindyLayer = _ref2.default;\n\n        options = T.assign({\n          tempOverlay: true\n        }, options);\n        //\n        var windfarm = _this14.windfarm;\n\n        if (windfarm && windfarm.options.tempOverlay === options.tempOverlay) {\n          windfarm.loadWindy(data);\n        } else {\n          windfarm && windfarm.removeFrom(_this14.layer);\n          windfarm = _this14.windfarm = createWindyLayer(options);\n          _this14._add(windfarm);\n          windfarm.loadWindy(data);\n        }\n        resolve(windfarm);\n      });\n    });\n  };\n  /**\r\n   * 添加 shp 图层\r\n   */\n\n\n  FeatureLayer.prototype.addShp = function addShp(url, options) {\n    var layer = L.shapefile(url, options);\n    this._add(layer);\n    return layer;\n  };\n  /**\r\n   * @see https://github.com/Flexberry/Leaflet-WFST\r\n   * @see https://github.com/azgs/azgs-leaflet\r\n   */\n\n\n  FeatureLayer.prototype.addWFS = function addWFS(url, options) {\n    var _this15 = this;\n\n    T.require(['dmap/leaflet/plugins/wfst'], function (_ref3) {\n      var wfst = _ref3.default;\n\n      options.url = url;\n      new L.WFST(options, new L.Format.GeoJSON({\n        crs: L.CRS.EPSG4326\n      })).addTo(_this15.map).once('load', function () {\n        map.fitBounds(wfst);\n      });\n    });\n  };\n  /**\r\n   * 添加 geojson 图层  \r\n   * @param {*} geojson \r\n   * @see https://leafletjs.com/reference-1.3.0.html#geojson\r\n   */\n\n\n  FeatureLayer.prototype.addGeoJSON = function addGeoJSON(geojson, options) {\n    var _this16 = this;\n\n    var geometry = geojson.type === 'Feature' ? geojson.geometry : geojson;\n    var coords = geometry ? geometry.coordinates : null;\n    var type = geometry.type;\n    if (!coords && !geometry) {\n      return null;\n    }\n    options = isFunction(options) ? options : $assign({}, options, geometry.properties);\n    switch (type) {\n      case 'MultiPoint':\n        geojson = coords.map(function (coordinates) {\n          return {\n            coordinates: coordinates,\n            properties: geometry.properties\n          };\n        });\n      case 'Point':\n        return this.addPoints(geojson, options);\n      case 'LineString':\n      case 'MultiLineString':\n        // { coordinates: lonlats(coords, type === 'LineString' ? 0 : 1) }\n        return this.addPolylines(geometry, options);\n      case 'Polygon':\n      case 'MultiPolygon':\n        // { coordinates: lonlats(coords, type === 'Polygon' ? 1 : 2) }\n        return this.addPolygons(geometry, options);\n      case 'GeometryCollection':\n        return geometry.geometries.map(function (data) {\n          return _this16.addGeoJSON(data, options);\n        });\n      // 拓展 geojson 的类型\n      case 'Circle':\n        return this.addCircles(geometry, options);\n      case 'Ellipse':\n        return this.addEllipses(geometry, options);\n      case 'Text':\n        return this.addTexts(geometry, options);\n      case 'MilitaryArrow':\n        //军标箭头\n        return this.addMilitaryArrows(geometry, options);\n    }\n  };\n  /**\r\n   * 批量移除台风\r\n   */\n\n\n  FeatureLayer.prototype.removeTyphoons = function removeTyphoons(ids) {\n    var typhoons = this.typhoons;\n\n    if (typhoons) {\n      ids = ids || Object.keys(typhoons);\n      T.each(ids, function (id) {\n        var typhoon = typhoons[id];\n        if (typhoon) {\n          typhoon.remove();\n          delete typhoons[id];\n        }\n      });\n    }\n  };\n  /**\r\n   * 获取台风对象\r\n   * @param {*} id\r\n   */\n\n\n  FeatureLayer.prototype.getTyphoon = function getTyphoon(id) {\n    var typhoons = this.typhoons;\n\n    return id === void 0 ? typhoons : typhoons && typhoons[id];\n  };\n  /**\r\n   * 创建台风对象\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createTyphoon = function createTyphoon(data, options) {\n    return new __WEBPACK_IMPORTED_MODULE_3__feature_Typhoon__[\"a\" /* default */](data, options);\n  };\n  /**\r\n   * 点图元工厂\r\n   * @param {*} data\r\n   * @param {*} options {feature:{icon,symbol,glowOptions,flowOptions}}\r\n   */\n\n\n  FeatureLayer.prototype.createPoint = function createPoint(data, options) {\n    var feature = options.feature;\n\n    var _ref4 = feature || {},\n        tag = _ref4.tag,\n        src = _ref4.src;\n    //\n\n\n    var latlng = Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates || data);\n    if (latlng) {\n      if (tag) {\n        switch (tag) {\n          case 'img':\n            var anchor = feature.offset;\n            if (anchor) {\n              anchor = [-anchor[0], -anchor[1]];\n            }\n            feature.icon = toIcon($assign({\n              iconUrl: src,\n              iconAnchor: anchor\n              // iconSize: [38, 95],\n              // popupAnchor: [-3, -76],\n              // shadowUrl: 'shadow.png',\n              // shadowSize: [68, 95],\n              // shadowAnchor: [22, 94]\n            }, feature.icon));\n            break;\n          case 'div':\n            feature.icon = toDivIcon($assign({\n              iconAnchor: anchor\n            }, feature.icon));\n            break;\n        }\n        return toMarker(latlng, feature);\n      }\n      return new __WEBPACK_IMPORTED_MODULE_2__feature_VectorMarker__[\"a\" /* default */](latlng, feature);\n    }\n  };\n  /**\r\n   * 线图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createPolyLine = function createPolyLine(data, options) {\n    var feature = options.feature;\n    var coordinates = data.coordinates,\n        deep = 1;\n    //todo\n    if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\n      deep = 2;\n    }\n    return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n  };\n\n  /**\r\n   * 多边形图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createPolygon = function createPolygon(data, options) {\n    var feature = options.feature;\n    var coordinates = data.coordinates;\n\n    var deep = coordinates && coordinates[0] && isArray(coordinates[0][0]) ? 2 : 1;\n    // 数据错误，容错下，标绘\n    if (!isArray(coordinates[0])) {\n      coordinates = [coordinates];\n    }\n    return toPolygon(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coordinates, deep), feature);\n  };\n  /**\r\n   * 创建圆形图元\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createCircle = function createCircle(data, options) {\n    return toCircle(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates), options.feature);\n  };\n  /**\r\n   * 创建椭圆图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\n\n\n  FeatureLayer.prototype.createEllipse = function createEllipse(data, options) {\n    return new __WEBPACK_IMPORTED_MODULE_4__feature_Ellipse__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(data.coordinates), options.feature);\n  };\n  /**\r\n   * 绑定 tooltip ，浮出层，一般用于显示站名\r\n   * @param marker \r\n   * @param options \r\n   * @param data \r\n   */\n\n\n  FeatureLayer.prototype._bindToolTip = function _bindToolTip(marker, options, data) {\n    if (options = options.tooltip) {\n      var _options = options,\n          text = _options.text;\n\n      var tooltip = data && typeof text == 'string' ? fmt(text, data.properties || data) : text;\n      //\n      if (tooltip) {\n        // options.interactive = true;\n        // tooltip = toTooltip(options, marker).setContent(tooltip);\n        marker.bindTooltip(tooltip, options);\n      }\n    }\n  };\n  /**\r\n   * 绑定 popup 弹出层，一般用于显示报图\r\n   * @param marker \r\n   * @param options \r\n   */\n\n\n  FeatureLayer.prototype._bindPopup = function _bindPopup(marker, options) {\n    options = options.popup;\n    if (options) {\n      var popup = new __WEBPACK_IMPORTED_MODULE_1__polyfill_Popup__[\"a\" /* default */](options).setContent(options.text);\n      marker.bindPopup(popup, options);\n      // marker.bindPopup(options.text, options);\n    }\n  };\n  /**\r\n   * 绑定静态文本，一般用于面和线上的文本显示\r\n   */\n\n\n  FeatureLayer.prototype._bindText = function _bindText(marker, options) {\n    options = options.text;\n    if (options) {\n      marker.bindText(options.text, options);\n    }\n  };\n  /**\r\n   * @deprecated 慎用，这个方法可能会被弃用\r\n   */\n\n\n  FeatureLayer.prototype.updateTooltips = function updateTooltips() {\n    this.map && this.map.eachLayer(function (layer) {\n      var tooltip = layer.getTooltip();\n      tooltip && tooltip.isOpen && tooltip.update();\n    });\n  };\n  /**\r\n   * 隐藏标注，常用于水雨情设置模块\r\n   * @param hide\r\n   */\n\n\n  FeatureLayer.prototype.hideTooltip = function hideTooltip(hide) {\n    if (hide === void 0) hide = true;\n    this.layer.eachLayer(function (layer) {\n      var tooltip = layer.getTooltip();\n      if (tooltip) {\n        layer.hideTooltip(hide);\n      }\n    });\n  };\n  /**\r\n   * 清除\r\n   */\n\n\n  FeatureLayer.prototype.clear = function clear() {\n    this.layer.clearLayers();\n    this.typhoons = null;\n    return this;\n  };\n  /**\r\n   * 挂起\r\n   */\n\n\n  FeatureLayer.prototype.suspend = function suspend() {\n    var map = this.map,\n        layer = this.layer;\n\n    map && map.removeLayer(layer);\n    this.suspended = true;\n  };\n  /**\r\n   * 重启\r\n   */\n\n\n  FeatureLayer.prototype.resume = function resume() {\n    var map = this.map,\n        layer = this.layer;\n\n    map && map.addLayer(layer);\n  };\n  /**\r\n   * 添加\r\n   * @param dmap \r\n   */\n\n\n  FeatureLayer.prototype.addTo = function addTo(dmap) {\n    //\n    this.dmap = dmap;\n    this.map = dmap.map;\n    //\n    dmap.addLayer(this);\n    return this;\n  };\n  /**\r\n   * 移除\r\n   */\n\n\n  FeatureLayer.prototype.remove = function remove() {\n    this.dmap.removeLayer(this.layer);\n    this.dmap = null;\n    this.map = null;\n    return this;\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\n\n\n  FeatureLayer.prototype.on = function on(types, fn, ctx) {\n    return this.layer.on(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\n\n\n  FeatureLayer.prototype.once = function once(types, fn, ctx) {\n    return this.layer.once(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx  \r\n   */\n\n\n  FeatureLayer.prototype.off = function off(types, fn, ctx) {\n    return this.layer.off(types, fn, ctx);\n  };\n  /**\r\n   * \r\n   * @param {*} types \r\n   * @param {*} e \r\n   */\n\n\n  FeatureLayer.prototype.do = function _do(types, e) {\n    return this.layer.fire(types, e);\n  };\n  /**\r\n   * 导出 GeoJson\r\n   * @param precision\r\n   */\n\n\n  FeatureLayer.prototype.toGeoJSON = function toGeoJSON(precision) {\n    var layer = this.layer;\n\n    var jsons = [];\n    layer.eachLayer(function (layer) {\n      if (layer.toGeoJSON) {\n        var json = layer.toGeoJSON(precision);\n        var geometry = json.geometry,\n            properties = json.properties;\n        var data = layer.__data,\n            options = layer.options;\n\n        var tooltip = layer.getTooltip();\n        var text = layer.getText();\n\n        //\n        geometry.properties = $assign(properties, geometry.properties, data && data.properties, {\n          feature: options,\n          tooltip: tooltip && tooltip.options,\n          text: text && text.options\n        });\n        geometry.properties.feature.className = ''; //暂时设置为空\n        jsons.push(geometry);\n      }\n    });\n    //\n    return {\n      geometries: jsons,\n      type: 'GeometryCollection'\n    };\n    //\n  };\n\n  return FeatureLayer;\n}(T.Class);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FeatureLayer);\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n/**\r\n *  @param {boolean} restart 重新启动\r\n */\nvar Tool = function () {\n  function Tool() {\n    _classCallCheck(this, Tool);\n  }\n\n  /**\r\n   * \r\n   */\n  Tool.prototype.initMouseDownHandler = function initMouseDownHandler() {\n    var _this = this;\n\n    this.onMouseDown = this.onMouseDown || function (e) {\n      if (e.originalEvent.button == 0) {\n        _this._onMouseDown(e);\n      }\n    };\n  };\n  /**\r\n   * \r\n   * @param options \r\n   */\n\n\n  Tool.prototype.setOptions = function setOptions(options) {\n    T.assign(this.options, options);\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.reback = function reback() {\n    var marker = this.marker,\n        layer = this.layer,\n        history = this.history;\n\n    if (marker) {\n      if (marker._defaultShape) {\n        //线/面\n        var latlngs = marker._defaultShape();\n        var latlng = latlngs.pop();\n        if (latlng) {\n          history.push(latlng);\n          marker.setLatLngs(latlngs);\n        } else {\n          marker.removeFrom(layer);\n          return true;\n        }\n      } else {\n        marker.removeFrom(layer);\n        return true;\n      }\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.restore = function restore() {\n    var marker = this.marker,\n        layer = this.layer,\n        history = this.history;\n\n    if (marker) {\n      marker.addTo(layer);\n      //\n      if (marker._defaultShape && history.length > 0) {\n        //线/面\n        var latlngs = marker._defaultShape();\n        var latlng = history.pop();\n        latlngs.push(latlng);\n        marker.setLatLngs(latlngs);\n      } else {\n        return true;\n      }\n    }\n  };\n  /**\r\n   * 绘制结束\r\n   * @param e \r\n   */\n\n\n  Tool.prototype.onEnd = function onEnd(e) {\n    //\n    this.history = [];\n    //\n    this.dmap.do('draw-end', { target: this, marker: this.marker });\n  };\n  /**\r\n   * 清除图元，用于重置工具，重复绘制，或者取消绘制\r\n   */\n\n\n  Tool.prototype.clear = function clear() {\n    var marker = this.marker;\n\n    marker && marker.remove();\n  };\n  /**\r\n   * 重置\r\n   */\n\n\n  Tool.prototype.reset = function reset() {\n    if (this.restart) {\n      this.clear();\n      this.restart = false;\n      this.marker = null;\n    }\n  };\n  /**\r\n   * \r\n   */\n\n\n  Tool.prototype.cancel = function cancel() {};\n  /**\r\n   * 创建\r\n   * @param control \r\n   */\n\n\n  Tool.create = function create(owner, options) {\n    var tool = new this();\n    tool.owner = owner;\n    tool.dmap = owner.dmap;\n    tool.map = owner.map;\n    tool.layer = owner.layer;\n    tool.data = options.data; //包含layerid，用于标绘的测站类型id标识\n    tool.setOptions(options);\n    return tool;\n  };\n  /**\r\n   * 复制工具\r\n   */\n\n\n  Tool.prototype.clone = function clone() {\n    return this.constructor.create(this.owner, this.options);\n  };\n\n  return Tool;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Tool);\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_LonLats__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__VectorMarker__ = __webpack_require__(2);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @author gyb(mocheer)\r\n * @since 2016.11.4\r\n * 台风图元\r\n */\n\n\n\n\nvar _L = L,\n    toMarker = _L.marker,\n    toCanvas = _L.canvas,\n    toPolyline = _L.polyline,\n    toCircle = _L.circle,\n    circleMarker = _L.circleMarker,\n    toDivIcon = _L.divIcon,\n    toTooltip = _L.tooltip,\n    toFeatureGroup = _L.featureGroup,\n    toLatLng = _L.latLng;\nvar _T = T,\n    $assign = _T.assign;\n\n// svg[Attributes]{\n//   stroke - linejoin: round;\n//   stroke - linecap: round;\n//   pointer - events: none;\n//   stroke: rgb(0, 150, 255);\n//   stroke - opacity: 0.8;\n//   stroke - width: 3;\n//   fill: none;\n// }\n\n/**\r\n * 台风图元\r\n * @class Typhoon\r\n * todo: 用 FeatureGroup 重构\r\n */\n\nvar Typhoon = function () {\n  //\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} style \r\n   */\n\n  /**\r\n   * 配置信息\r\n   */\n  function Typhoon(data, options) {\n    _classCallCheck(this, Typhoon);\n\n    this.options = {\n      // 自动播放\n      autoPlay: true,\n      // 是否绘制台风路径\n      hasLsljLater: true,\n      // 确保台风在视野范围内\n      inView: true,\n      // 当inview=true且keepZoom=true,确保视野范围的时候不缩放地图\n      keepZoom: true,\n      // 点击是否根据路径点重新绘制台风\n      click2drawOnTime: true,\n      // 是否对路径点进行碰撞检测、抽稀\n      hitForPoint: true,\n      // 历史路径\n      ls: {\n        color: '#0096FF',\n        weight: 3,\n        opacity: .8,\n        interactive: false\n      },\n      // 历史路径-灰色\n      lsyb: {\n        color: '#666666',\n        weight: 2,\n        opacity: .8,\n        interactive: false\n      },\n      // 预报机构,预报路径点\n      org: {\n        weight: 1,\n        dashArray: '10,3',\n        interactive: false\n      },\n      orgs: [{\n        label: \"中国\",\n        th: \"CN\",\n        color: \"#FF4050\"\n      }, {\n        label: \"韩国\",\n        th: \"KR\",\n        color: \"#000000\"\n      }, {\n        label: \"美国\",\n        th: \"US\",\n        color: \"#4099EE\"\n      }, {\n        label: \"中国台湾\",\n        th: \"TW\",\n        color: \"#FFA040\"\n      }, {\n        label: \"日本\",\n        th: \"JP\",\n        color: \"#43FF4B\"\n      }, {\n        label: \"中国香港\",\n        th: \"HK\",\n        color: \"#FF40F5\"\n      }],\n      // 台风等级\n      grade: {\n        color: '#000',\n        radius: 4,\n        fillColor: '#FFF',\n        weight: 1,\n        fillOpacity: 1,\n        src: 'circle'\n      },\n      grades: [{\n        F1: 0,\n        F2: 0.2\n      }, {\n        F1: 0.3,\n        F2: 1.5\n      }, {\n        F1: 1.6,\n        F2: 3.3\n      }, {\n        F1: 3.4,\n        F2: 5.4\n      }, {\n        F1: 5.5,\n        F2: 7.9\n      }, {\n        F1: 8,\n        F2: 10.7\n      }, {\n        F1: 10.8,\n        F2: 13.8,\n        fillColor: '#00FF03',\n        GRADENAME: '热带低压'\n      }, {\n        F1: 13.95,\n        F2: 17.15,\n        fillColor: '#00FF03',\n        GRADENAME: '热带低压'\n      }, {\n        F1: 17.2,\n        F2: 20.7,\n        fillColor: '#0062FE',\n        GRADENAME: '热带风暴'\n      }, {\n        F1: 20.8,\n        F2: 24.4,\n        fillColor: '#0062FE',\n        GRADENAME: '热带风暴'\n      }, {\n        F1: 24.5,\n        F2: 28.4,\n        fillColor: '#FDFA00',\n        GRADENAME: '强热带风暴'\n      }, {\n        F1: 28.5,\n        F2: 32.6,\n        fillColor: '#FDFA00',\n        GRADENAME: '强热带风暴'\n      }, {\n        F1: 32.7,\n        F2: 36.9,\n        fillColor: '#FDAC03',\n        GRADENAME: '台风'\n      }, {\n        F1: 37,\n        F2: 41.4,\n        fillColor: '#FDAC03',\n        GRADENAME: '台风'\n      }, {\n        F1: 41.5,\n        F2: 46.1,\n        fillColor: '#F072F6',\n        GRADENAME: '强台风'\n      }, {\n        F1: 46.2,\n        F2: 50.9,\n        fillColor: '#F072F6',\n        GRADENAME: '强台风'\n      }, {\n        F1: 51,\n        F2: 56,\n        fillColor: '#FD0002',\n        GRADENAME: '超强台风'\n      }, {\n        F1: 56.1,\n        F2: 161.2,\n        fillColor: '#FD0002',\n        GRADENAME: '超强台风'\n      }],\n      // 台风风圈\n      c7: {\n        fillColor: '#79C0AE',\n        fillOpacity: 0.5,\n        color: '#49BA6E',\n        weight: 1\n      },\n      c10: {\n        fillColor: '#FFFF00',\n        fillOpacity: 0.2,\n        color: '#FFFF00',\n        weight: 1\n      },\n      c12: {\n        fillColor: '#FF0000',\n        fillOpacity: 0.3,\n        color: '#FF0000',\n        weight: 1\n      },\n      // 台风登陆地\n      land: {\n        src: T + 'assets/common/dmap/markers/flag.png'\n        // 台风风眼\n        // hurricane: {iconUrl: T + \"assets/common/dmap/markers/typhoonIco.gif\",iconSize: [32, 32]}\n        // \n      }\n      // \n    };\n    this.group = toFeatureGroup();\n\n    this.data = T.action(data);\n    options = $assign(this.options, options);\n    options.grades = options.grades.map(function (val) {\n      return $assign({}, options.grade, val);\n    });\n    //\n    this._points = [];\n  }\n  /**\r\n   * 动态改变预报机构集合。\r\n   * @param {*} options \r\n   */\n\n\n  Typhoon.prototype.setOptions = function setOptions(options) {\n    $assign(this.options, options);\n    this.update();\n  };\n  /**\r\n   * 更新重绘\r\n   */\n\n\n  Typhoon.prototype.update = function update(data) {\n    if (data && data !== this.data) {\n      //最新台风实时数据刷新\n      this.data = data;\n      this.ci = data.points.length - 1;\n    }\n    if (this.complete) {\n      this.draw(this.ci);\n    }\n  };\n  /**\r\n   * 创建路径点 \r\n   * @param coor\r\n   * @param options\r\n   * @param data\r\n   */\n\n\n  Typhoon.prototype.createPoint = function createPoint(coor, options, data) {\n    var marker = circleMarker(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor), options);\n    data._source = this.data;\n    marker.__data = data;\n    // 创建弹出层\n    options = this.options.popup;\n    options && marker.bindPopup(new __WEBPACK_IMPORTED_MODULE_2__polyfill_Popup__[\"a\" /* default */](options), options);\n    return marker;\n  };\n  /**\r\n   * 创建登录地\r\n   */\n\n\n  Typhoon.prototype.createLand = function createLand(coor, options) {\n    return new __WEBPACK_IMPORTED_MODULE_3__VectorMarker__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor), options);\n  };\n  /**\r\n   * 创建路径线\r\n   * @param coor\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createPolyline = function createPolyline(coor, options) {\n    return toPolyline(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(coor, 1), options);\n  };\n  /**\r\n   * 创建风圈\r\n   * @param center\r\n   * @param radius\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createCicle = function createCicle(center, radius, options) {\n    return radius && toCircle(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), radius * 1000, options);\n  };\n  /**\r\n   * 绘制四象风圈\r\n   * { ne, nw, sw, se}-> [ne, nw, sw, se]\r\n   * @param center\r\n   * @param radius\r\n   * @param style\r\n   */\n\n\n  Typhoon.prototype.createQuadrant = function createQuadrant(center, radius, style) {\n    if (!radius) return;\n    var ne = radius.ne,\n        nw = radius.nw,\n        sw = radius.sw,\n        se = radius.se;\n\n    if (!ne || !nw || !sw || !se) {\n      return;\n    }\n    this.renderer = this.renderer || toCanvas({\n      style: {\n        zIndex: 40\n      }\n    });\n    return new __WEBPACK_IMPORTED_MODULE_1__feature_Quadrant__[\"a\" /* default */]([center[1], center[0]], $assign({}, style, {\n      renderer: this.renderer,\n      radius: [ne * 1000, nw * 1000, sw * 1000, se * 1000]\n    }));\n  };\n  /**\r\n   * 绘制飓风动画\r\n   * @param center\r\n   * @param options\r\n   */\n\n\n  Typhoon.prototype.createHurricane = function createHurricane(center, options, grade) {\n    var colorIndex = parseInt((grade - 6) / 2) + 1;\n    return options ? toMarker(Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), {\n      icon: toDivIcon(options)\n    }) : new __WEBPACK_IMPORTED_MODULE_3__VectorMarker__[\"a\" /* default */](Object(__WEBPACK_IMPORTED_MODULE_0__utils_LonLats__[\"a\" /* default */])(center), {\n      src: T + ('assets/common/dmap/typhoon/hurricane' + (colorIndex > 0 ? colorIndex : 0) + '.png'),\n      rotate: true\n    });\n  };\n  /**\r\n   * draw\r\n   * {points}\r\n   * {radius7,radius10,radius12,radius7_quad,radius10_quad,radius12_quad}-> {r7,r10,r12,r7_q,r10_q,r12_q}\r\n   * {lng,lat} -> {lon,lat}\r\n   * {power,strong} 台风等级,台风等级对应名称\r\n   * {sets,points} 预报机构，预报路径\r\n   * @param time\r\n   * @property _points 缓存当前历史路径绘制的点图元\r\n   */\n\n\n  Typhoon.prototype.draw = function draw(time) {\n    var _this = this;\n\n    var that = this;\n    var options = that.options,\n        data = that.data,\n        group = that.group,\n        lsp = that.lsp,\n        createPolyline = that.createPolyline,\n        createCicle = that.createCicle,\n        _points = that._points;\n    var autoPlay = options.autoPlay,\n        ls = options.ls,\n        lsyb = options.lsyb,\n        grades = options.grades,\n        c7 = options.c7,\n        c10 = options.c10,\n        c12 = options.c12,\n        org = options.org,\n        orgs = options.orgs,\n        hurricane = options.hurricane,\n        hasLsljLater = options.hasLsljLater,\n        hitForPoint = options.hitForPoint;\n\n    var createPoint = that.createPoint.bind(that);\n    var createLand = that.createLand.bind(that);\n    var createQuadrant = that.createQuadrant.bind(that);\n    var handleEvent = that.handleEvent.bind(that);\n    var points = data.points,\n        land = data.land;\n\n    var ci = this.getTimeIndex(points, time); //当前台风时间点，默认为台风消亡时间点\n    var len = points.length;\n    var addLayer = function addLayer(value, index, array) {\n      if (!value || array === lsp && index > ci && autoPlay) return;\n      group.addLayer(value);\n    };\n    var getDistance = function getDistance(p1, p2) {\n      return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n    };\n    if (!that.tempLayer) {\n      that.tempLayer = toFeatureGroup();\n      group.addLayer(that.tempLayer);\n    }\n    var tempLayer = that.tempLayer;\n\n    var addTempLayer = function addTempLayer(value, index, array) {\n      if (!value || array === lsp && index > ci && autoPlay) return;\n      tempLayer.addLayer(value);\n    };\n    //\n    var drawing = function drawing(i, prev) {\n      // 清除，点不能清除，因可能在播放过程显示Popup\n      tempLayer.clearLayers();\n      if (!i || i < prev) {\n        group.clearLayers();\n        group.addLayer(tempLayer);\n      }\n      // 声明\n      var lslj = void 0; // 历史路径\n      var lslj_yb = void 0; // 历史路径-灰色\n      var yblj = []; // 预报路径\n      var tffq = []; // 台风风圈\n      var landPoints = []; // 台风登陆地\n      // \n      var item = points[i];\n      //\n      var lslj_prev = points.slice(0, i + 1);\n      var lslj_after = points.slice(i);\n      var coor = [item.lng, item.lat];\n      // 绘制\"当前\"历史路径\n      if (lslj_prev.length > 1) {\n        lslj = createPolyline(lslj_prev, ls);\n      }\n      // 绘制\"未来\"历史路径-灰色\n      if (!autoPlay && hasLsljLater && lslj_after.length > 1) {\n        lslj_yb = createPolyline(lslj_after, lsyb);\n        lslj_prev = lslj_prev.concat(lslj_after.slice(1));\n      }\n      //\n      lsp.length = lslj_prev.length;\n      // 遍历历史路径点\n      lslj_prev.forEach(function (item, i) {\n        // 抽稀\n        if (hitForPoint) {\n          // 获取当前路径点的像素坐标\n          var point = item._point = _this.map.latLngToLayerPoint(toLatLng(item));\n          // 获取上个路径点的像素坐标\n          var point_prev = function (i) {\n            while (i--) {\n              if (lsp[i]) return lslj_prev[i]._point;\n            }\n          }(i);\n          if (i > 0 && getDistance(point, point_prev) < 8) {\n            lsp[i] = null;\n            return;\n          }\n        }\n        // \n        var marker = lsp[i] = _points[i] = _points[i] || createPoint([item.lng, item.lat], grades[item.power || 0], item).on('click mouseover mouseout', handleEvent);\n        if (i === 0 && !marker.getTooltip()) {\n          var tooltip = toTooltip(T.merge({\n            zoom: 1,\n            direction: 'right',\n            offset: [5, 0]\n          }, _this.options.tooltip), marker).setContent(data.tfbh + data.name);\n          marker.bindTooltip(tooltip);\n        }\n      });\n      // 登录地\n      landPoints = options.land && (land || []).map(function (data) {\n        var tm = T.clock(data.land_time);\n        var ctm = T.clock(item.time);\n        if (tm.date < ctm.date) {\n          var marker = createLand(data, options.land);\n          return marker;\n        }\n      });\n\n      // 绘制风圈和预报路径\n      if (autoPlay || i === ci) {\n        //\n        var radius7_quad = item.radius7_quad,\n            radius10_quad = item.radius10_quad,\n            radius12_quad = item.radius12_quad,\n            forecast = item.forecast;\n        // 绘制飓风动画和风圈\n\n        var h = that.createHurricane(coor, hurricane, item.power);\n        var r7 = createQuadrant(coor, radius7_quad, c7) || createCicle(coor, item.radius7, c7);\n        var r10 = createQuadrant(coor, radius10_quad, c10) || createCicle(coor, item.radius10, c10);\n        var r12 = createQuadrant(coor, radius12_quad, c12) || createCicle(coor, item.radius12, c12);\n        tffq.push(r7, r10, r12, h);\n        // 绘制预报路径：回溯 \n        if (!autoPlay || i === len - 1) {\n          var _points2 = [];\n          orgs.forEach(function (data) {\n            var sets = data.label; //预报机构名称\n            var index = i;\n            var item = void 0;\n            var point = void 0;\n            var search = {\n              sets: sets\n            };\n            while (!item && index >= 0) {\n              point = points[index--];\n              forecast = point.forecast;\n              item = forecast && T.find(forecast, search);\n            }\n            if (item) {\n              var _item = item,\n                  _sets = _item.sets,\n                  _points3 = _item.points;\n\n              var style = $assign({}, org, T.find(orgs, {\n                label: _sets\n              }));\n              yblj.push(createPolyline([point].concat(_points3), style));\n              //\n              _points3.forEach(function (item) {\n                item.sets = _sets; // 用于显示信息窗\n                // 抽稀\n                var point = item._point = _this.map.latLngToLayerPoint(toLatLng(item));\n                if (hitForPoint) {\n                  for (var j = 0, _len = _points2.length; j < _len; j++) {\n                    if (getDistance(point, _points2[j]) < 8) {\n                      return;\n                    }\n                  }\n                }\n                _points2.push(point);\n                //\n                yblj.push(createPoint(item, grades[item.power || 0], item).on('click mouseover mouseout', handleEvent));\n                //\n              });\n            }\n          });\n        }\n      }\n      //\n      tffq.forEach(addTempLayer);\n      yblj.forEach(addTempLayer);\n      addTempLayer(lslj);\n      addTempLayer(lslj_yb);\n      lsp.forEach(addLayer);\n      landPoints.forEach(addTempLayer);\n      tempLayer.bringToBack();\n    };\n\n    if (autoPlay) {\n      var i = 0;\n      var playing = function playing() {\n        //init 防止播放过程中就被移除\n        if (_this.init) {\n          if (i < len && that.layer) {\n            drawing(i, i - 1);\n            setTimeout(playing, 30);\n            i++;\n          } else if (that.layer) {\n            T.do('typhoon-playend', {\n              tf: data,\n              attr: points[i - 1]\n            });\n            options.autoPlay = false;\n            that.complete = true;\n          }\n          // \n          if (i === len && options.inView && !_this.layer.suspended) {\n            _this.map && options.keepZoom ? _this.map.setView(points[i - 1]) : _this.map.fitBounds(toPolyline([[30, 105], [10, 125]].concat(points)).getBounds());\n          }\n        }\n      };\n      playing();\n    } else {\n      drawing(ci, that.ci);\n      T.do('typhoon-playend', {\n        tf: data,\n        attr: points[ci]\n      });\n      that.complete = true;\n    }\n    that.ci = ci;\n  };\n\n  /**\r\n   * 获取台风播放时间点\r\n   * @param data \r\n   * @param time \r\n   */\n\n\n  Typhoon.prototype.getTimeIndex = function getTimeIndex(data, time) {\n    if (time !== void 0) {\n      return +time;\n    }\n    return data.length - 1;\n  };\n  /**\r\n   * 设置台风播放时间点\r\n   * @param time\r\n   */\n\n\n  Typhoon.prototype.setTimeIndex = function setTimeIndex(time) {\n    if (this.ci !== time) {\n      if (this.complete) {\n        // 用于二三维一体化，同步台风历史路径\n        this.data.do('setTimeIndex', time);\n        this.draw(time);\n      }\n    }\n  };\n  /**\r\n   * \r\n   * @param layer \r\n   */\n\n\n  Typhoon.prototype.addTo = function addTo(layer) {\n    var _this2 = this;\n\n    var that = this;\n    if (layer.map) {\n      that.map = layer.map.on('zoomend', function () {\n        that.init && that.update();\n      });\n      that.layer = layer;\n      layer._add(this.group);\n      if (!that.init) {\n        that.init = true;\n        that.lsp = [];\n        that.draw();\n      }\n    } else {\n      // 未加载到地图上 \n      layer.layer.on('add', function () {\n        _this2.addTo(layer);\n      });\n    }\n  };\n  /**\r\n   * 移除\r\n   */\n\n\n  Typhoon.prototype.remove = function remove() {\n    this.init = false;\n    // 不能直接用 remove，当上层layer被挂起移除的时候无法删除。\n    // 所以这里用 removeFrom\n    this.layer && this.group.removeFrom(this.layer.layer);\n  };\n  /**\r\n   * 台风路径点点击/移入事件\r\n   * @param e\r\n   */\n\n\n  Typhoon.prototype.handleEvent = function handleEvent(e) {\n    var data = this.data,\n        lsp = this.lsp,\n        complete = this.complete,\n        _overTarget = this._overTarget,\n        options = this.options;\n    var target = e.target,\n        type = e.type;\n\n    var i = lsp.indexOf(target);\n    if (!complete) {\n      return;\n    }\n    var event = void 0;\n    switch (type) {\n      case 'click':\n        event = {\n          data: data,\n          dataProvider: data.points,\n          selItem: data.points[i],\n          event: e\n        };\n        if (lsp[i]) {\n          options.click2drawOnTime && this.setTimeIndex(i);\n          target.openPopup();\n          target.setRadius(7);\n          T.do('typhoon-lslj-click', event);\n          //台风播放控件\n        } else {\n          target.openPopup();\n          T.do('typhoon-yblj-click', event);\n        }\n        break;\n      case 'mouseover':\n        event = {\n          tf: data,\n          attr: target.__data || data.points[i],\n          event: e\n        };\n        if (lsp[i]) {\n          if (_overTarget != target) {\n            target.setRadius(7);\n            this._overTarget = target;\n          }\n          T.do('typhoon-lslj-over', event);\n        } else {\n          T.do('typhoon-yblj-over', event);\n        }\n        break;\n      case 'mouseout':\n        if (_overTarget) {\n          _overTarget.setRadius(4);\n          this._overTarget = null;\n        }\n        T.do('typhoon-lslj-out', event);\n        break;\n    }\n  };\n\n  return Typhoon;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Typhoon);\n\n/***/ }),\n\n/***/ 31:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.10.22\r\n */\nvar _L = L,\n    Circle = _L.Circle,\n    CircleMarker = _L.CircleMarker;\n/**\r\n * 台风四象限风圈\r\n */\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Circle.extend({\n  /**\r\n   * 初始化\r\n   */\n  initialize: function initialize(latlng, options) {\n    CircleMarker.prototype.initialize.call(this, latlng, options);\n    this._mRadius = this.options.radius;\n  },\n\n  /**\r\n   * \r\n   */\n  _project: function _project() {\n    var _latlng = this._latlng,\n        map = this._map,\n        options = this.options,\n        _mRadius = this._mRadius;\n    // let crs = L.CRS.EPSG3857;//map.options.crs;\n\n    var ne = _mRadius[0],\n        nw = _mRadius[1],\n        se = _mRadius[2],\n        sw = _mRadius[3]; //东北，西北，东南，西南 四象限的半径，单位米\n\n    var crs = map.options.crs;\n    var Earth = L.CRS.Earth;\n    var lat = _latlng.lat,\n        lng = _latlng.lng;\n\n    if (crs.distance === Earth.distance) {\n      var getR = function getR(r) {\n        var d = Math.PI / 180;\n        var latR = r / Earth.R / d;\n        var top = map.project([lat + latR, lng]);\n        var bottom = map.project([lat - latR, lng]);\n        var p = top.add(bottom).divideBy(2);\n        // let lat2 = map.unproject(p).lat;\n        // let lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\n        //   (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\n\n        // if (isNaN(lngR) || lngR === 0) {\n        //   lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\n        // }\n        point = point || p.subtract(map.getPixelOrigin());\n        // this._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n        // this._radiusY = p.y - top.y;\n        // return isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\n        return p.y - top.y;\n      };\n\n      var point = void 0;\n\n      ne = getR(ne);\n      nw = getR(nw);\n      se = getR(se);\n      sw = getR(sw);\n      this._point = point;\n      //\n      this._radius = [sw, //西南\n      se, //东南\n      nw, //西北\n      ne //东北\n      ];\n    } else {\n      var xy = crs.project(_latlng);\n      ne = [crs.unproject(xy.add([ne, 0])), crs.unproject(xy.add([0, -ne]))];\n      nw = [crs.unproject(xy.add([-nw, 0])), crs.unproject(xy.add([0, -nw]))];\n      se = [crs.unproject(xy.add([se, 0])), crs.unproject(xy.add([0, se]))];\n      sw = [crs.unproject(xy.add([-sw, 0])), crs.unproject(xy.add([0, sw]))];\n      //中心点\n      var _point2 = this._point = map.latLngToLayerPoint(_latlng);\n      var x = _point2.x;\n      //各象限半径 - 顺时针\n\n      this._radius = [x - map.latLngToLayerPoint(sw[0]).x, //西南\n      map.latLngToLayerPoint(se[0]).x - x, //东南\n      x - map.latLngToLayerPoint(nw[0]).x, //西北\n      map.latLngToLayerPoint(ne[0]).x - x //东北\n      ];\n    }\n    this._updateBounds();\n  },\n\n  /**\r\n   * 绘制风圈\r\n   */\n  _updatePath: function _updatePath() {\n    this._renderer._updateCircular(this);\n  },\n\n  /**\r\n   * 修改边界\r\n   */\n  _updateBounds: function _updateBounds() {\n    var _point = this._point,\n        _radius = this._radius;\n\n    var w = this._clickTolerance();\n    var ne = _radius[0],\n        nw = _radius[1],\n        se = _radius[2],\n        sw = _radius[3];\n\n    var maxR = Math.max(ne, nw, se, sw);\n    var p = [maxR + w, maxR + w];\n    this._pxBounds = new L.Bounds(_point.subtract(p), _point.add(p));\n  }\n}));\n\n/***/ }),\n\n/***/ 32:\n/***/ (function(module, exports) {\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2018-3-23\r\n * @see https://github.com/yakitoritabetai/Leaflet.LabelTextCollision\r\n * @see https://github.com/XC-Zhang/leaflet-text\r\n */\nvar _L = L,\n    Layer = _L.Layer;\n/** \r\n * \r\n */\n\nLayer.include({\n  /**\r\n   * \r\n   */\n  getText: function getText() {\n    return this._text;\n  },\n\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\n  bindText: function bindText(content, options) {\n    //\n    if (this._text instanceof L.Text) {\n      this._text.setContent(content);\n    } else {\n      var _latlng = this._latlng;\n      // 绑定文本和图标，比如说危险区内部的警告图标，或者河流上的文本标注\n\n      this._text = content ? L.text(_latlng, content, options) : new L.VectorMarker(_latlng, options);\n    }\n    //\n    this._initTextInteractions();\n    //\n    if (this._map && this._map.hasLayer(this)) {\n      this.openText();\n    }\n    return this;\n  },\n\n  /**\r\n   * \r\n   * @param \r\n   */\n  _initTextInteractions: function _initTextInteractions() {\n    this.on({\n      remove: this._closeText,\n      move: this._moveText\n    });\n  },\n  /**\r\n   * \r\n   * @param {*} layer \r\n   * @param {*} latlng \r\n   */\n  openText: function openText(layer, latlng) {\n    if (!(layer instanceof Layer)) {\n      latlng = layer;\n      layer = this;\n    }\n    if (!latlng) {\n      latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();\n    }\n    var _map = this._map,\n        _text = this._text;\n\n    if (_map) {\n      _text._source = layer;\n      _text.setLatLng(latlng);\n      if (!_map.hasLayer(_text)) {\n        _map.addLayer(_text);\n      }\n    }\n  },\n\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\n  unbindText: function unbindText(map) {\n    var _text = this._text;\n\n    if (_text) {\n      map.removeLayer(_text);\n      this._text = null;\n    }\n  },\n\n  /**\r\n   * \r\n   */\n  _closeText: function _closeText() {\n    var _map = this._map,\n        _text = this._text;\n\n    if (_map && _text && _map.hasLayer(_text)) {\n      _map.removeLayer(_text);\n    }\n  },\n\n  /**\r\n   * \r\n   */\n  _moveText: function _moveText(e) {\n    this._text.setLatLng(e.latlng);\n  }\n});\n/**\r\n * \r\n */\nL.Canvas.include({\n  /**\r\n   * 获取文本宽度\r\n   */\n  _getTextWidth: function _getTextWidth(layer) {\n    this._ctx.font = layer.options.font;\n    return this._ctx.measureText(layer._text).width;\n  },\n\n  /**\r\n   * \r\n   */\n  _updateText: function _updateText(layer) {\n    if (!this._drawing || layer._empty()) {\n      return;\n    }\n\n    var p = layer._point;\n    var ctx = this._ctx;\n    var options = layer.options;\n\n    if (!options.fill) {\n      return;\n    }\n\n    if (options.offset) {\n      p = p.add(options.offset);\n    }\n\n    this._drawnLayers[layer._leaflet_id] = layer;\n    ctx.font = options.font;\n    ctx.translate(p.x, p.y);\n    ctx.rotate(options.rotation);\n    ctx.fillStyle = options.color;\n    ctx.textAlign = options.textAlign;\n    ctx.fillText(layer._text, 0, 0);\n    ctx.rotate(-options.rotation);\n    ctx.translate(-p.x, -p.y);\n  }\n});\n\n/**\r\n * \r\n */\nL.Text = L.Path.extend({\n  options: {\n    color: 'blue',\n    fill: true,\n    fillOpacity: 1.0,\n    rotation: 0.0,\n    stroke: false,\n    textAlign: 'center',\n    font: \"14px arial\"\n  },\n  /**\r\n   * \r\n   */\n  initialize: function initialize(latlng, text, options) {\n    L.setOptions(this, options);\n    this._latlng = L.latLng(latlng);\n    this._text = String(text || options.text);\n  },\n  /**\r\n   * \r\n   * @param {*} text \r\n   */\n  setContent: function setContent(text) {\n    this._text = String(text);\n    this._update();\n  },\n  setLatLng: function setLatLng(latlng) {\n    this._latlng = L.latLng(latlng);\n    this._update();\n  },\n  getLatLng: function getLatLng() {\n    return this._latlng;\n  },\n  _project: function _project() {\n    this._point = this._map.latLngToLayerPoint(this._latlng);\n    this._updateBounds();\n  },\n  _updateBounds: function _updateBounds() {\n    var w = this._renderer._getTextWidth(this);\n    var p = [w / 2, w / 2];\n    this._pxBounds = L.bounds(this._point.subtract(p), this._point.add(p));\n  },\n  _update: function _update() {\n    if (this._map) {\n      this._updatePath();\n    }\n  },\n  _updatePath: function _updatePath() {\n    this._renderer._updateText(this);\n  },\n  _empty: function _empty() {\n    return !this._renderer._bounds.intersects(this._pxBounds);\n  },\n\n\n  _containsPoint: function _containsPoint(p) {\n    return false;\n  },\n  /**\r\n   * \r\n   */\n  toGeoJSON: function toGeoJSON() {\n    var _getLatLng = this.getLatLng(),\n        lat = _getLatLng.lat,\n        lng = _getLatLng.lng;\n\n    this.options.text = this._text;\n\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: { coordinates: [lng, lat], type: 'Text' }\n    };\n  }\n});\n\nL.text = function (latlng, text, options) {\n  return new L.Text(latlng, text, options);\n};\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, exports) {\n\n/**\r\n * @see https://github.com/mourner/simpleheat\r\n * @see https://github.com/Leaflet/Leaflet.heat\r\n */\nL.Heat = L.Layer.extend({\n\n  // options: {\n  //     minOpacity: 0.05,\n  //     maxZoom: 18,\n  //     radius: 25,\n  //     blur: 15,\n  //     max: 1.0\n  // },\n  /**\r\n   * \r\n   * @param {*} latlngs \r\n   * @param {*} options \r\n   */\n  initialize: function initialize(latlngs, options) {\n    this._latlngs = latlngs;\n    L.setOptions(this, options);\n  },\n  setLatLngs: function setLatLngs(latlngs) {\n    this._latlngs = latlngs;\n    return this.redraw();\n  },\n  addLatLng: function addLatLng(latlng) {\n    this._latlngs.push(latlng);\n    return this.redraw();\n  },\n  setOptions: function setOptions(options) {\n    L.setOptions(this, options);\n    if (this._heat) {\n      this._updateOptions();\n    }\n    return this.redraw();\n  },\n  redraw: function redraw() {\n    if (this._heat && !this._frame && this._map && !this._map._animating) {\n      this._frame = L.Util.requestAnimFrame(this._redraw, this);\n    }\n    return this;\n  },\n  onAdd: function onAdd(map) {\n    this._map = map;\n\n    if (!this._canvas) {\n      this._initCanvas();\n    }\n\n    if (this.options.pane) {\n      this.getPane().appendChild(this._canvas);\n    } else {\n      map._panes.overlayPane.appendChild(this._canvas);\n    }\n\n    map.on('moveend', this._reset, this);\n\n    if (map.options.zoomAnimation && L.Browser.any3d) {\n      map.on('zoomanim', this._animateZoom, this);\n    }\n\n    this._reset();\n  },\n  onRemove: function onRemove(map) {\n    if (this.options.pane) {\n      this.getPane().removeChild(this._canvas);\n    } else {\n      map.getPanes().overlayPane.removeChild(this._canvas);\n    }\n\n    map.off('moveend', this._reset, this);\n\n    if (map.options.zoomAnimation) {\n      map.off('zoomanim', this._animateZoom, this);\n    }\n  },\n  addTo: function addTo(map) {\n    map.addLayer(this);\n    return this;\n  },\n  _initCanvas: function _initCanvas() {\n    var canvas = this._canvas = T.canvas('leaflet-heatmap-layer leaflet-layer'); // L.DomUtil.create('canvas', 'leaflet-heatmap-layer leaflet-layer');\n\n    var originProp = L.DomUtil.testProp(['transformOrigin', 'WebkitTransformOrigin', 'msTransformOrigin']);\n    canvas.style[originProp] = '50% 50%';\n\n    var size = this._map.getSize();\n    canvas.width = size.x;\n    canvas.height = size.y;\n\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\n\n    this._heat = simpleheat(canvas);\n    this._updateOptions();\n  },\n  _updateOptions: function _updateOptions() {\n    this._heat.radius(this.options.radius || this._heat.defaultRadius, this.options.blur);\n\n    if (this.options.gradient) {\n      this._heat.gradient(this.options.gradient);\n    }\n    if (this.options.max) {\n      this._heat.max(this.options.max);\n    }\n  },\n  _reset: function _reset() {\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\n    L.DomUtil.setPosition(this._canvas, topLeft);\n\n    var size = this._map.getSize();\n\n    if (this._heat._width !== size.x) {\n      this._canvas.width = this._heat._width = size.x;\n    }\n    if (this._heat._height !== size.y) {\n      this._canvas.height = this._heat._height = size.y;\n    }\n\n    this._redraw();\n  },\n  _redraw: function _redraw() {\n    if (!this._map) {\n      return;\n    }\n    var data = [],\n        r = this._heat._r,\n        size = this._map.getSize(),\n        bounds = new L.Bounds(L.point([-r, -r]), size.add([r, r])),\n        max = this.options.max === undefined ? 1 : this.options.max,\n        maxZoom = this.options.maxZoom === undefined ? this._map.getMaxZoom() : this.options.maxZoom,\n        v = 1 / Math.pow(2, Math.max(0, Math.min(maxZoom - this._map.getZoom(), 12))),\n        cellSize = r / 2,\n        grid = [],\n        panePos = this._map._getMapPanePos(),\n        offsetX = panePos.x % cellSize,\n        offsetY = panePos.y % cellSize,\n        i,\n        len,\n        p,\n        cell,\n        x,\n        y,\n        j,\n        len2,\n        k;\n\n    // console.time('process');\n    for (i = 0, len = this._latlngs.length; i < len; i++) {\n      p = this._map.latLngToContainerPoint(this._latlngs[i]);\n      if (bounds.contains(p)) {\n        x = Math.floor((p.x - offsetX) / cellSize) + 2;\n        y = Math.floor((p.y - offsetY) / cellSize) + 2;\n\n        var alt = this._latlngs[i].alt || 1;\n        k = alt * v;\n\n        grid[y] = grid[y] || [];\n        cell = grid[y][x];\n\n        if (!cell) {\n          grid[y][x] = [p.x, p.y, k];\n        } else {\n          cell[0] = (cell[0] * cell[2] + p.x * k) / (cell[2] + k); // x\n          cell[1] = (cell[1] * cell[2] + p.y * k) / (cell[2] + k); // y\n          cell[2] += k; // cumulated intensity value\n        }\n      }\n    }\n\n    for (i = 0, len = grid.length; i < len; i++) {\n      if (grid[i]) {\n        for (j = 0, len2 = grid[i].length; j < len2; j++) {\n          cell = grid[i][j];\n          if (cell) {\n            data.push([Math.round(cell[0]), Math.round(cell[1]), Math.min(cell[2], max)]);\n          }\n        }\n      }\n    }\n    // console.timeEnd('process');\n\n    // console.time('draw ' + data.length);\n    this._heat.data(data).draw(this.options.minOpacity);\n    // console.timeEnd('draw ' + data.length);\n\n    this._frame = null;\n  },\n  _animateZoom: function _animateZoom(e) {\n    var scale = this._map.getZoomScale(e.zoom),\n        offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\n\n    if (L.DomUtil.setTransform) {\n      L.DomUtil.setTransform(this._canvas, offset, scale);\n    } else {\n      this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\n    }\n  }\n});\n\nL.heat = function (latlngs, options) {\n  return new L.Heat(latlngs, options);\n};\n\nfunction simpleheat(canvas) {\n  if (!(this instanceof simpleheat)) return new simpleheat(canvas);\n\n  this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\n\n  this._ctx = canvas.getContext('2d');\n  this._width = canvas.width;\n  this._height = canvas.height;\n\n  this._max = 1;\n  this._data = [];\n}\n\nsimpleheat.prototype = {\n\n  defaultRadius: 25,\n\n  defaultGradient: {\n    0.4: 'blue',\n    0.6: 'cyan',\n    0.7: 'lime',\n    0.8: 'yellow',\n    1.0: 'red'\n  },\n\n  data: function data(_data) {\n    this._data = _data;\n    return this;\n  },\n  max: function max(_max) {\n    this._max = _max;\n    return this;\n  },\n  add: function add(point) {\n    this._data.push(point);\n    return this;\n  },\n  clear: function clear() {\n    this._data = [];\n    return this;\n  },\n  radius: function radius(r, blur) {\n    blur = blur === undefined ? 15 : blur;\n\n    // create a grayscale blurred circle image that we'll use for drawing points\n    var circle = this._circle = this._createCanvas(),\n        ctx = circle.getContext('2d'),\n        r2 = this._r = r + blur;\n\n    circle.width = circle.height = r2 * 2;\n\n    ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n    ctx.shadowBlur = blur;\n    ctx.shadowColor = 'black';\n\n    ctx.beginPath();\n    ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n\n    return this;\n  },\n  resize: function resize() {\n    this._width = this._canvas.width;\n    this._height = this._canvas.height;\n  },\n  gradient: function gradient(grad) {\n    // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\n    var canvas = this._createCanvas(),\n        ctx = canvas.getContext('2d'),\n        gradient = ctx.createLinearGradient(0, 0, 0, 256);\n\n    canvas.width = 1;\n    canvas.height = 256;\n\n    for (var i in grad) {\n      gradient.addColorStop(+i, grad[i]);\n    }\n\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, 0, 1, 256);\n\n    this._grad = ctx.getImageData(0, 0, 1, 256).data;\n\n    return this;\n  },\n  draw: function draw(minOpacity) {\n    if (!this._circle) this.radius(this.defaultRadius);\n    if (!this._grad) this.gradient(this.defaultGradient);\n\n    var ctx = this._ctx;\n\n    ctx.clearRect(0, 0, this._width, this._height);\n\n    // draw a grayscale heatmap by putting a blurred circle at each data point\n    for (var i = 0, len = this._data.length, p; i < len; i++) {\n      p = this._data[i];\n      ctx.globalAlpha = Math.min(Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity), 1);\n      ctx.drawImage(this._circle, p[0] - this._r, p[1] - this._r);\n    }\n\n    // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\n    var colored = ctx.getImageData(0, 0, this._width, this._height);\n    this._colorize(colored.data, this._grad);\n    ctx.putImageData(colored, 0, 0);\n\n    return this;\n  },\n  _colorize: function _colorize(pixels, gradient) {\n    for (var i = 0, len = pixels.length, j; i < len; i += 4) {\n      j = pixels[i + 3] * 4; // get gradient color from opacity value\n\n      if (j) {\n        pixels[i] = gradient[j];\n        pixels[i + 1] = gradient[j + 1];\n        pixels[i + 2] = gradient[j + 2];\n      }\n    }\n  },\n  _createCanvas: function _createCanvas() {\n    if (typeof document !== 'undefined') {\n      return document.createElement('canvas');\n    } else {\n      // create a new canvas instance in node.js\n      // the canvas class needs to have a default constructor without any parameter\n      return new this._canvas.constructor();\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\r\n * @see https://github.com/ggolikov/Leaflet.River\r\n */\nvar _L = L,\n    FeatureGroup = _L.FeatureGroup,\n    setOptions = _L.setOptions,\n    toPolyline = _L.polyline;\n\nvar FeatureGroupPrototype = FeatureGroup.prototype;\n/**\r\n * \r\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (FeatureGroup.extend({\n  options: {\n    color: 'blue',\n    minWidth: 1,\n    maxWidth: 10,\n    ratio: null\n  },\n\n  initialize: function initialize(latLngs, options) {\n    FeatureGroupPrototype.initialize.call(this, [], options);\n    this._latLngs = latLngs;\n\n    setOptions(this, options);\n    this._buildLines(latLngs);\n  },\n  onAdd: function onAdd(map) {\n    FeatureGroupPrototype.onAdd.call(this, map);\n    this._getLength(map);\n    this.setStyle();\n  },\n  _buildLines: function _buildLines(latLngs) {\n    for (var i = 0; i < latLngs.length - 1; i++) {\n      var line = toPolyline([latLngs[i], latLngs[i + 1]]);\n      this.addLayer(line);\n    }\n  },\n  _getLength: function _getLength(map) {\n    var latLngs = this._latLngs,\n        totalLength = 0;\n\n    for (var i = 0; i < latLngs.length - 1; i++) {\n      totalLength += map.latLngToLayerPoint(latLngs[i]).distanceTo(map.latLngToLayerPoint(latLngs[i + 1]));\n    }\n\n    return this._length = totalLength;\n  },\n\n\n  /**\r\n   * \r\n   */\n  setStyle: function setStyle(style) {\n    var opt = this.options = L.extend(this.options, style),\n        totalLength = this._length,\n        map = this._map,\n        layers = this._layers,\n        length = 0,\n        layer,\n        latLngs;\n\n    for (var key in layers) {\n      layer = layers[key];\n      latLngs = layer.getLatLngs();\n      length += map.latLngToLayerPoint(latLngs[0]).distanceTo(map.latLngToLayerPoint(latLngs[1]));\n      layer.setStyle(L.extend({}, opt, {\n        weight: opt.ratio ? length / opt.ratio : opt.minWidth + (opt.maxWidth - opt.minWidth) * (length / totalLength)\n      }));\n    }\n  },\n  setMinWidth: function setMinWidth(width) {\n    this.setStyle({\n      minWidth: width\n    });\n  },\n  setMaxWidth: function setMaxWidth(width) {\n    this.setStyle({\n      maxWidth: width\n    });\n  },\n  getMinWidth: function getMinWidth() {\n    return this.options.minWidth;\n  },\n  getMaxWidth: function getMaxWidth() {\n    return this.options.maxWidth;\n  },\n  useLength: function useLength(ratio) {\n    setOptions(this, { ratio: ratio });\n    return this;\n  },\n  convertToPolyline: function convertToPolyline(options) {\n    return toPolyline(this._latLngs, options);\n  }\n}));\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export bezier */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return coattail; });\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.11\r\n */\n// import {distance} from './Util'\n/**\r\n * n次贝塞尔曲线\r\n * @param arr [[x,y],[x,y]]\r\n */\nvar bezier = function bezier(arr, step) {\n  var points = [arr[0]]; //第一个点\n  var l = arr.length;\n  for (var i = step; i < 1; i += step) {\n    points.push(PBezier(arr, l, i));\n  }\n  points.push(arr[l - 1]);\n  return points;\n};\n/** \r\n * 燕尾、军标箭头\r\n * @param arr\r\n * @param step\r\n * @param options\r\n */\nvar coattail = function coattail(arr, step, options) {\n  var _T$assign = T.assign({\n    r: 36, //箭头两边长度\n    ra: 0.2, //张开弧度系数\n    ma: 16 //最大宽度\n  }, options),\n      r = _T$assign.r,\n      ra = _T$assign.ra,\n      ma = _T$assign.ma;\n\n  var PI = Math.PI;\n  //\n\n  var points = [arr[0]]; // 第一个点\n  var l = arr.length; //\n  var p0 = arr[0]; // 上个点\n  var num = Math.ceil(1 / step + 1) * 2; // 贝塞尔曲线上的点数\n  var ci = 1,\n      p = void 0;\n  if (l < 2) return arr;\n  // 贝塞尔\n  for (var i = step; i < 1; i += step, ci++) {\n    p = PBezier(arr, l, i); //当前点\n    var _r = ma - i * 9; //半径\n    var _radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]) - Math.PI / 2;\n    var offsetX = _r * Math.cos(_radians);\n    var offsetY = _r * Math.sin(_radians);\n    points[ci] = [p[0] + offsetX, p[1] + offsetY];\n    points[num - ci] = [p[0] - offsetX, p[1] - offsetY];\n    p0 = p;\n  }\n  // 箭头\n  p = arr[l - 1];\n  var radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]);\n  p = [p0[0] + (ma + 2) * Math.cos(radians), p0[1] + (ma + 2) * Math.sin(radians)];\n  points[ci++] = [p[0] + r * Math.cos(PI * (1 + ra) + radians), p[1] + r * Math.sin(PI * (1 + ra) + radians)];\n  points[ci++] = p;\n  points[ci] = [p[0] + r * Math.cos(PI * (1 - ra) + radians), p[1] + r * Math.sin(PI * (1 - ra) + radians)];\n  // 最后一个点 \n  points.push(arr[0]);\n  return points;\n};\n//\nvar PBezier = function PBezier(arr, l, t) {\n  var px = 0,\n      py = 0,\n      n = l - 1; //n次\n  for (var i = 0, b; i < l; i++) {\n    b = BEZ(n, i, t);\n    px += arr[i][0] * b;\n    py += arr[i][1] * b;\n  }\n  return [px, py];\n};\n//基函数\nvar BEZ = function BEZ(n, k, t) {\n  return C(n, k) * Math.pow(t, k) * Math.pow(1 - t, n - k);\n};\n//组合排序\nvar C = function C(n, k) {\n  return Factorial(n) / (Factorial(k) * Factorial(n - k));\n};\n//阶乘\nvar Factorial = function Factorial(i) {\n  var n = 1;\n  for (var j = 1; j <= i; j++) {\n    n *= j;\n  }\n  return n;\n};\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports) {\n\n(function () {\n  'use strict';\n\n  /** @preserve OverlappingMarkerSpiderfier\n  https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n  Copyright (c) 2011 - 2012 George MacKerron\n  Released under the MIT licence: http://opensource.org/licenses/mit-license\n  Note: The Leaflet maps API must be included *before* this code\n   */\n  var hasProp = {}.hasOwnProperty,\n    slice = [].slice;\n\n  (function () {\n\n    if (this['L'] == null) {\n      return;\n    }\n    return this['OverlappingMarkerSpiderfier'] = L.OverlappingMarkerSpiderfier = (function () {\n      var p, twoPi;\n\n      p = _Class.prototype;\n\n      p['VERSION'] = '0.2.6';\n\n      twoPi = Math.PI * 2;\n\n      p['keepSpiderfied'] = false;\n\n      p['nearbyDistance'] = 20;\n\n      p['circleSpiralSwitchover'] = 9;\n\n      p['circleFootSeparation'] = 25;\n\n      p['circleStartAngle'] = twoPi / 12;\n\n      p['spiralFootSeparation'] = 28;\n\n      p['spiralLengthStart'] = 11;\n\n      p['spiralLengthFactor'] = 5;\n\n      p['legWeight'] = 1.5;\n\n      p['legColors'] = {\n        'usual': '#222',\n        'highlighted': '#f00'\n      };\n\n      function _Class(map, opts) {\n        var e, j, k, len, ref, v;\n        this.map = map;\n        if (opts == null) {\n          opts = {};\n        }\n        for (k in opts) {\n          if (!hasProp.call(opts, k)) continue;\n          v = opts[k];\n          this[k] = v;\n        }\n        this.initMarkerArrays();\n        this.listeners = {};\n        ref = ['click', 'zoomend'];\n        for (j = 0, len = ref.length; j < len; j++) {\n          e = ref[j];\n          this.map.addEventListener(e, (function (_this) {\n            return function () {\n              return _this['unspiderfy']();\n            };\n          })(this));\n        }\n      }\n\n      p.initMarkerArrays = function () {\n        this.markers = [];\n        return this.markerListeners = [];\n      };\n\n      p['addMarker'] = function (marker) {\n        var markerListener;\n        if (marker['_oms'] != null) {\n          return this;\n        }\n        marker['_oms'] = true;\n        markerListener = (function (_this) {\n          return function () {\n            return _this.spiderListener(marker);\n          };\n        })(this);\n        marker.addEventListener('click', markerListener);\n        this.markerListeners.push(markerListener);\n        this.markers.push(marker);\n        return this;\n      };\n\n      p['getMarkers'] = function () {\n        return this.markers.slice(0);\n      };\n\n      p['removeMarker'] = function (marker) {\n        var i, markerListener;\n        if (marker['_omsData'] != null) {\n          this['unspiderfy']();\n        }\n        i = this.arrIndexOf(this.markers, marker);\n        if (i < 0) {\n          return this;\n        }\n        markerListener = this.markerListeners.splice(i, 1)[0];\n        marker.removeEventListener('click', markerListener);\n        delete marker['_oms'];\n        this.markers.splice(i, 1);\n        return this;\n      };\n\n      p['clearMarkers'] = function () {\n        var i, j, len, marker, markerListener, ref;\n        this['unspiderfy']();\n        ref = this.markers;\n        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n          marker = ref[i];\n          markerListener = this.markerListeners[i];\n          marker.removeEventListener('click', markerListener);\n          delete marker['_oms'];\n        }\n        this.initMarkerArrays();\n        return this;\n      };\n\n      p['addListener'] = function (event, func) {\n        var base;\n        ((base = this.listeners)[event] != null ? base[event] : base[event] = []).push(func);\n        return this;\n      };\n\n      p['removeListener'] = function (event, func) {\n        var i;\n        i = this.arrIndexOf(this.listeners[event], func);\n        if (!(i < 0)) {\n          this.listeners[event].splice(i, 1);\n        }\n        return this;\n      };\n\n      p['clearListeners'] = function (event) {\n        this.listeners[event] = [];\n        return this;\n      };\n\n      p.trigger = function () {\n        var args, event, func, j, len, ref, ref1, results;\n        event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n        ref1 = (ref = this.listeners[event]) != null ? ref : [];\n        results = [];\n        for (j = 0, len = ref1.length; j < len; j++) {\n          func = ref1[j];\n          results.push(func.apply(null, args));\n        }\n        return results;\n      };\n\n      p.generatePtsCircle = function (count, centerPt) {\n        var angle, angleStep, circumference, i, j, legLength, ref, results;\n        circumference = this['circleFootSeparation'] * (2 + count);\n        legLength = circumference / twoPi;\n        angleStep = twoPi / count;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle = this['circleStartAngle'] + i * angleStep;\n          results.push(new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle)));\n        }\n        return results;\n      };\n\n      p.generatePtsSpiral = function (count, centerPt) {\n        var angle, i, j, legLength, pt, ref, results;\n        legLength = this['spiralLengthStart'];\n        angle = 0;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle += this['spiralFootSeparation'] / legLength + i * 0.0005;\n          pt = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle));\n          legLength += twoPi * this['spiralLengthFactor'] / angle;\n          results.push(pt);\n        }\n        return results;\n      };\n\n      p.spiderListener = function (marker) {\n        var j, len, m, mPt, markerPt, markerSpiderfied, nearbyMarkerData, nonNearbyMarkers, pxSq, ref;\n        markerSpiderfied = marker['_omsData'] != null;\n        if (!(markerSpiderfied && this['keepSpiderfied'])) {\n          this['unspiderfy']();\n        }\n        if (markerSpiderfied) {\n          return this.trigger('click', marker);\n        } else {\n          nearbyMarkerData = [];\n          nonNearbyMarkers = [];\n          pxSq = this['nearbyDistance'] * this['nearbyDistance'];\n          markerPt = this.map.latLngToLayerPoint(marker.getLatLng());\n          ref = this.markers;\n          for (j = 0, len = ref.length; j < len; j++) {\n            m = ref[j];\n            if (!this.map.hasLayer(m)) {\n              continue;\n            }\n            mPt = this.map.latLngToLayerPoint(m.getLatLng());\n            if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n              nearbyMarkerData.push({\n                marker: m,\n                markerPt: mPt\n              });\n            } else {\n              nonNearbyMarkers.push(m);\n            }\n          }\n          if (nearbyMarkerData.length === 1) {\n            return this.trigger('click', marker);\n          } else {\n            return this.spiderfy(nearbyMarkerData, nonNearbyMarkers);\n          }\n        }\n      };\n\n      p.makeHighlightListeners = function (marker) {\n        return {\n          highlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['highlighted']\n              });\n            };\n          })(this),\n          unhighlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['usual']\n              });\n            };\n          })(this)\n        };\n      };\n\n      p.spiderfy = function (markerData, nonNearbyMarkers) {\n        var bodyPt, footLl, footPt, footPts, leg, marker, md, mhl, nearestMarkerDatum, numFeet, spiderfiedMarkers;\n        this.spiderfying = true;\n        numFeet = markerData.length;\n        bodyPt = this.ptAverage((function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = markerData.length; j < len; j++) {\n            md = markerData[j];\n            results.push(md.markerPt);\n          }\n          return results;\n        })());\n        footPts = numFeet >= this['circleSpiralSwitchover'] ? this.generatePtsSpiral(numFeet, bodyPt).reverse() : this.generatePtsCircle(numFeet, bodyPt);\n        spiderfiedMarkers = (function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = footPts.length; j < len; j++) {\n            footPt = footPts[j];\n            footLl = this.map.layerPointToLatLng(footPt);\n            nearestMarkerDatum = this.minExtract(markerData, (function (_this) {\n              return function (md) {\n                return _this.ptDistanceSq(md.markerPt, footPt);\n              };\n            })(this));\n            marker = nearestMarkerDatum.marker;\n            leg = new L.Polyline([marker.getLatLng(), footLl], {\n              color: this['legColors']['usual'],\n              weight: this['legWeight'],\n              clickable: false\n            });\n            this.map.addLayer(leg);\n            marker['_omsData'] = {\n              usualPosition: marker.getLatLng(),\n              leg: leg\n            };\n            if (this['legColors']['highlighted'] !== this['legColors']['usual']) {\n              mhl = this.makeHighlightListeners(marker);\n              marker['_omsData'].highlightListeners = mhl;\n              marker.addEventListener('mouseover', mhl.highlight);\n              marker.addEventListener('mouseout', mhl.unhighlight);\n            }\n            marker.setLatLng(footLl);\n            marker.setZIndexOffset(1000000);\n            results.push(marker);\n          }\n          return results;\n        }).call(this);\n        delete this.spiderfying;\n        this.spiderfied = true;\n        return this.trigger('spiderfy', spiderfiedMarkers, nonNearbyMarkers);\n      };\n\n      p['unspiderfy'] = function (markerNotToMove) {\n        var j, len, marker, mhl, nonNearbyMarkers, ref, unspiderfiedMarkers;\n        if (markerNotToMove == null) {\n          markerNotToMove = null;\n        }\n        if (this.spiderfied == null) {\n          return this;\n        }\n        this.unspiderfying = true;\n        unspiderfiedMarkers = [];\n        nonNearbyMarkers = [];\n        ref = this.markers;\n        for (j = 0, len = ref.length; j < len; j++) {\n          marker = ref[j];\n          if (marker['_omsData'] != null) {\n            this.map.removeLayer(marker['_omsData'].leg);\n            if (marker !== markerNotToMove) {\n              marker.setLatLng(marker['_omsData'].usualPosition);\n            }\n            marker.setZIndexOffset(0);\n            mhl = marker['_omsData'].highlightListeners;\n            if (mhl != null) {\n              marker.removeEventListener('mouseover', mhl.highlight);\n              marker.removeEventListener('mouseout', mhl.unhighlight);\n            }\n            delete marker['_omsData'];\n            unspiderfiedMarkers.push(marker);\n          } else {\n            nonNearbyMarkers.push(marker);\n          }\n        }\n        delete this.unspiderfying;\n        delete this.spiderfied;\n        this.trigger('unspiderfy', unspiderfiedMarkers, nonNearbyMarkers);\n        return this;\n      };\n\n      p.ptDistanceSq = function (pt1, pt2) {\n        var dx, dy;\n        dx = pt1.x - pt2.x;\n        dy = pt1.y - pt2.y;\n        return dx * dx + dy * dy;\n      };\n\n      p.ptAverage = function (pts) {\n        var j, len, numPts, pt, sumX, sumY;\n        sumX = sumY = 0;\n        for (j = 0, len = pts.length; j < len; j++) {\n          pt = pts[j];\n          sumX += pt.x;\n          sumY += pt.y;\n        }\n        numPts = pts.length;\n        return new L.Point(sumX / numPts, sumY / numPts);\n      };\n\n      p.minExtract = function (set, func) {\n        var bestIndex, bestVal, index, item, j, len, val;\n        for (index = j = 0, len = set.length; j < len; index = ++j) {\n          item = set[index];\n          val = func(item);\n          if ((typeof bestIndex === \"undefined\" || bestIndex === null) || val < bestVal) {\n            bestVal = val;\n            bestIndex = index;\n          }\n        }\n        return set.splice(bestIndex, 1)[0];\n      };\n\n      p.arrIndexOf = function (arr, obj) {\n        var i, j, len, o;\n        if (arr.indexOf != null) {\n          return arr.indexOf(obj);\n        }\n        for (i = j = 0, len = arr.length; j < len; i = ++j) {\n          o = arr[i];\n          if (o === obj) {\n            return i;\n          }\n        }\n        return -1;\n      };\n\n      return _Class;\n\n    })();\n  }).call(window);\n\n}());\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__ = __webpack_require__(2);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\n\n\n//\n/**\r\n * 点图元绘制工具\r\n */\n\nvar PointTool = function (_Tool) {\n  _inherits(PointTool, _Tool);\n\n  function PointTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PointTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { src: 'circle', color: '#000', radius: 5, fillColor: '#FFF', weight: 1, fillOpacity: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PointTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    //\n    // this.map.once('mousedown', this.onMouseDown);\n    // this.map.once('mouseup', this.onEnd);\n    //\n    this.map.on('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PointTool.prototype.cancel = function cancel() {\n    this.map.off('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\n\n\n  PointTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var latlng = e.latlng;\n    var options = this.options,\n        layer = this.layer,\n        marker = this.marker;\n\n\n    if (marker) {\n      marker.setLatLng(latlng);\n    } else {\n      this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_VectorMarker__[\"a\" /* default */](latlng, options.feature).addTo(layer);\n    }\n    this.onEnd();\n  };\n\n  return PointTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PointTool);\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"default\"] = addStylesClient;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__listToStyles__ = __webpack_require__(22);\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\n\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nfunction addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = Object(__WEBPACK_IMPORTED_MODULE_0__listToStyles__[\"a\" /* default */])(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = Object(__WEBPACK_IMPORTED_MODULE_0__listToStyles__[\"a\" /* default */])(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n//\nvar _L = L,\n    Polyline = _L.Polyline;\n/**\r\n * 线绘制工具\r\n */\n\nvar PolylineTool = function (_Tool) {\n  _inherits(PolylineTool, _Tool);\n\n  function PolylineTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PolylineTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', weight: 2 }\n\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  PolylineTool.prototype.start = function start() {\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  PolylineTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * 绘制\r\n   */\n\n\n  PolylineTool.prototype.onMouseDown = function onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n    //\n\n    if (!marker) {\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    } else {\n      this.mp = null;\n    }\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  PolylineTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp;\n    var latlng = e.latlng;\n\n    if (!mp) {\n      //\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      marker.getBounds().extend(mp);\n      marker.redraw();\n    }\n  };\n\n  return PolylineTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PolylineTool);\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\n\n//\nvar _L = L,\n    Polygon = _L.Polygon;\n/**\r\n * 多边形绘制工具\r\n */\n\nvar PolygonTool = function (_Tool) {\n  _inherits(PolygonTool, _Tool);\n\n  function PolygonTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PolygonTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * \r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  } // move point\n\n\n  PolygonTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    //\n    var map = this.map;\n\n    map.on('mousedown', this.onMouseDown, this);\n    //\n    this.restart = true;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n    this.mp = null;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype._onMouseDown = function _onMouseDown(e) {\n    this.reset();\n    //\n    var marker = this.marker,\n        map = this.map,\n        layer = this.layer,\n        options = this.options;\n    var latlng = e.latlng;\n\n    if (!marker) {\n      marker = this.marker = new Polygon([latlng], options.feature).addTo(layer);\n      map.on('mousemove', this.onMouseMove, this);\n      map.once('dblclick', this.onEnd, this);\n    }\n    this.mp = null;\n  };\n  /**\r\n   * \r\n   */\n\n\n  PolygonTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker,\n        mp = this.mp;\n    var latlng = e.latlng;\n\n    if (!mp) {\n      marker.addLatLng(latlng);\n      this.mp = latlng;\n    } else {\n      mp.lat = latlng.lat;\n      mp.lng = latlng.lng;\n      marker.getBounds().extend(mp);\n      marker.redraw();\n    }\n  };\n\n  return PolygonTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PolygonTool);\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Tool__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__feature_Circle__ = __webpack_require__(169);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\n\n\n// let { Circle } = L;\n/**\r\n * 圆形绘制工具\r\n */\n\nvar CircleTool = function (_Tool) {\n  _inherits(CircleTool, _Tool);\n\n  function CircleTool() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, CircleTool);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Tool.call.apply(_Tool, [this].concat(args))), _this), _this.options = { feature: { color: 'red', fillOpacity: .5, weight: 1 }\n      /**\r\n       * 启动\r\n       */\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  CircleTool.prototype.start = function start() {\n    this.initMouseDownHandler();\n    var map = this.map;\n\n    map.once('mousedown', this.onMouseDown, this);\n  };\n  /**\r\n   * 取消\r\n   */\n\n\n  CircleTool.prototype.cancel = function cancel() {\n    var map = this.map;\n\n    map.off('mousedown', this.onMouseDown, this);\n    map.off('mousemove', this.onMouseMove, this);\n  };\n  /**\r\n   * @param e \r\n   */\n\n\n  CircleTool.prototype._onMouseDown = function _onMouseDown(e) {\n    var options = this.options;\n    var map = this.map,\n        layer = this.layer;\n    var latlng = e.latlng;\n\n    this.clear(); //重复绘制，先移除旧图元\n    //\n    this.marker = new __WEBPACK_IMPORTED_MODULE_1__feature_Circle__[\"a\" /* default */](latlng, options.feature).addTo(layer);\n    map.on('mousemove', this.onMouseMove, this);\n    map.once('mouseup', this.onEnd, this);\n  };\n  /**\r\n   * \r\n   * @param e \r\n   */\n\n\n  CircleTool.prototype.onMouseMove = function onMouseMove(e) {\n    var marker = this.marker;\n\n    var latlng = e.latlng;\n    var center = marker.getLatLng();\n    var r = latlng.distanceTo(center);\n    marker.setRadius(r);\n    marker.redraw();\n  };\n\n  return CircleTool;\n}(__WEBPACK_IMPORTED_MODULE_0__Tool__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CircleTool);\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lonlats;\n/**\r\n * @author gyb(mocheer)\r\n * @since 2017.5.20\r\n */\nvar _T = T,\n    isArray = _T.isArray;\nvar _L = L,\n    latLng = _L.latLng;\n/**\r\n * @param coords 支持的格式:\r\n * 一维：\r\n * {lat,lng}\r\n * {lon,lat}\r\n * [lon,lat]\r\n * 二维：\r\n * [[lon,lat],[lon,lat]...]\r\n * [{lon,lat},{lon,lat}...]\r\n * [{lat,lng},{lon,lng}...]\r\n * 多维：\r\n * ...\r\n */\n\nfunction lonlats(coords, deep) {\n  return deep-- && coords.map(function (item) {\n    return lonlats(item, deep);\n  }) || isArray(coords) && latLng(coords[1], coords[0]) || latLng(coords);\n}\n\n/***/ })\n\n/******/ })});;\n\n\n// WEBPACK FOOTER //\n// plugins/drawLayer.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/dmap/leaflet/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 164);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3be2d1c8824e8c545cfd","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.5.26\r\n */\r\nlet { Layer, Popup, DomEvent } = L;\r\nlet { div: $div } = T;\r\n//\r\n/**\r\n * 弹出层\r\n * @param {props,el}\r\n */\r\nexport default L.Popup2 = Popup.extend({\r\n\toptions: {\r\n\t\t// 最大宽度,设置为 Infinity 居中\r\n\t\tmaxWidth: 0,\r\n\t\t// // 最小宽度\r\n\t\tminWidth: 0,\r\n\t\t// 自动平移，拖动地图以便于popup的最佳显示\r\n\t\tautoPan: false,\r\n\t\t//\r\n\t\tautoPosition: true,\r\n\t\t//\r\n\t\t// keepInView: false,\r\n\t\t// 点击不关闭\r\n\t\tcloseButton: false,\r\n\t\t//\r\n\t\t// closeOnClick: false,\r\n\t\t//\r\n\t\tautoClose: false,\r\n\t\t//\r\n\t\t// autoPanPaddingTopLeft: L.point(0, 50)\r\n\t},\r\n\t// update() {\r\n\t// \tPopup.prototype.update.call(this)\r\n\t// },\r\n\t_initLayout() {\r\n\t\tlet that = this;\r\n\t\tlet { options, branch } = that;\r\n\t\tlet { leaf } = options;\r\n\t\tif (leaf && !branch) {\r\n\t\t\t// L.setOptions(that, { maxWidth: Infinity || 0, minWidth: leaf.minWidth || 0 });\r\n\t\t\t//\r\n\t\t\tlet { className } = options;\r\n\t\t\tlet prefix = 'leaflet-popup';\r\n\t\t\tlet container = that._container = $div(prefix + ' ' + (className || '') + ' leaflet-zoom-animated');\r\n\t\t\tlet contentNode = that._contentNode = $div('', container);//挂载的对象\r\n\t\t\t// 禁止滚轮和点击事件，用于拦截地图事件\r\n\t\t\tDomEvent.disableScrollPropagation(container);\r\n\t\t\tDomEvent.disableClickPropagation(container);\r\n\t\t\t// \r\n\t\t\tleaf.el = $div();\r\n\t\t\tleaf.props = T.assign({}, leaf.props, {\r\n\t\t\t\towner: that,\t\t\t\t\t \t  // 弹出层对象\r\n\t\t\t\tmarker: that._source,     // 图元对象\r\n\t\t\t\tdata: that._source && that._source.__data // 图元数据\r\n\t\t\t})\r\n\t\t\t// __vue__\r\n\t\t\tthis.branch = T.render(leaf).then(vm => {\r\n\t\t\t\tlet el = vm.$el;\r\n\t\t\t\tif (options.maxWidth) {\r\n\t\t\t\t\tlet style = container.style;\r\n\t\t\t\t\tstyle.width = el.clientWidth + 'px';\r\n\t\t\t\t\tstyle.height = el.clientHeight + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tthis.setContent(el);\r\n\t\t\t\treturn vm;\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tPopup.prototype._initLayout.call(that);\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t * 向下翻转\r\n\t */\r\n\t_getAnchor() {\r\n\t\tlet point = Popup.prototype._getAnchor.call(this);\r\n\t\tlet { _map: map, _contentNode: container, _source: marker, options } = this;\r\n\t\tlet leaf = container.firstChild;\r\n\t\t// 点\r\n\t\t// todo 面的弹出\r\n\t\tif (options.autoPosition && options.leaf && leaf && marker && marker._latlng) {\r\n\t\t\tlet { style } = leaf;\r\n\t\t\tstyle.left = style.top = '0px';//todo，拖动位置还原\r\n\t\t\tlet contentHeight = leaf.clientHeight + 20;//20 marginBottom\r\n\t\t\tlet { x, y } = map.latLngToContainerPoint(marker._latlng);\r\n\t\t\tlet size = map.getSize();\r\n\t\t\tlet dx = 16, dy = 0;\r\n\t\t\t//\r\n\t\t\tif (container.clientHeight) {\r\n\t\t\t\t// 上下边界\r\n\t\t\t\tif (y - contentHeight < 0) {\r\n\t\t\t\t\tdy = contentHeight;\r\n\t\t\t\t\tif (y + dy > size.y) {\r\n\t\t\t\t\t\tdy -= (y + dy - size.y)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// 上下边界\r\n\t\t\t\tif (y + contentHeight > size.y) {\r\n\t\t\t\t\tdy = -contentHeight;\r\n\t\t\t\t\tif (y + dy < 0) {\r\n\t\t\t\t\t\tdy -= y + dy\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 右边界\r\n\t\t\tif (x + leaf.clientWidth > size.x) {\r\n\t\t\t\tdx = -leaf.clientWidth - dx;\r\n\t\t\t}\r\n\t\t\t// \r\n\t\t\tif (dx || dy) {\r\n\t\t\t\tlet { x, y } = point;\r\n\t\t\t\tpoint = [dx + x, dy + y]\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn point;\r\n\t}\r\n})\r\n\r\n/**\r\n * 默认初始化为Popup\r\n */\r\nLayer.include({\r\n\tbindPopup(content, options) {\r\n\t\tif (content instanceof Popup) {\r\n\t\t\tL.setOptions(content, options);\r\n\t\t\tthis._popup = content;\r\n\t\t\t(content)._source = this;\r\n\t\t} else {\r\n\t\t\tif (!this._popup || options) {\r\n\t\t\t\tthis._popup = new Popup(options, this);\r\n\t\t\t}\r\n\t\t\tthis._popup.setContent(content);\r\n\t\t}\r\n\r\n\t\tif (!this._popupHandlersAdded) {\r\n\t\t\tlet events = {\r\n\t\t\t\tclick: this._openPopup,\r\n\t\t\t\tkeypress: this._onKeyPress,\r\n\t\t\t\tremove: this.closePopup,\r\n\t\t\t\tmove: this._movePopup\r\n\t\t\t}\r\n\t\t\tif (options && options.hover) events.mouseover = this._openPopup;\r\n\t\t\tthis.on(events)\r\n\t\t\tthis._popupHandlersAdded = true;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tunbindPopup() {\r\n\t\tif (this._popup) {\r\n\t\t\tthis.off({\r\n\t\t\t\tclick: this._openPopup,\r\n\t\t\t\tkeypress: this._onKeyPress,\r\n\t\t\t\tremove: this.closePopup,\r\n\t\t\t\tmove: this._movePopup\r\n\t\t\t});\r\n\t\t\tthis._popupHandlersAdded = false;\r\n\t\t\tthis._popup = null;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/polyfill/Popup.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2018-8-3\r\n */\r\nlet imgs = {};\r\nexport default url => imgs[url] = imgs[url] || (function () {\r\n  let funcs = [];\r\n  let img = new Image();\r\n  let complete = false;\r\n  let loader = imgs[url] = {\r\n    then: func => {\r\n      complete ? func(img) : funcs.push(func);\r\n    }\r\n  };\r\n  img.src = url;\r\n  img.onload = () => {\r\n    complete = true;\r\n    while (funcs.length > 0) {\r\n      funcs.shift()(img)\r\n    }\r\n  }\r\n  return loader;\r\n})()\r\n\r\n\r\n/**\r\n * 弃用\r\n * ie下，基于 polyfill 的 promise 太影响性能。\r\n */\r\n// export default url => imgs[url] = imgs[url] || new Promise(reject => {\r\n//   let img = new Image();\r\n//   img.src = url;\r\n//   // 加载src资源时 complete 为true,即使图片尚未加载\r\n//   // img.addEventListener('load', e => {\r\n//   //   reject(img);\r\n//   // })\r\n//   img.onload = e => { reject(img) }\r\n// })\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Loader.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport PointTool from './tools/PointTool';\r\nimport PolylineTool from './tools/PolylineTool';\r\nimport { DistancePolylineTool, DistancePolygonTool } from './tools/DistanceTool';\r\nimport PenTool from './tools/PenTool';\r\nimport PenFillTool from './tools/PenFillTool';\r\nimport RectTool from './tools/RectTool';\r\nimport PolygonTool from './tools/PolygonTool';\r\nimport CircleTool from './tools/CircleTool';\r\nimport EllipseTool from './tools/EllipseTool';\r\nimport MilitaryArrowTool from './tools/MilitaryArrowTool';\r\nimport TextTool from \"./tools/TextTool\";\r\nimport VectorMarker from '@/feature/VectorMarker';\r\nimport FeatureLayer from \"@/layer/FeatureLayer\";\r\nimport { pointInPolygon } from '@/utils/geoUtils';\r\n//\r\n// 涉及重写Polyline 的 onAdd 和 flow 有顺序执行的冲突\r\nimport '@/plugins/meature/leaflet-measure-path';\r\nimport '@/plugins/meature/leaflet-measure-path.css';\r\n//\r\nlet { isArray } = T;\r\nlet {\r\n  Marker,\r\n  Polyline,\r\n  Polygon,\r\n  Circle,\r\n  CircleMarker\r\n} = L;\r\n/**\r\n * 标绘工具-管理器\r\n */\r\nexport default class DrawLayer extends FeatureLayer {\r\n  /**\r\n   * 用于回滚\r\n   */\r\n  history = []\r\n  /**\r\n   * 用于前进\r\n   */\r\n  next = []\r\n  /**\r\n   * 当前的绘制编辑对象\r\n   */\r\n  marker\r\n  /**\r\n   * 当前的绘制工具对象\r\n   */\r\n  tool\r\n  /**\r\n   * 当前的绘制工具类\r\n   */\r\n  Tool\r\n  /**\r\n   * \r\n   */\r\n  // options = { reable: false, editable: true, draggable: true }\r\n  /**\r\n   * \r\n   * @param dmap \r\n   */\r\n  addTo(dmap) {\r\n    dmap.on('draw-end', this.onDrawEnd.bind(this));\r\n    return super.addTo(dmap);\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} marker \r\n   * @param {*} options \r\n   * @param {*} data \r\n   */\r\n  add(marker, options, data) {\r\n    //\r\n    if (options.tooltip) {\r\n      options.tooltip.draggable = true;\r\n    }\r\n\r\n    super.add(marker, options, data);\r\n    this._check(marker)\r\n    //\r\n  }\r\n  /**\r\n   * 确保 marker 可编辑拖拽\r\n   */\r\n  _check(marker) {\r\n    if (marker) {\r\n      // 设置为可编辑\r\n      marker.editEnable();\r\n      // 设置为可拖拽\r\n      marker.makeDraggable();\r\n      marker.dragging.enable();\r\n    }\r\n  }\r\n  /**\r\n   * 改变地图工具\r\n   * @param options {tool,feature,tooltip,popup,onDrawEnd}\r\n   */\r\n  change(options) {\r\n    let that = this;\r\n    if (options) {\r\n      T.data.pan = false;\r\n      let { dmap, history, next } = that;\r\n      switch (options.tool) {\r\n        case 'pan':\r\n          that.reset();\r\n          dmap.el.style.cursor = \"-webkit-grab\";//grab\r\n          T.data.pan = true;\r\n          break;\r\n        case 'clear'://不要break;\r\n          that.clear();\r\n        case 'pointer':\r\n          that.reset();\r\n          dmap.el.style.cursor = `default`;\r\n          break;\r\n        case 'go':  // 前进\r\n          let todo = next[next.length - 1];\r\n          if (todo && todo.restore()) {\r\n            next.pop();\r\n          }\r\n          !history.includes(todo) && history.push(todo);\r\n          that.reset();\r\n          break;\r\n        case 'back':// 回滚\r\n          let done = history[history.length - 1];\r\n          if (done && done.reback()) {\r\n            history.pop();\r\n          }\r\n          !next.includes(done) && next.push(done);\r\n          that.reset();\r\n          break;\r\n        default:\r\n          that.start(options);\r\n          break;\r\n      }\r\n      dmap.do('tool-change', { target: that, options: options });\r\n    }\r\n    return that;\r\n  }\r\n  /**\r\n   * 启动绘制\r\n   * @param options {tool:'',feature,tooltip,popup}\r\n   */\r\n  start(options) {\r\n    let that = this;\r\n    let { map } = that;\r\n    let type = options.tool;\r\n    that.cancel();\r\n    map.dragging.disable();\r\n    let Tool = that.get(type);\r\n    let tool = Tool.create(that, options);\r\n    // if (tool) {\r\n    //   let mergeOptions = T.assign({}, that.options, options);\r\n    //   let toolOptions = tool.options;\r\n    //   toolOptions.feature.draggable = mergeOptions.draggable;\r\n    //   toolOptions.feature.interactive = false;\r\n    //   toolOptions.editable = mergeOptions.editable;\r\n    //   toolOptions.reable = mergeOptions.reable;\r\n    //   tool.start();\r\n    // }\r\n    if (tool) {\r\n      let toolOptions = tool.options;\r\n      toolOptions.feature.interactive = false;\r\n      tool.start();\r\n    }\r\n\r\n    that.tool = tool;\r\n  }\r\n\r\n\r\n  /**\r\n   * 获取绘制工具\r\n   * @param tool \r\n   */\r\n  get(tool) {\r\n    switch (tool) {\r\n      case 'point':\r\n        return PointTool;\r\n      case 'distance':\r\n        return DistancePolylineTool;\r\n      case 'distancePolygon':\r\n        return DistancePolygonTool;\r\n      case 'polyline':\r\n        return PolylineTool;\r\n      case \"pen\":\r\n        return PenTool;\r\n      case \"circle\":\r\n        return CircleTool;\r\n      case 'ellipse':\r\n        return EllipseTool;\r\n      case \"rect\":\r\n        return RectTool;\r\n      case \"polygon\":\r\n        return PolygonTool;\r\n      case 'penfill':\r\n        return PenFillTool;\r\n      case 'militaryArrow':\r\n        return MilitaryArrowTool;\r\n      case 'text':\r\n        return TextTool;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n    this.tool && this.tool.cancel();\r\n    this.tool = null;\r\n  }\r\n  /**\r\n   * 重置\r\n   */\r\n  reset() {\r\n    this.cancel();\r\n    this.map.dragging.enable();\r\n    //  map.doubleClickZoom.enable();\r\n  }\r\n  /**\r\n   * 绘制结束\r\n   */\r\n  onDrawEnd(e) {\r\n    // 重置前进内容\r\n    this.next.length = 0;\r\n    //\r\n    let { tool } = this;\r\n    if (tool) {\r\n      // 推进历史\r\n      !this.history.includes(tool) && this.history.push(tool);\r\n      //\r\n      let { options, marker } = tool;\r\n\r\n      marker.__data = tool.data;//余姚新会标绘\r\n\r\n      // 延迟交互\r\n      if (tool.options.tool !== 'distance' && tool.options.tool !== 'distancePolygon' && !options.reable) {\r\n        setTimeout(() => {\r\n          marker.setStyle({ interactive: true, draggable: true });\r\n          this._check(marker);\r\n          if ((marker instanceof L.Text) === false) this._bindText(marker, tool.options)\r\n        }, 100);\r\n      }\r\n      if (options.searchable) {\r\n        this.dmap.do('search-end', { target: this, event: e, value: this.search(e) });\r\n      }\r\n      //\r\n      options.onDrawEnd && options.onDrawEnd(e);\r\n      // 绘制模式\r\n      if (options.multi) {\r\n        // 重复绘制\r\n        tool.cancel();\r\n        tool = this.tool = tool.clone();\r\n        tool.start();\r\n      } else if (options.reable) {\r\n        // 重新绘制\r\n        tool.cancel();\r\n        this.tool = tool;\r\n        tool.start();\r\n      } else {\r\n        // 重置\r\n        this.reset();\r\n      }\r\n    } else {\r\n      this.reset();\r\n    }\r\n\r\n  }\r\n  /**\r\n   * 搜索\r\n   */\r\n  search(e) {\r\n    let { marker } = e,\r\n      result = [];\r\n    if (!marker) {\r\n      throw 'search error'\r\n    }\r\n    let { _map: map } = marker\r\n    if (marker instanceof Circle) {\r\n      let { _radius } = marker;\r\n      let center = marker.getLatLng();\r\n      map.eachLayer((layer) => {\r\n        //\r\n        if (layer instanceof Marker || layer instanceof VectorMarker) {\r\n          if (map.latLngToLayerPoint(layer.getLatLng()).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\r\n            result.push(layer);\r\n          }\r\n        } else if (layer instanceof Polyline) {\r\n          let latlngs = layer.getLatLngs()\r\n          if (isArray(latlngs[0])) {//todo \r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (map.latLngToLayerPoint(latlngs[i]).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        } else if (layer instanceof Polygon) {\r\n          let latlngs = layer.getLatLngs()\r\n          if (isArray(latlngs[0])) {\r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (map.latLngToLayerPoint(latlngs[i]).distanceTo(map.latLngToLayerPoint(center)) < _radius) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    } else if (marker instanceof Polygon) {\r\n      let { _rings } = marker;\r\n      map.eachLayer(layer => {\r\n        if (layer instanceof Marker || layer instanceof CircleMarker) {\r\n          if (pointInPolygon(map.latLngToLayerPoint(layer.getLatLng()), _rings[0])) {\r\n            result.push(layer);\r\n          }\r\n        } else if (layer instanceof Polyline) {\r\n          let latlngs = layer.getLatLngs();\r\n          if (isArray(latlngs[0])) {//todo \r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (pointInPolygon(map.latLngToLayerPoint(latlngs[i]), _rings[0])) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        } else if (layer instanceof Polygon) {\r\n          let latlngs = layer.getLatLngs()\r\n          if (isArray(latlngs[0])) {\r\n            latlngs = latlngs[0]\r\n          }\r\n          for (let i = 0, len = latlngs.length; i < len; i++) {\r\n            if (pointInPolygon(map.latLngToLayerPoint(latlngs[i]), _rings[0])) {\r\n              result.push(layer);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n    return result;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/DrawLayer.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport PolylineTool from './PolylineTool'\r\nimport PolygonTool from \"./PolygonTool\";\r\n\r\n/**\r\n * 测距\r\n */\r\nexport class DistancePolylineTool extends PolylineTool {\r\n  options = { feature: { color: 'red', weight: 2, showMeasurements: true } }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    super.onMouseMove(e);\r\n    this.marker.updateMeasurements();\r\n  }\r\n}\r\n/**\r\n * 测面\r\n */\r\nexport class DistancePolygonTool extends PolygonTool {\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1, showMeasurements: true } }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    super.onMouseMove(e);\r\n    this.marker.updateMeasurements();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/DistanceTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polyline } = L;\r\n/**\r\n * 铅笔工具\r\n */\r\nexport default class PenTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red' } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.map.once('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    this.map.off('mousedown', this.onMouseDown, this);\r\n    this.map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, options, map, layer } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer)\r\n      map.once('mouseup', this.onEnd, this);\r\n      map.on('mousemove', this.onMouseMove, this);\r\n    }\r\n  }\r\n  /**\r\n   * 绘制ing\r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    this.marker.addLatLng(e.latlng)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PenTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nexport default class PenFillTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, options, map, layer } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = L.rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('mouseup', this.onEnd, this);\r\n      // map.off('mousedown', this.onMouseDown);\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    this.marker.addLatLng(e.latlng)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PenFillTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Rectangle } = L;\r\n/**\r\n * 矩形绘制工具\r\n */\r\nexport default class RectTool extends Tool {\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.once('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.sp = null;\r\n  }\r\n  /**\r\n   * 绘制\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { map, layer, options } = this;\r\n    let { latlng } = e;\r\n    this.clear();//重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Rectangle(L.latLngBounds(latlng, latlng), options.feature).addTo(layer)\r\n    this.sp = latlng\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker } = this;\r\n    let { latlng } = e;\r\n    marker.setBounds(L.latLngBounds(this.sp, latlng))\r\n    marker.redraw();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/RectTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet { Circle } = L;\r\n/**\r\n * \r\n */\r\nCircle.include({\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let { lat, lng } = this.getLatLng();\r\n    this.options.radius = this._mRadius;\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: { coordinates: [lng, lat], type: 'Circle' }\r\n    }\r\n  }\r\n})\r\n/**\r\n * \r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * 原L.Circle在非经纬度等间隔投影的情况下是椭圆\r\n   * 确保是圆形，用于标绘，但实际上是不推荐的，因为半径已经不算是实际的半径\r\n   */\r\n  _updateBounds: function () {\r\n    this._radius = this._radiusY;\r\n    Circle.prototype._updateBounds.call(this);\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Circle.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport CircleTool from './CircleTool';\r\nimport Ellipse from '@/feature/Ellipse';\r\n\r\n/**\r\n * 椭圆绘制工具\r\n */\r\nexport default class EllipseTool extends CircleTool {\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { options } = this;\r\n    let { map, layer } = this;\r\n    let { latlng } = e;\r\n    this.clear();//重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Ellipse(latlng, 0, options.feature).addTo(layer);\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker } = this;\r\n    let latlng = e.latlng;\r\n    let center = marker.getLatLng();\r\n    let latlng1 = latlng.clone();\r\n    let latlng2 = latlng.clone();\r\n    latlng1.lat = center.lat;\r\n    latlng2.lng = center.lng;\r\n    let r = latlng1.distanceTo(center);\r\n    let ry = latlng2.distanceTo(center);\r\n    //\r\n    marker.setRadius(r);\r\n    marker.setRadiusY(ry);\r\n    marker.redraw();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/EllipseTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\nimport MilitaryArrow from '@/feature/MilitaryArrow'\r\n//\r\nlet { LatLng } = L;\r\n/**\r\n * 军标箭头\r\n */\r\nexport default class MilitaryArrowTool extends Tool {\r\n  options = { feature: { fillColor: 'red', weight: 1, fillOpacity: .5, color: '#333' } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null;\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { feature } = options;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      feature.draggable = false;\r\n      // feature.interactive = false;\r\n      marker = this.marker = new MilitaryArrow([latlng], feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    } else {\r\n      this.mp = null;\r\n    }\r\n    this.lp = e.layerPoint\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this,\r\n      { latlng, layerPoint } = e,\r\n      latlngs = marker.getLatLngs();\r\n    if (!mp) {\r\n      let { lp } = this;\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      // marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/MilitaryArrowTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\r\nimport PointTool from './PointTool'\r\n\r\n//\r\n/**\r\n * 点图元绘制工具\r\n */\r\nexport default class TextTool extends PointTool {\r\n  options = { feature: {} }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { latlng } = e;\r\n    let { options, layer } = this;\r\n    //\r\n    this.marker = L.text(latlng, options.text, options.feature).addTo(layer)\r\n    this.onEnd();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/TextTool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.10\r\n */\r\n/**\r\n * 点在多边形\r\n */\r\nexport var pointInPolygon = (p, arr) => {\r\n  let nCross = 0;\r\n  if (arr.length > 0) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      let p0 = p,\r\n        p1 = arr[i],\r\n        p2 = arr[(i + 1) % arr.length];\r\n      // 求解 y=p.y 与 p1p2 的交点\r\n      if (p1.y == p2.y || p0.y < (p1.y <= p2.y ? p1.y : p2.y) || p0.y >= (p1.y >= p2.y ? p1.y : p2.y)) // p1p2 与 y=p0.y平行,交点在p1p2延长线上,交点在p1p2延长线上 \r\n        continue;\r\n      if ((p0.y - p1.y) * (p2.x - p1.x) / (p2.y - p1.y) + p1.x > p0.x) nCross++; //交点的X坐标大于p0的x坐标，只统计单边交点 \t\t\t\r\n    }\r\n  }\r\n  // 单边交点为偶数，点在多边形之外 --- \r\n  return (nCross % 2 == 1);\r\n}\r\n/**\r\n* \r\n* @param s start point\r\n* @param p end point\r\n*/\r\nexport var distance = (s, p) => Math.sqrt((p[0] - s[0]) * (p[0] - s[0]) + ((p[1] - s[1]) * (p[1] - s[1])))\r\n/**\r\n * \r\n * @param p \r\n * @param angle \r\n */\r\nexport var toRotate = (p, angle) => {\r\n  angle = Math.atan2(p.y, p.x) + angle\r\n  let r = Math.sqrt(p.x * p.x + p.y * p.y)//半径\r\n  return {\r\n    x: Math.cos(angle) * r,\r\n    y: Math.sin(angle) * r\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/geoUtils.js","/**\n * @see https://github.com/ProminentEdge/leaflet-measure-path\n */\n!(function () {\n\n  L.Marker.Measurement = L.Layer.extend({\n    options: {\n      pane: 'markerPane'\n    },\n\n    initialize: function (latlng, measurement, title, rotation, options) {\n      L.setOptions(this, options);\n\n      this._latlng = latlng;\n      this._measurement = measurement;\n      this._title = title;\n      this._rotation = rotation;\n    },\n\n    addTo: function (map) {\n      map.addLayer(this);\n      return this;\n    },\n\n    onAdd: function (map) {\n      this._map = map;\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      var el = this._element = L.DomUtil.create('div', 'leaflet-zoom-animated leaflet-measure-path-measurement', pane);\n      var inner = L.DomUtil.create('div', '', el);\n      inner.title = this._title;\n      inner.innerHTML = this._measurement;\n\n      map.on('zoomanim', this._animateZoom, this);\n\n      this._setPosition();\n    },\n\n    onRemove: function (map) {\n      map.off('zoomanim', this._animateZoom, this);\n      var pane = this.getPane ? this.getPane() : map.getPanes().markerPane;\n      pane.removeChild(this._element);\n      this._map = null;\n    },\n\n    _setPosition: function () {\n      L.DomUtil.setPosition(this._element, this._map.latLngToLayerPoint(this._latlng));\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    },\n\n    _animateZoom: function (opt) {\n      var pos = this._map._latLngToNewLayerPoint(this._latlng, opt.zoom, opt.center).round();\n      L.DomUtil.setPosition(this._element, pos);\n      this._element.style.transform += ' rotate(' + this._rotation + 'rad)';\n    }\n  });\n\n  L.marker.measurement = function (latLng, measurement, title, rotation, options) {\n    return new L.Marker.Measurement(latLng, measurement, title, rotation, options);\n  };\n\n  var formatDistance = function (d) {\n    var unit,\n      feet;\n\n    if (this._measurementOptions.imperial) {\n      feet = d / 0.3048;\n      if (feet > 3000) {\n        d = d / 1609.344;\n        unit = 'mi';\n      } else {\n        d = feet;\n        unit = 'ft';\n      }\n    } else {\n      if (d > 1000) {\n        d = d / 1000;\n        unit = 'km';\n      } else {\n        unit = 'm';\n      }\n    }\n\n    if (d < 100) {\n      return d.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(d) + ' ' + unit;\n    }\n  }\n\n  var formatArea = function (a) {\n    var unit,\n      sqfeet;\n\n    if (this._measurementOptions.imperial) {\n      if (a > 404.685642) {\n        a = a / 4046.85642;\n        unit = 'ac';\n      } else {\n        a = a / 0.09290304;\n        unit = 'ft²';\n      }\n    } else {\n      if (a > 1000000) {\n        a = a / 1000000;\n        unit = 'km²';\n      } else {\n        unit = 'm²';\n      }\n    }\n\n    if (a < 100) {\n      return a.toFixed(1) + ' ' + unit;\n    } else {\n      return Math.round(a) + ' ' + unit;\n    }\n  }\n\n  var RADIUS = 6378137;\n  // ringArea function copied from geojson-area\n  // (https://github.com/mapbox/geojson-area)\n  // This function is distributed under a separate license,\n  // see LICENSE.md.\n  var ringArea = function ringArea(coords) {\n    var rad = function rad(_) {\n      return _ * Math.PI / 180;\n    };\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex,\n      area = 0,\n      coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n      for (var i = 0; i < coordsLength; i++) {\n        if (i === coordsLength - 2) {// i = N-2\n          lowerIndex = coordsLength - 2;\n          middleIndex = coordsLength - 1;\n          upperIndex = 0;\n        } else if (i === coordsLength - 1) {// i = N-1\n          lowerIndex = coordsLength - 1;\n          middleIndex = 0;\n          upperIndex = 1;\n        } else { // i = 0 to N-3\n          lowerIndex = i;\n          middleIndex = i + 1;\n          upperIndex = i + 2;\n        }\n        p1 = coords[lowerIndex];\n        p2 = coords[middleIndex];\n        p3 = coords[upperIndex];\n        area += (rad(p3.lng) - rad(p1.lng)) * Math.sin(rad(p2.lat));\n      }\n\n      area = area * RADIUS * RADIUS / 2;\n    }\n\n    return Math.abs(area);\n  };\n\n  var circleArea = function circleArea(d) {\n    var rho = d / RADIUS;\n    return 2 * Math.PI * RADIUS * RADIUS * (1 - Math.cos(rho));\n  };\n\n  var override = function (method, fn, hookAfter) {\n    if (!hookAfter) {\n      return function () {\n        method.apply(this, arguments);\n        return fn.apply(this, arguments);\n      }\n    } else {\n      return function () {\n        fn.apply(this, arguments);\n        return method.apply(this, arguments);\n      }\n    }\n  };\n\n  L.Polyline.include({\n    showMeasurements: function (options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        minPixelDistance: 30,\n        showDistances: true,\n        showArea: true,\n        lang: {\n          totalLength: 'Total length',\n          totalArea: 'Total area',\n          segmentLength: 'Segment length'\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function () {\n      this._map.off('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Polyline.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Polyline.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLngs: override(L.Polyline.prototype.setLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    spliceLatLngs: override(L.Polyline.prototype.spliceLatLngs, function () {\n      return this.updateMeasurements();\n    }),\n\n    formatDistance: formatDistance,\n    formatArea: formatArea,\n\n    updateMeasurements: function () {\n      if (!this._measurementLayer) return this;\n\n      var latLngs = this.getLatLngs(),\n        isPolygon = this instanceof L.Polygon,\n        options = this._measurementOptions,\n        totalDist = 0,\n        formatter,\n        ll1,\n        ll2,\n        p1,\n        p2,\n        pixelDist,\n        dist;\n\n      if (latLngs && latLngs.length && L.Util.isArray(latLngs[0])) {\n        // Outer ring is stored as an array in the first element,\n        // use that instead.\n        latLngs = latLngs[0];\n      }\n\n      this._measurementLayer.clearLayers();\n\n      if (this._measurementOptions.showDistances && latLngs.length > 1) {\n        formatter = this._measurementOptions.formatDistance || L.bind(this.formatDistance, this);\n\n        for (var i = 1, len = latLngs.length; (isPolygon && i <= len) || i < len; i++) {\n          ll1 = latLngs[i - 1];\n          ll2 = latLngs[i % len];\n          dist = ll1.distanceTo(ll2);\n          totalDist += dist;\n\n          p1 = this._map.latLngToLayerPoint(ll1);\n          p2 = this._map.latLngToLayerPoint(ll2);\n\n          pixelDist = p1.distanceTo(p2);\n\n          if (pixelDist >= options.minPixelDistance) {\n            L.marker.measurement(\n              this._map.layerPointToLatLng([(p1.x + p2.x) / 2, (p1.y + p2.y) / 2]),\n              formatter(dist), options.lang.segmentLength, this._getRotation(ll1, ll2), options)\n              .addTo(this._measurementLayer);\n          }\n        }\n\n        // Show total length for polylines\n        if (!isPolygon) {\n          L.marker.measurement(ll2, formatter(totalDist), options.lang.totalLength, 0, options)\n            .addTo(this._measurementLayer);\n        }\n      }\n\n      if (isPolygon && options.showArea && latLngs.length > 2) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = ringArea(latLngs);\n        L.marker.measurement(this.getBounds().getCenter(),\n          formatter(area), options.lang.totalArea, 0, options)\n          .addTo(this._measurementLayer);\n      }\n\n      return this;\n    },\n\n    _getRotation: function (ll1, ll2) {\n      var p1 = this._map.project(ll1),\n        p2 = this._map.project(ll2);\n\n      return Math.atan((p2.y - p1.y) / (p2.x - p1.x));\n    }\n  });\n\n  L.Polyline.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n\n  L.Circle.include({\n    showMeasurements: function (options) {\n      if (!this._map || this._measurementLayer) return this;\n\n      this._measurementOptions = L.extend({\n        showOnHover: false,\n        showArea: true,\n        lang: {\n          totalArea: 'Total area',\n        }\n      }, options || {});\n\n      this._measurementLayer = L.layerGroup().addTo(this._map);\n      this.updateMeasurements();\n\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      return this;\n    },\n\n    hideMeasurements: function () {\n      this._map.on('zoomend', this.updateMeasurements, this);\n\n      if (!this._measurementLayer) return this;\n      this._map.removeLayer(this._measurementLayer);\n      this._measurementLayer = null;\n\n      return this;\n    },\n\n    onAdd: override(L.Circle.prototype.onAdd, function () {\n      if (this.options.showMeasurements) {\n        this.showMeasurements(this.options.measurementOptions);\n      }\n    }),\n\n    onRemove: override(L.Circle.prototype.onRemove, function () {\n      this.hideMeasurements();\n    }, true),\n\n    setLatLng: override(L.Circle.prototype.setLatLng, function () {\n      this.updateMeasurements();\n    }),\n\n    setRadius: override(L.Circle.prototype.setRadius, function () {\n      this.updateMeasurements();\n    }),\n\n    formatArea: formatArea,\n\n    updateMeasurements: function () {\n      if (!this._measurementLayer) return;\n\n      var latLng = this.getLatLng(),\n        options = this._measurementOptions,\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n\n      this._measurementLayer.clearLayers();\n\n      if (options.showArea) {\n        formatter = options.formatArea || L.bind(this.formatArea, this);\n        var area = circleArea(this.getRadius());\n        L.marker.measurement(latLng,\n          formatter(area), options.lang.totalArea, 0, options)\n          .addTo(this._measurementLayer);\n      }\n    }\n  })\n\n  L.Circle.addInitHook(function () {\n    if (this.options.showMeasurements) {\n      this.showMeasurements();\n    }\n  });\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/meature/leaflet-measure-path.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js!./leaflet-measure-path.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"10279068\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/meature/leaflet-measure-path.css\n// module id = 175\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".leaflet-measure-path-measurement{position:absolute;font-size:10px;color:#000;text-shadow:-1px 0 0 #fff,-1px -1px 0 #fff,0 -1px 0 #fff,1px -1px 0 #fff,1px 0 0 #fff,1px 1px 0 #fff,0 1px 0 #fff,-1px 1px 0 #fff;white-space:nowrap;transform-origin:0;pointer-events:none}.leaflet-measure-path-measurement>div{position:relative;margin-top:-25%;left:-50%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./src/plugins/meature/leaflet-measure-path.css\n// module id = 176\n// module chunks = 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet { CircleMarker } = L;\r\nimport load from \"@/utils/Loader\";\r\n/**\r\n * 矢量图元\r\n */\r\nexport default L.VectorMarker = CircleMarker.extend({\r\n  /**\r\n   * \r\n   */\r\n  options: {\r\n    // 闪烁,常用于水雨情预警\r\n    // glow: false,\r\n    // 线条粗细\r\n    weight: 1,\r\n    // 颜色\r\n    color: '#000',\r\n    // 是否绘制线条\r\n    stroke: true,\r\n    // 是否填充\r\n    fill: true,\r\n    // 圆的半径，等腰三角形的底边长\r\n    radius: 5,\r\n    // 弧度单位 Math.random() * 2 * Math.PI 三角形角度 \r\n    angle: 0,\r\n    // 移入上调层级\r\n    riseOnHover: true\r\n  },\r\n  initialize: function (latlng, options) {\r\n    CircleMarker.prototype.initialize.call(this, latlng, options);\r\n    this._radiusY = this.options.radiusY;\r\n  },\r\n  // _updateBounds: function () {\r\n  //   var r = this._radius,\r\n  //     r2 = this._radiusY || r,\r\n  //     w = this._clickTolerance() ,\r\n  //     p = [r + w, r2 + w];\r\n  //   this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\r\n  // },\r\n  // _empty: function () {\r\n  //   return this._radius && !this._renderer._bounds.intersects(this._pxBounds);\r\n  // },\r\n  // \r\n  // _containsPoint: function (p) {\r\n  //   return p.distanceTo(this._point) <= this._radius + this._clickTolerance();\r\n  // },\r\n\r\n  _clickTolerance: function () {\r\n    return CircleMarker.prototype._clickTolerance.call(this) + 1;\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  _project() {\r\n    this._point = this._map.latLngToLayerPoint(this._latlng);\r\n    let { options } = this;\r\n    let { offset, icon } = options;\r\n    // 图元整体偏移\r\n    if (offset) {\r\n      this._point = this._point.add(offset);\r\n    }\r\n    // 图元锚点偏移\r\n    if (icon && icon.iconAnchor) {\r\n      this._point = this._point.subtract(icon.iconAnchor);\r\n    }\r\n    this._updateBounds();\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  beforeAdd(map) {\r\n    let { options } = this;\r\n    CircleMarker.prototype.beforeAdd.call(this, map);\r\n    // 确保 renderer is canvas,且canvas是唯一的。否则图层相互覆盖影响;\r\n    if (!map.options.preferCanvas && !options.renderer) {\r\n      options.renderer = map.__canvas = map.__canvas || L.canvas();\r\n    }\r\n    // 用于旋转\r\n    this.on('transformed', e => {\r\n      options.angle = e.rotation;\r\n      this.redraw();\r\n    })\r\n  },\r\n  /**\r\n   * @override\r\n   * todo 优化性能，预执行\r\n   */\r\n  _updatePath: function () {\r\n    let that = this;\r\n    let { options, _renderer } = that;\r\n    let { src } = options;\r\n    src = src || 'circle';\r\n    switch (src) {\r\n      case 'triangle':\r\n        return _renderer._updateTriangle(that);\r\n      case 'rect':\r\n        if (!options.radiusY) {\r\n          that._radius = that._radiusY = 8;\r\n        }\r\n        return _renderer._updateRect(that);\r\n      case 'circle':\r\n        return _renderer._updateCircle(that);\r\n      case 'line'://旋转句柄\r\n        return _renderer._updateLine(that);\r\n      default:\r\n        if (that._loader) {\r\n          _renderer._updateIcon(that);\r\n        } else {\r\n          // todo\r\n          if (src && src.indexOf('/') !== 0 && !src.includes('http')) {\r\n            src = options.src = T + src;\r\n          }\r\n          !that.loader && (that.loader = load(src)).then(img => {\r\n            that._loader = img;\r\n            that._radius = img.width / 2;\r\n            that._radiusY = img.height / 2;\r\n            that.redraw();\r\n          })\r\n        }\r\n        break;\r\n    }\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/feature/VectorMarker.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.15\r\n */\r\nlet { Circle } = L;\r\n/**\r\n * \r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * \r\n   */\r\n  initialize: function (latlng, options, legacyOptions) {\r\n    Circle.prototype.initialize.call(this, latlng, options, legacyOptions);\r\n    this._mRadiusY = this.options.radiusY;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _project: function () {\r\n    let { _latlng, _map: map, _mRadius, _mRadiusY } = this;\r\n    _mRadiusY = _mRadiusY || _mRadius;\r\n    // let { crs } = map.options;\r\n    let crs = L.CRS.EPSG3857; // 暂时，因为在其他坐标投影中暂时有问题。\r\n    let _point = this._point = map.latLngToLayerPoint(_latlng);\r\n    //\r\n    var latlng2 = crs.unproject(crs.project(_latlng).subtract([_mRadius, 0]));\r\n    var latlng3 = crs.unproject(crs.project(_latlng).subtract([_mRadiusY, 0]));\r\n    //\r\n    this._radius = _point.x - map.latLngToLayerPoint(latlng2).x;\r\n    this._radiusY = _point.x - map.latLngToLayerPoint(latlng3).x;\r\n    this._updateBounds();\r\n    //\r\n\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  setRadiusY: function (radiusY) {\r\n    this._mRadiusY = radiusY;\r\n    return this.redraw();\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  getRadiusY: function () {\r\n    return this._mRadiusY;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let { lat, lng } = this.getLatLng();\r\n    this.options.radius = this._mRadius;\r\n    this.options.radiusY = this._mRadiusY;\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: { coordinates: [lng, lat], type: 'Ellipse' }\r\n    }\r\n  }\r\n})\r\n\r\n/**\r\n * @see https://github.com/jdfergason/Leaflet.Ellipse\r\n */\r\n\r\n// L.Canvas.include ({\r\n//   _updateEllipse: function (layer) {\r\n//       if (layer._empty()) { return; }\r\n\r\n//       var p = layer._point,\r\n//           ctx = this._ctx,\r\n//           r = layer._radiusX,\r\n//           s = (layer._radiusY || r) / r;\r\n\r\n//       this._drawnLayers[layer._leaflet_id] = layer;\r\n\r\n//       ctx.save();\r\n\r\n//       ctx.translate(p.x, p.y);\r\n//       if (layer._tilt !== 0) {\r\n//           ctx.rotate( layer._tilt );\r\n//       }\r\n//       if (s !== 1) {\r\n//           ctx.scale(1, s);\r\n//       }\r\n\r\n//       ctx.beginPath();\r\n//       ctx.arc(0, 0, r, 0, Math.PI * 2);\r\n//       ctx.restore();\r\n\r\n//       this._fillStroke(ctx, layer);\r\n//   },\r\n// });\r\n\r\n// export default L.Path.extend({\r\n\r\n//   options: {\r\n//       fill: true,\r\n//       startAngle: 0,\r\n//       endAngle: 359.9\r\n//   },\r\n\r\n//   initialize: function (latlng, radii, tilt, options) {\r\n\r\n//       L.setOptions(this, options);\r\n//       this._latlng = L.latLng(latlng);\r\n\r\n//       if (tilt) {\r\n//           this._tiltDeg = tilt;\r\n//       } else {\r\n//           this._tiltDeg = 0;\r\n//       }\r\n\r\n//       if (radii) {\r\n//           this._mRadiusX = radii[0];\r\n//           this._mRadiusY = radii[1];\r\n//       }\r\n//   },\r\n\r\n//   setRadius: function (radii) {\r\n//       this._mRadiusX = radii[0];\r\n//       this._mRadiusY = radii[1];\r\n//       return this.redraw();\r\n//   },\r\n\r\n//   getRadius: function () {\r\n//       return new L.point(this._mRadiusX, this._mRadiusY);\r\n//   },\r\n\r\n//   setTilt: function (tilt) {\r\n//       this._tiltDeg = tilt;\r\n//       return this.redraw();\r\n//   },\r\n\r\n//   getBounds: function () {\r\n//       // TODO respect tilt (bounds are too big)\r\n//       var lngRadius = this._getLngRadius(),\r\n//           latRadius = this._getLatRadius(),\r\n//           latlng = this._latlng;\r\n\r\n//       return new L.LatLngBounds(\r\n//           [latlng.lat - latRadius, latlng.lng - lngRadius],\r\n//           [latlng.lat + latRadius, latlng.lng + lngRadius]);\r\n//   },\r\n\r\n//   // @method setLatLng(latLng: LatLng): this\r\n//   // Sets the position of a circle marker to a new location.\r\n//   setLatLng: function (latlng) {\r\n//       this._latlng = L.latLng(latlng);\r\n//       this.redraw();\r\n//       return this.fire('move', {latlng: this._latlng});\r\n//   },\r\n\r\n//   // @method getLatLng(): LatLng\r\n//   // Returns the current geographical position of the circle marker\r\n//   getLatLng: function () {\r\n//       return this._latlng;\r\n//   },\r\n\r\n//   setStyle: L.Path.prototype.setStyle,\r\n\r\n//   _project: function () {\r\n//       var lngRadius = this._getLngRadius(),\r\n//           latRadius = this._getLatRadius(),\r\n//           latlng = this._latlng,\r\n//           pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]),\r\n//           pointBelow = this._map.latLngToLayerPoint([latlng.lat - latRadius, latlng.lng]);\r\n\r\n//       this._point = this._map.latLngToLayerPoint(latlng);\r\n//       this._radiusX = Math.max(this._point.x - pointLeft.x, 1);\r\n//       this._radiusY = Math.max(pointBelow.y - this._point.y, 1);\r\n//       this._tilt = Math.PI * this._tiltDeg / 180;\r\n//       this._endPointParams = this._centerPointToEndPoint();\r\n//       this._updateBounds();\r\n//   },\r\n\r\n//   _updateBounds: function () {\r\n//       // http://math.stackexchange.com/questions/91132/how-to-get-the-limits-of-rotated-ellipse\r\n//       var sin = Math.sin(this._tilt);\r\n//       var cos = Math.cos(this._tilt);\r\n//       var sinSquare = sin * sin;\r\n//       var cosSquare = cos * cos;\r\n//       var aSquare = this._radiusX * this._radiusX;\r\n//       var bSquare = this._radiusY * this._radiusY;\r\n//       var halfWidth = Math.sqrt(aSquare*cosSquare+bSquare*sinSquare);\r\n//       var halfHeight = Math.sqrt(aSquare*sinSquare+bSquare*cosSquare);\r\n//       var w = this._clickTolerance();\r\n//       var p = [halfWidth + w, halfHeight + w];\r\n//       this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\r\n//   },\r\n\r\n//   _update: function () {\r\n//       if (this._map) {\r\n//           this._updatePath();\r\n//       }\r\n//   },\r\n\r\n//   _updatePath: function () {\r\n//       this._renderer._updateEllipse(this);\r\n//   },\r\n\r\n//   _getLatRadius: function () {\r\n//       return (this._mRadiusY / 40075017) * 360;\r\n//   },\r\n\r\n//   _getLngRadius: function () {\r\n//       return ((this._mRadiusX / 40075017) * 360) / Math.cos((Math.PI / 180) * this._latlng.lat);\r\n//   },\r\n\r\n//   _centerPointToEndPoint: function () {\r\n//       // Convert between center point parameterization of an ellipse\r\n//       // too SVG's end-point and sweep parameters.  This is an\r\n//       // adaptation of the perl code found here:\r\n//       // http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths\r\n//       var c = this._point,\r\n//           rx = this._radiusX,\r\n//           ry = this._radiusY,\r\n//           theta2 = (this.options.startAngle + this.options.endAngle) * (Math.PI / 180),\r\n//           theta1 = this.options.startAngle * (Math.PI / 180),\r\n//           delta = this.options.endAngle,\r\n//           phi = this._tiltDeg * (Math.PI / 180);\r\n\r\n//       // Determine start and end-point coordinates\r\n//       var x0 = c.x + Math.cos(phi) * rx * Math.cos(theta1) +\r\n//           Math.sin(-phi) * ry * Math.sin(theta1);\r\n//       var y0 = c.y + Math.sin(phi) * rx * Math.cos(theta1) +\r\n//           Math.cos(phi) * ry * Math.sin(theta1);\r\n\r\n//       var x1 = c.x + Math.cos(phi) * rx * Math.cos(theta2) +\r\n//           Math.sin(-phi) * ry * Math.sin(theta2);\r\n//       var y1 = c.y + Math.sin(phi) * rx * Math.cos(theta2) +\r\n//           Math.cos(phi) * ry * Math.sin(theta2);\r\n\r\n//       var largeArc = (delta > 180) ? 1 : 0;\r\n//       var sweep = (delta > 0) ? 1 : 0;\r\n\r\n//       return {'x0': x0, 'y0': y0, 'tilt': phi, 'largeArc': largeArc,\r\n//           'sweep': sweep, 'x1': x1, 'y1': y1};\r\n//   },\r\n\r\n//   _empty: function () {\r\n//       return this._radiusX && this._radiusY && !this._renderer._bounds.intersects(this._pxBounds);\r\n//   },\r\n\r\n//   _containsPoint : function (p) {\r\n//       // http://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\r\n//       var sin = Math.sin(this._tilt);\r\n//       var cos = Math.cos(this._tilt);\r\n//       var dx = p.x - this._point.x;\r\n//       var dy = p.y - this._point.y;\r\n//       var sumA = cos * dx + sin * dy;\r\n//       var sumB = sin * dx - cos * dy;\r\n//       return sumA * sumA / (this._radiusX * this._radiusX)  + sumB * sumB / (this._radiusY * this._radiusY) <= 1;\r\n//   }\r\n// });\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Ellipse.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017-6-15\r\n */\r\nimport { coattail } from '@/utils/Bezier';\r\nlet { Polyline, Polygon, point: toPoint } = L;\r\nlet { _projectLatlngs, toGeoJSON } = Polyline.prototype\r\n/**\r\n * 军标箭头\r\n */\r\nexport default Polyline.extend({\r\n  /**\r\n   * @param options\r\n   */\r\n  options: {\r\n    fill: true,\r\n    noClip: true\r\n  },\r\n  /**\r\n   * @override\r\n   */\r\n  _projectLatlngs(latlngs, result, projectedBounds) {\r\n    let temp = [];\r\n    _projectLatlngs.call(this, latlngs, temp, projectedBounds);\r\n    temp = temp[0].map(p => [p.x, p.y]);\r\n    temp = coattail(temp, 0.005, this.options);\r\n    result = result[0] = [];\r\n    for (let i = 0, l = temp.length; i < l; i++) {\r\n      result[i] = toPoint(temp[i][0], temp[i][1]);\r\n      projectedBounds.extend(result[i]);\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _containsPoint(p) {\r\n    return Polygon.prototype._containsPoint.call(this, p, true);\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let json = toGeoJSON.call(this);\r\n    json.geometry.type = 'MilitaryArrow'\r\n    return json;\r\n  }\r\n\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/feature/MilitaryArrow.js","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/listToStyles.js\n// module id = 22\n// module chunks = 0 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2016-11-4\r\n */\r\nimport lonlats from '@/utils/LonLats';\r\nimport Popup from '@/polyfill/Popup';\r\nimport VectorMarker from '@/feature/VectorMarker';\r\nimport Typhoon from \"@/feature/Typhoon\";\r\nimport Ellipse from '@/feature/Ellipse';\r\nimport \"@/feature/Text\";\r\nimport '@/feature/Heat';\r\nimport River from '@/feature/River';\r\nimport MilitaryArrow from '@/feature/MilitaryArrow';\r\nimport 'overlapping-marker-spiderfier-leaflet/build/oms';\r\n// import { AntPath, antPath } from 'leaflet-ant-path';\r\n//\r\nlet {\r\n  isFunction,\r\n  isArray,\r\n  fmt,\r\n  assign: $assign\r\n} = T;\r\nlet {\r\n  featureGroup: toGroup,\r\n  marker: toMarker,\r\n  polyline: toPolyline,\r\n  polygon: toPolygon,\r\n  circle: toCircle,\r\n  tooltip: toTooltip,\r\n  icon: toIcon,\r\n  divIcon: toDivIcon,\r\n  imageOverlay: toImageOverlay\r\n} = L;\r\nlet toArray = data => isArray(data) ? data : [data];\r\nlet toOptions = (options, data) => isFunction(options) ? options(data) : options || {};\r\n/**\r\n * 要素管理的通用图层\r\n */\r\nexport default class FeatureLayer extends T.Class {\r\n  dmap;\r\n  map;\r\n  info; // 预留，提供给菜单，用于绑定检索\r\n  options; // 样式，图层配置\r\n  /**\r\n   * \r\n   * @param {*} options \r\n   */\r\n  constructor(options) {\r\n    super();\r\n    this.initHook();\r\n    // 台风模块需要设置预报机构\r\n    this.config(options);\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  initHook() {\r\n    let that = this;\r\n    that._source = [];\r\n    ['addPoints', 'addPolylines', 'addPolygons', 'addTyphoon', 'addAlarmLines'].forEach(name => {\r\n      this.addFnHook(name, {\r\n        precall: function () {\r\n          let data = {\r\n            fn: name,\r\n            args: arguments\r\n          };\r\n          that._source.push(data)\r\n          T.defer(() => {\r\n            this.do('feature-add', data)\r\n          })\r\n        }\r\n      })\r\n    })\r\n    this.addFnHook('clear', {\r\n      precall: function () {\r\n        that._source.length = 0;\r\n        T.defer(() => {\r\n          that.do('feature-clear');\r\n        })\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 连接，复制\r\n   * @param {*} layer \r\n   */\r\n  connect(layer) {\r\n    let {\r\n      options,\r\n      _source\r\n    } = this;\r\n    layer.options = options;\r\n    _source.forEach(item => {\r\n      layer[item.fn].apply(layer, item.args);\r\n    });\r\n    //\r\n    this.on(\"feature-add\", e => {\r\n      layer[e.fn].apply(layer, e.args);\r\n    }).on('feature-clear', () => {\r\n      layer.clear();\r\n    })\r\n  }\r\n  /**\r\n   * 配置\r\n   * @param options \r\n   */\r\n  config(options) {\r\n    this.options = options;\r\n    this.layer = toGroup();\r\n  }\r\n  /**\r\n   * 判断图元是否存在\r\n   * @param {*} marker \r\n   */\r\n  has(marker) {\r\n    return this.layer.hasLayer(marker)\r\n  }\r\n  /**\r\n   * 获取所有图层\r\n   */\r\n  getMarkers() {\r\n    return this.layer.getLayers();\r\n  }\r\n  /**\r\n   * 添加图元\r\n   * @param {*} feature \r\n   */\r\n  _add(feature) {\r\n    this.layer.addLayer(feature);\r\n  }\r\n  /**\r\n   * 添加图元，并绑定tooltip、popup、text\r\n   * @param feature \r\n   */\r\n  add(feature, options, data) {\r\n    if (feature) {\r\n      feature.__data = data;\r\n      this._add(feature);\r\n      this._bindToolTip(feature, options, data);\r\n      this._bindPopup(feature, options, data);\r\n      this._bindText(feature, options, data);\r\n      //\r\n    }\r\n  }\r\n  /**\r\n   * 添加点图元\r\n   * @param data [{coordinates:[lon,lat] or [{lon,lat}] or [{lat,lng}]\r\n   * @param style\r\n   */\r\n  addPoints(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let feature = this.createPoint(item, featureOptions);\r\n      this.add(feature, featureOptions, item);\r\n      return feature;\r\n    });\r\n  }\r\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addClusterPoints(data, options) {\r\n    let group = L.markerClusterGroup();\r\n    let {\r\n      layer,\r\n      _bindToolTip,\r\n      _bindPopup\r\n    } = this;\r\n    layer.addLayer(group);\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPoint(item, featureOptions);\r\n      if (marker) {\r\n        marker.__data = item;\r\n        _bindToolTip(marker, featureOptions, item);\r\n        _bindPopup(marker, featureOptions, item);\r\n        group.addLayer(marker);\r\n      }\r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加聚合点\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addClusterPoints2(data, options) {\r\n    let group = this.oms = this.oms || new L.OverlappingMarkerSpiderfier(this.map);\r\n    let markers = this.addPoints(data, options)\r\n    markers.forEach(marker => {\r\n      group.addMarker(marker)\r\n    })\r\n  }\r\n  /**\r\n   * 添加线图元\r\n   * @param {*} data\r\n   * @param {*} options\r\n   */\r\n  addPolylines(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPolyLine(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部 \r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加多边形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addPolygons(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createPolygon(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部\r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加圆形图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   *  \r\n   */\r\n  addCircles(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createCircle(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack() // 暂时底部\r\n    });\r\n  }\r\n  /**\r\n   * 添加椭圆\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addEllipses(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = this.createEllipse(item, featureOptions);\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack() // 暂时底部\r\n    });\r\n  }\r\n  /**\r\n   * 添加文本图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addTexts(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let marker = L.text(lonlats(item.coordinates || item), item.text || item.properties.text, featureOptions.feature || featureOptions);\r\n      marker.__data = item;\r\n      this.layer.addLayer(marker);\r\n    })\r\n  }\r\n  /**\r\n   * 添加河流\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addRivers(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let {\r\n        feature\r\n      } = featureOptions;\r\n      let {\r\n        coordinates\r\n      } = item;\r\n      let deep = (coordinates[0] && isArray(coordinates[0][0])) ? 2 : 1;\r\n      let marker = new River(lonlats(coordinates, deep), feature)\r\n      this.layer.addLayer(marker);\r\n    })\r\n  }\r\n  /**\r\n   * 添加图片图元(雷达图、云图)\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addImage(data, options) {\r\n    let marker = toImageOverlay(options.url, lonlats(data.coordinates, 1), options);\r\n    this.layer.addLayer(marker);\r\n    return marker;\r\n  }\r\n  /**\r\n   * 添加军标箭头\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addMilitaryArrows(data, options) {\r\n    return toArray(data).map(item => {\r\n      let featureOptions = toOptions(options, item);\r\n      let {\r\n        feature\r\n      } = featureOptions;\r\n      let {\r\n        coordinates\r\n      } = item, deep = 1;\r\n      if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\r\n        deep = 2;\r\n      }\r\n      let marker = new MilitaryArrow(lonlats(coordinates, deep), feature)\r\n      this.add(marker, featureOptions, item);\r\n      marker.bringToBack(); //暂时底部 \r\n      return marker;\r\n    });\r\n  }\r\n  /**\r\n   * 添加台风 \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addTyphoon(data, options) {\r\n    let typhoons = this.typhoons || (this.typhoons = {});\r\n    let feature = typhoons[data.tfbh];\r\n    let featureOptions = toOptions(options || this.options);\r\n    if (!feature) {\r\n      feature = typhoons[data.tfbh] = this.createTyphoon(data, featureOptions)\r\n      feature.addTo(this);\r\n    } else { // 刷新\r\n      feature.update(data);\r\n    }\r\n    return feature;\r\n  }\r\n  /**\r\n   * 台风警戒线 \r\n   * @deprecated 慎用，可能被废弃\r\n   * @param data {\r\n   *  g24: [[105, 0], [113, 4.5], [119, 11], [119, 18], [127, 22], [127, 34]],\r\n   *  s24: { color: '#0000FF', opacity: 1, weight: 1, dashArray: '10,3', interactive: false },\r\n   *  g48: [[105, 0], [120, 0], [132, 15], [132, 34]],\r\n   *  s48: { color: '#FFFF00', opacity: 1, weight: 1, dashArray: '10,3', interactive: false } \r\n   * }\r\n   */\r\n  addAlarmLines(data) {\r\n    if (!data) return;\r\n    let {\r\n      layer\r\n    } = this;\r\n    let createPolyline = (coor, options) => toPolyline(lonlats(coor, 1), options)\r\n    let m48 = createPolyline(data.g48, data.s48);\r\n    let m24 = createPolyline(data.g24, data.s24);\r\n    layer.addLayer(m48).addLayer(m24);\r\n  }\r\n  /**\r\n   * 添加热力图\r\n   * @param data\r\n   * @param options\r\n   */\r\n  addHeat(data, options) {\r\n    options = toOptions(options);\r\n    let marker = L.heat(lonlats(data, 1), options.feature);\r\n    return this.add(marker, options, data), marker;\r\n  }\r\n  /**\r\n   * todo:\r\n   * 1、支持4326投影\r\n   * @param data\r\n   * @param options \r\n   */\r\n  addVelocity(data, options) {\r\n    return new Promise((resolve) => {\r\n      T.require(['dmap/leaflet/plugins/velocityLayer'], ({\r\n        default: createLayer\r\n      }) => {\r\n        let marker = createLayer(data, options);\r\n        this._add(marker);\r\n        resolve(marker);\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  addWindy(data, options) {\r\n    return new Promise(resolve => {\r\n      T.require(['dmap/leaflet/plugins/windyLayer'], ({\r\n        default: createWindyLayer\r\n      }) => {\r\n        options = T.assign({\r\n          tempOverlay: true\r\n        }, options);\r\n        //\r\n        let {\r\n          windfarm\r\n        } = this;\r\n        if (windfarm && windfarm.options.tempOverlay === options.tempOverlay) {\r\n          windfarm.loadWindy(data)\r\n        } else {\r\n          windfarm && windfarm.removeFrom(this.layer);\r\n          windfarm = this.windfarm = createWindyLayer(options);\r\n          this._add(windfarm);\r\n          windfarm.loadWindy(data);\r\n        }\r\n        resolve(windfarm);\r\n      })\r\n    })\r\n  }\r\n  /**\r\n   * 添加 shp 图层\r\n   */\r\n  addShp(url, options) {\r\n    let layer = L.shapefile(url, options)\r\n    this._add(layer);\r\n    return layer;\r\n  }\r\n  /**\r\n   * @see https://github.com/Flexberry/Leaflet-WFST\r\n   * @see https://github.com/azgs/azgs-leaflet\r\n   */\r\n  addWFS(url, options) {\r\n    T.require(['dmap/leaflet/plugins/wfst'], ({\r\n      default: wfst\r\n    }) => {\r\n      options.url = url;\r\n      new L.WFST(options, new L.Format.GeoJSON({\r\n          crs: L.CRS.EPSG4326\r\n        }))\r\n        .addTo(this.map)\r\n        .once('load', function () {\r\n          map.fitBounds(wfst);\r\n        });\r\n    })\r\n  }\r\n  /**\r\n   * 添加 geojson 图层  \r\n   * @param {*} geojson \r\n   * @see https://leafletjs.com/reference-1.3.0.html#geojson\r\n   */\r\n  addGeoJSON(geojson, options) {\r\n    let geometry = geojson.type === 'Feature' ? geojson.geometry : geojson;\r\n    let coords = geometry ? geometry.coordinates : null;\r\n    let type = geometry.type;\r\n    if (!coords && !geometry) {\r\n      return null;\r\n    }\r\n    options = isFunction(options) ? options : $assign({}, options, geometry.properties);\r\n    switch (type) {\r\n      case 'MultiPoint':\r\n        geojson = coords.map(coordinates => {\r\n          return {\r\n            coordinates,\r\n            properties: geometry.properties\r\n          }\r\n        })\r\n      case 'Point':\r\n        return this.addPoints(geojson, options);\r\n      case 'LineString':\r\n      case 'MultiLineString':\r\n        // { coordinates: lonlats(coords, type === 'LineString' ? 0 : 1) }\r\n        return this.addPolylines(geometry, options)\r\n      case 'Polygon':\r\n      case 'MultiPolygon':\r\n        // { coordinates: lonlats(coords, type === 'Polygon' ? 1 : 2) }\r\n        return this.addPolygons(geometry, options);\r\n      case 'GeometryCollection':\r\n        return geometry.geometries.map(data => this.addGeoJSON(data, options));\r\n        // 拓展 geojson 的类型\r\n      case 'Circle':\r\n        return this.addCircles(geometry, options);\r\n      case 'Ellipse':\r\n        return this.addEllipses(geometry, options);\r\n      case 'Text':\r\n        return this.addTexts(geometry, options);\r\n      case 'MilitaryArrow': //军标箭头\r\n        return this.addMilitaryArrows(geometry, options);\r\n    }\r\n  }\r\n  /**\r\n   * 批量移除台风\r\n   */\r\n  removeTyphoons(ids) {\r\n    let {\r\n      typhoons\r\n    } = this;\r\n    if (typhoons) {\r\n      ids = ids || Object.keys(typhoons);\r\n      T.each(ids, id => {\r\n        var typhoon = typhoons[id];\r\n        if (typhoon) {\r\n          typhoon.remove();\r\n          delete typhoons[id];\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 获取台风对象\r\n   * @param {*} id\r\n   */\r\n  getTyphoon(id) {\r\n    let {\r\n      typhoons\r\n    } = this;\r\n    return id === void 0 ? typhoons : typhoons && typhoons[id];\r\n  }\r\n  /**\r\n   * 创建台风对象\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createTyphoon(data, options) {\r\n    return new Typhoon(data, options);\r\n  }\r\n  /**\r\n   * 点图元工厂\r\n   * @param {*} data\r\n   * @param {*} options {feature:{icon,symbol,glowOptions,flowOptions}}\r\n   */\r\n  createPoint(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      tag,\r\n      src\r\n    } = feature || {};\r\n    //\r\n    let latlng = lonlats(data.coordinates || data);\r\n    if (latlng) {\r\n      if (tag) {\r\n        switch (tag) {\r\n          case 'img':\r\n            let anchor = feature.offset;\r\n            if (anchor) {\r\n              anchor = [-anchor[0], -anchor[1]];\r\n            }\r\n            feature.icon = toIcon($assign({\r\n              iconUrl: src,\r\n              iconAnchor: anchor,\r\n              // iconSize: [38, 95],\r\n              // popupAnchor: [-3, -76],\r\n              // shadowUrl: 'shadow.png',\r\n              // shadowSize: [68, 95],\r\n              // shadowAnchor: [22, 94]\r\n            }, feature.icon));\r\n            break;\r\n          case 'div':\r\n            feature.icon = toDivIcon($assign({\r\n              iconAnchor: anchor\r\n            }, feature.icon))\r\n            break;\r\n        }\r\n        return toMarker(latlng, feature);\r\n      }\r\n      return new VectorMarker(latlng, feature);\r\n    }\r\n  }\r\n  /**\r\n   * 线图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createPolyLine(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      coordinates\r\n    } = data, deep = 1;\r\n    //todo\r\n    if (coordinates && coordinates[0] && isArray(coordinates[0][0])) {\r\n      deep = 2;\r\n    }\r\n    return toPolyline(lonlats(coordinates, deep), feature);\r\n  }\r\n\r\n  /**\r\n   * 多边形图元工厂\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createPolygon(data, options) {\r\n    let {\r\n      feature\r\n    } = options;\r\n    let {\r\n      coordinates\r\n    } = data;\r\n    let deep = (coordinates && coordinates[0] && isArray(coordinates[0][0])) ? 2 : 1;\r\n    // 数据错误，容错下，标绘\r\n    if (!isArray(coordinates[0])) {\r\n      coordinates = [coordinates];\r\n    }\r\n    return toPolygon(lonlats(coordinates, deep), feature);\r\n  }\r\n  /**\r\n   * 创建圆形图元\r\n   * @param {*} data\r\n   * @param {*} options \r\n   */\r\n  createCircle(data, options) {\r\n    return toCircle(lonlats(data.coordinates), options.feature);\r\n  }\r\n  /**\r\n   * 创建椭圆图元\r\n   * @param {*} data \r\n   * @param {*} options \r\n   */\r\n  createEllipse(data, options) {\r\n    return new Ellipse(lonlats(data.coordinates), options.feature);\r\n  }\r\n  /**\r\n   * 绑定 tooltip ，浮出层，一般用于显示站名\r\n   * @param marker \r\n   * @param options \r\n   * @param data \r\n   */\r\n  _bindToolTip(marker, options, data) {\r\n    if (options = options.tooltip) {\r\n      let {\r\n        text\r\n      } = options;\r\n      let tooltip = (data && typeof text == 'string') ? fmt(text, data.properties || data) : text;\r\n      //\r\n      if (tooltip) {\r\n        // options.interactive = true;\r\n        // tooltip = toTooltip(options, marker).setContent(tooltip);\r\n        marker.bindTooltip(tooltip, options);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 绑定 popup 弹出层，一般用于显示报图\r\n   * @param marker \r\n   * @param options \r\n   */\r\n  _bindPopup(marker, options) {\r\n    options = options.popup;\r\n    if (options) {\r\n      let popup = new Popup(options).setContent(options.text);\r\n      marker.bindPopup(popup, options);\r\n      // marker.bindPopup(options.text, options);\r\n    }\r\n  }\r\n  /**\r\n   * 绑定静态文本，一般用于面和线上的文本显示\r\n   */\r\n  _bindText(marker, options) {\r\n    options = options.text;\r\n    if (options) {\r\n      marker.bindText(options.text, options);\r\n    }\r\n  }\r\n  /**\r\n   * @deprecated 慎用，这个方法可能会被弃用\r\n   */\r\n  updateTooltips() {\r\n    this.map && this.map.eachLayer(layer => {\r\n      let tooltip = layer.getTooltip();\r\n      tooltip && tooltip.isOpen && tooltip.update()\r\n    });\r\n  }\r\n  /**\r\n   * 隐藏标注，常用于水雨情设置模块\r\n   * @param hide\r\n   */\r\n  hideTooltip(hide) {\r\n    if (hide === void 0) hide = true;\r\n    this.layer.eachLayer(layer => {\r\n      let tooltip = layer.getTooltip();\r\n      if (tooltip) {\r\n        layer.hideTooltip(hide);\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * 清除\r\n   */\r\n  clear() {\r\n    this.layer.clearLayers();\r\n    this.typhoons = null;\r\n    return this;\r\n  }\r\n  /**\r\n   * 挂起\r\n   */\r\n  suspend() {\r\n    let {\r\n      map,\r\n      layer\r\n    } = this;\r\n    map && map.removeLayer(layer);\r\n    this.suspended = true;\r\n  }\r\n  /**\r\n   * 重启\r\n   */\r\n  resume() {\r\n    let {\r\n      map,\r\n      layer\r\n    } = this;\r\n    map && map.addLayer(layer);\r\n  }\r\n  /**\r\n   * 添加\r\n   * @param dmap \r\n   */\r\n  addTo(dmap) {\r\n    //\r\n    this.dmap = dmap;\r\n    this.map = dmap.map;\r\n    //\r\n    dmap.addLayer(this);\r\n    return this;\r\n  }\r\n  /**\r\n   * 移除\r\n   */\r\n  remove() {\r\n    this.dmap.removeLayer(this.layer);\r\n    this.dmap = null;\r\n    this.map = null;\r\n    return this;\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\r\n  on(types, fn, ctx) {\r\n    return this.layer.on(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx \r\n   */\r\n  once(types, fn, ctx) {\r\n    return this.layer.once(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param types \r\n   * @param fn \r\n   * @param ctx  \r\n   */\r\n  off(types, fn, ctx) {\r\n    return this.layer.off(types, fn, ctx);\r\n  }\r\n  /**\r\n   * \r\n   * @param {*} types \r\n   * @param {*} e \r\n   */\r\n  do(types, e) {\r\n    return this.layer.fire(types, e)\r\n  }\r\n  /**\r\n   * 导出 GeoJson\r\n   * @param precision\r\n   */\r\n  toGeoJSON(precision) {\r\n    let {\r\n      layer\r\n    } = this;\r\n    let jsons = [];\r\n    layer.eachLayer(layer => {\r\n      if (layer.toGeoJSON) {\r\n        let json = layer.toGeoJSON(precision);\r\n        let {\r\n          geometry,\r\n          properties\r\n        } = json;\r\n        let {\r\n          __data: data,\r\n          options\r\n        } = layer;\r\n        let tooltip = layer.getTooltip();\r\n        let text = layer.getText();\r\n\r\n        //\r\n        geometry.properties = $assign(properties, geometry.properties, data && data.properties, {\r\n          feature: options,\r\n          tooltip: tooltip && tooltip.options,\r\n          text: text && text.options\r\n        });\r\n        geometry.properties.feature.className = ''; //暂时设置为空\r\n        jsons.push(geometry);\r\n      }\r\n    });\r\n    //\r\n    return {\r\n      geometries: jsons,\r\n      type: 'GeometryCollection'\r\n    };\r\n    //\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/layer/FeatureLayer.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\n/**\r\n *  @param {boolean} restart 重新启动\r\n */\r\nexport default class Tool {\r\n  /**\r\n   * \r\n   */\r\n  initMouseDownHandler() {\r\n    this.onMouseDown = this.onMouseDown || (e => {\r\n      if (e.originalEvent.button == 0) {\r\n        this._onMouseDown(e);\r\n      }\r\n    })\r\n  }\r\n  /**\r\n   * \r\n   * @param options \r\n   */\r\n  setOptions(options) {\r\n    T.assign(this.options, options);\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  reback() {\r\n    let { marker, layer, history } = this;\r\n    if (marker) {\r\n      if (marker._defaultShape) {//线/面\r\n        let latlngs = marker._defaultShape();\r\n        let latlng = latlngs.pop();\r\n        if (latlng) {\r\n          history.push(latlng);\r\n          marker.setLatLngs(latlngs);\r\n        } else {\r\n          marker.removeFrom(layer);\r\n          return true;\r\n        }\r\n      } else {\r\n        marker.removeFrom(layer);\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  restore() {\r\n    let { marker, layer, history } = this;\r\n    if (marker) {\r\n      marker.addTo(layer);\r\n      //\r\n      if (marker._defaultShape && history.length > 0) {//线/面\r\n        let latlngs = marker._defaultShape();\r\n        let latlng = history.pop();\r\n        latlngs.push(latlng);\r\n        marker.setLatLngs(latlngs);\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 绘制结束\r\n   * @param e \r\n   */\r\n  onEnd(e) {\r\n    //\r\n    this.history = [];\r\n    //\r\n    this.dmap.do('draw-end', { target: this, marker: this.marker });\r\n  }\r\n  /**\r\n   * 清除图元，用于重置工具，重复绘制，或者取消绘制\r\n   */\r\n  clear() {\r\n    let { marker } = this;\r\n    marker && marker.remove();\r\n  }\r\n  /**\r\n   * 重置\r\n   */\r\n  reset() {\r\n    if (this.restart) {\r\n      this.clear();\r\n      this.restart = false;\r\n      this.marker = null;\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n\r\n  }\r\n  /**\r\n   * 创建\r\n   * @param control \r\n   */\r\n  static create(owner, options) {\r\n    let tool = new this();\r\n    tool.owner = owner;\r\n    tool.dmap = owner.dmap;\r\n    tool.map = owner.map;\r\n    tool.layer = owner.layer;\r\n    tool.data = options.data;//包含layerid，用于标绘的测站类型id标识\r\n    tool.setOptions(options)\r\n    return tool;\r\n  }\r\n  /**\r\n   * 复制工具\r\n   */\r\n  clone() {\r\n    return this.constructor.create(this.owner, this.options)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/Tool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2016.11.4\r\n * 台风图元\r\n */\r\nimport lonlats from '../utils/LonLats';\r\nimport Quadrant from '../feature/Quadrant';\r\nimport Popup from '../polyfill/Popup';\r\nimport VectorMarker from './VectorMarker'\r\nlet {\r\n  marker: toMarker,\r\n  canvas: toCanvas,\r\n  polyline: toPolyline,\r\n  circle: toCircle,\r\n  circleMarker,\r\n  divIcon: toDivIcon,\r\n  tooltip: toTooltip,\r\n  featureGroup: toFeatureGroup,\r\n  latLng: toLatLng\r\n} = L;\r\nlet {\r\n  assign: $assign\r\n} = T;\r\n\r\n// svg[Attributes]{\r\n//   stroke - linejoin: round;\r\n//   stroke - linecap: round;\r\n//   pointer - events: none;\r\n//   stroke: rgb(0, 150, 255);\r\n//   stroke - opacity: 0.8;\r\n//   stroke - width: 3;\r\n//   fill: none;\r\n// }\r\n\r\n/**\r\n * 台风图元\r\n * @class Typhoon\r\n * todo: 用 FeatureGroup 重构\r\n */\r\nexport default class Typhoon {\r\n  /**\r\n   * 配置信息\r\n   */\r\n  options = {\r\n    // 自动播放\r\n    autoPlay: true,\r\n    // 是否绘制台风路径\r\n    hasLsljLater: true,\r\n    // 确保台风在视野范围内\r\n    inView: true,\r\n    // 当inview=true且keepZoom=true,确保视野范围的时候不缩放地图\r\n    keepZoom: true,\r\n    // 点击是否根据路径点重新绘制台风\r\n    click2drawOnTime: true,\r\n    // 是否对路径点进行碰撞检测、抽稀\r\n    hitForPoint: true,\r\n    // 历史路径\r\n    ls: {\r\n      color: '#0096FF',\r\n      weight: 3,\r\n      opacity: .8,\r\n      interactive: false\r\n    },\r\n    // 历史路径-灰色\r\n    lsyb: {\r\n      color: '#666666',\r\n      weight: 2,\r\n      opacity: .8,\r\n      interactive: false\r\n    },\r\n    // 预报机构,预报路径点\r\n    org: {\r\n      weight: 1,\r\n      dashArray: '10,3',\r\n      interactive: false\r\n    },\r\n    orgs: [{\r\n        label: \"中国\",\r\n        th: \"CN\",\r\n        color: \"#FF4050\"\r\n      },\r\n      {\r\n        label: \"韩国\",\r\n        th: \"KR\",\r\n        color: \"#000000\"\r\n      },\r\n      {\r\n        label: \"美国\",\r\n        th: \"US\",\r\n        color: \"#4099EE\"\r\n      },\r\n      {\r\n        label: \"中国台湾\",\r\n        th: \"TW\",\r\n        color: \"#FFA040\"\r\n      },\r\n      {\r\n        label: \"日本\",\r\n        th: \"JP\",\r\n        color: \"#43FF4B\"\r\n      },\r\n      {\r\n        label: \"中国香港\",\r\n        th: \"HK\",\r\n        color: \"#FF40F5\"\r\n      }\r\n    ],\r\n    // 台风等级\r\n    grade: {\r\n      color: '#000',\r\n      radius: 4,\r\n      fillColor: '#FFF',\r\n      weight: 1,\r\n      fillOpacity: 1,\r\n      src: 'circle'\r\n    },\r\n    grades: [{\r\n        F1: 0,\r\n        F2: 0.2\r\n      },\r\n      {\r\n        F1: 0.3,\r\n        F2: 1.5\r\n      },\r\n      {\r\n        F1: 1.6,\r\n        F2: 3.3\r\n      },\r\n      {\r\n        F1: 3.4,\r\n        F2: 5.4\r\n      },\r\n      {\r\n        F1: 5.5,\r\n        F2: 7.9\r\n      },\r\n      {\r\n        F1: 8,\r\n        F2: 10.7\r\n      },\r\n      {\r\n        F1: 10.8,\r\n        F2: 13.8,\r\n        fillColor: '#00FF03',\r\n        GRADENAME: '热带低压'\r\n      },\r\n      {\r\n        F1: 13.95,\r\n        F2: 17.15,\r\n        fillColor: '#00FF03',\r\n        GRADENAME: '热带低压'\r\n      },\r\n      {\r\n        F1: 17.2,\r\n        F2: 20.7,\r\n        fillColor: '#0062FE',\r\n        GRADENAME: '热带风暴'\r\n      },\r\n      {\r\n        F1: 20.8,\r\n        F2: 24.4,\r\n        fillColor: '#0062FE',\r\n        GRADENAME: '热带风暴'\r\n      },\r\n      {\r\n        F1: 24.5,\r\n        F2: 28.4,\r\n        fillColor: '#FDFA00',\r\n        GRADENAME: '强热带风暴'\r\n      },\r\n      {\r\n        F1: 28.5,\r\n        F2: 32.6,\r\n        fillColor: '#FDFA00',\r\n        GRADENAME: '强热带风暴'\r\n      },\r\n      {\r\n        F1: 32.7,\r\n        F2: 36.9,\r\n        fillColor: '#FDAC03',\r\n        GRADENAME: '台风'\r\n      },\r\n      {\r\n        F1: 37,\r\n        F2: 41.4,\r\n        fillColor: '#FDAC03',\r\n        GRADENAME: '台风'\r\n      },\r\n      {\r\n        F1: 41.5,\r\n        F2: 46.1,\r\n        fillColor: '#F072F6',\r\n        GRADENAME: '强台风'\r\n      },\r\n      {\r\n        F1: 46.2,\r\n        F2: 50.9,\r\n        fillColor: '#F072F6',\r\n        GRADENAME: '强台风'\r\n      },\r\n      {\r\n        F1: 51,\r\n        F2: 56,\r\n        fillColor: '#FD0002',\r\n        GRADENAME: '超强台风'\r\n      },\r\n      {\r\n        F1: 56.1,\r\n        F2: 161.2,\r\n        fillColor: '#FD0002',\r\n        GRADENAME: '超强台风'\r\n      }\r\n    ],\r\n    // 台风风圈\r\n    c7: {\r\n      fillColor: '#79C0AE',\r\n      fillOpacity: 0.5,\r\n      color: '#49BA6E',\r\n      weight: 1\r\n    },\r\n    c10: {\r\n      fillColor: '#FFFF00',\r\n      fillOpacity: 0.2,\r\n      color: '#FFFF00',\r\n      weight: 1\r\n    },\r\n    c12: {\r\n      fillColor: '#FF0000',\r\n      fillOpacity: 0.3,\r\n      color: '#FF0000',\r\n      weight: 1\r\n    },\r\n    // 台风登陆地\r\n    land: {\r\n      src: T + 'assets/common/dmap/markers/flag.png'\r\n    }\r\n    // 台风风眼\r\n    // hurricane: {iconUrl: T + \"assets/common/dmap/markers/typhoonIco.gif\",iconSize: [32, 32]}\r\n    // \r\n  }\r\n  // \r\n  group = toFeatureGroup();\r\n  //\r\n  /**\r\n   * \r\n   * @param {*} data \r\n   * @param {*} style \r\n   */\r\n  constructor(data, options) {\r\n    this.data = T.action(data);\r\n    options = $assign(this.options, options);\r\n    options.grades = options.grades.map(val => $assign({}, options.grade, val));\r\n    //\r\n    this._points = [];\r\n  }\r\n  /**\r\n   * 动态改变预报机构集合。\r\n   * @param {*} options \r\n   */\r\n  setOptions(options) {\r\n    $assign(this.options, options);\r\n    this.update();\r\n  }\r\n  /**\r\n   * 更新重绘\r\n   */\r\n  update(data) {\r\n    if (data && data !== this.data) { //最新台风实时数据刷新\r\n      this.data = data;\r\n      this.ci = data.points.length - 1;\r\n    }\r\n    if (this.complete) {\r\n      this.draw(this.ci);\r\n    }\r\n  }\r\n  /**\r\n   * 创建路径点 \r\n   * @param coor\r\n   * @param options\r\n   * @param data\r\n   */\r\n  createPoint(coor, options, data) {\r\n    let marker = circleMarker(lonlats(coor), options);\r\n    data._source = this.data;\r\n    marker.__data = data;\r\n    // 创建弹出层\r\n    options = this.options.popup;\r\n    options && marker.bindPopup(new Popup(options), options);\r\n    return marker;\r\n  }\r\n  /**\r\n   * 创建登录地\r\n   */\r\n  createLand(coor, options) {\r\n    return new VectorMarker(lonlats(coor), options);\r\n  }\r\n  /**\r\n   * 创建路径线\r\n   * @param coor\r\n   * @param options\r\n   */\r\n  createPolyline(coor, options) {\r\n    return toPolyline(lonlats(coor, 1), options);\r\n  }\r\n  /**\r\n   * 创建风圈\r\n   * @param center\r\n   * @param radius\r\n   * @param options\r\n   */\r\n  createCicle(center, radius, options) {\r\n    return radius && toCircle(lonlats(center), radius * 1000, options);\r\n  }\r\n  /**\r\n   * 绘制四象风圈\r\n   * { ne, nw, sw, se}-> [ne, nw, sw, se]\r\n   * @param center\r\n   * @param radius\r\n   * @param style\r\n   */\r\n  createQuadrant(center, radius, style) {\r\n    if (!radius) return;\r\n    let {\r\n      ne,\r\n      nw,\r\n      sw,\r\n      se\r\n    } = radius;\r\n    if (!ne || !nw || !sw || !se) {\r\n      return;\r\n    }\r\n    this.renderer = this.renderer || toCanvas({\r\n      style: {\r\n        zIndex: 40\r\n      }\r\n    });\r\n    return new Quadrant([center[1], center[0]], $assign({}, style, {\r\n      renderer: this.renderer,\r\n      radius: [ne * 1000, nw * 1000, sw * 1000, se * 1000]\r\n    }))\r\n  }\r\n  /**\r\n   * 绘制飓风动画\r\n   * @param center\r\n   * @param options\r\n   */\r\n  createHurricane(center, options, grade) {\r\n    let colorIndex = parseInt((grade - 6) / 2) + 1;\r\n    return options ? toMarker(lonlats(center), {\r\n      icon: toDivIcon(options)\r\n    }) : new VectorMarker(lonlats(center), {\r\n      src: T + `assets/common/dmap/typhoon/hurricane${colorIndex > 0 ? colorIndex : 0}.png`,\r\n      rotate: true\r\n    })\r\n  }\r\n  /**\r\n   * draw\r\n   * {points}\r\n   * {radius7,radius10,radius12,radius7_quad,radius10_quad,radius12_quad}-> {r7,r10,r12,r7_q,r10_q,r12_q}\r\n   * {lng,lat} -> {lon,lat}\r\n   * {power,strong} 台风等级,台风等级对应名称\r\n   * {sets,points} 预报机构，预报路径\r\n   * @param time\r\n   * @property _points 缓存当前历史路径绘制的点图元\r\n   */\r\n  draw(time) {\r\n    let that = this;\r\n    let {\r\n      options,\r\n      data,\r\n      group,\r\n      lsp,\r\n      createPolyline,\r\n      createCicle,\r\n      _points\r\n    } = that;\r\n    let {\r\n      autoPlay,\r\n      ls,\r\n      lsyb,\r\n      grades,\r\n      c7,\r\n      c10,\r\n      c12,\r\n      org,\r\n      orgs,\r\n      hurricane,\r\n      hasLsljLater,\r\n      hitForPoint\r\n    } = options;\r\n    let createPoint = that.createPoint.bind(that);\r\n    let createLand = that.createLand.bind(that);\r\n    let createQuadrant = that.createQuadrant.bind(that);\r\n    let handleEvent = that.handleEvent.bind(that);\r\n    let {\r\n      points,\r\n      land\r\n    } = data;\r\n    let ci = this.getTimeIndex(points, time); //当前台风时间点，默认为台风消亡时间点\r\n    let len = points.length;\r\n    let addLayer = (value, index, array) => {\r\n      if (!value || (array === lsp && index > ci && autoPlay)) return;\r\n      group.addLayer(value);\r\n    }\r\n    let getDistance = (p1, p2) => Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\r\n    if (!that.tempLayer) {\r\n      that.tempLayer = toFeatureGroup();\r\n      group.addLayer(that.tempLayer);\r\n    }\r\n    let {\r\n      tempLayer\r\n    } = that;\r\n    let addTempLayer = (value, index, array) => {\r\n      if (!value || (array === lsp && index > ci && autoPlay)) return;\r\n      tempLayer.addLayer(value);\r\n    }\r\n    //\r\n    let drawing = (i, prev) => {\r\n      // 清除，点不能清除，因可能在播放过程显示Popup\r\n      tempLayer.clearLayers();\r\n      if (!i || i < prev) {\r\n        group.clearLayers();\r\n        group.addLayer(tempLayer);\r\n      }\r\n      // 声明\r\n      let lslj; // 历史路径\r\n      let lslj_yb; // 历史路径-灰色\r\n      let yblj = []; // 预报路径\r\n      let tffq = []; // 台风风圈\r\n      let landPoints = []; // 台风登陆地\r\n      // \r\n      let item = points[i];\r\n      //\r\n      let lslj_prev = points.slice(0, i + 1);\r\n      let lslj_after = points.slice(i);\r\n      let coor = [item.lng, item.lat];\r\n      // 绘制\"当前\"历史路径\r\n      if (lslj_prev.length > 1) {\r\n        lslj = createPolyline(lslj_prev, ls);\r\n      }\r\n      // 绘制\"未来\"历史路径-灰色\r\n      if (!autoPlay && hasLsljLater && lslj_after.length > 1) {\r\n        lslj_yb = createPolyline(lslj_after, lsyb);\r\n        lslj_prev = lslj_prev.concat(lslj_after.slice(1));\r\n      }\r\n      //\r\n      lsp.length = lslj_prev.length;\r\n      // 遍历历史路径点\r\n      lslj_prev.forEach((item, i) => {\r\n        // 抽稀\r\n        if (hitForPoint) {\r\n          // 获取当前路径点的像素坐标\r\n          let point = item._point = this.map.latLngToLayerPoint(toLatLng(item));\r\n          // 获取上个路径点的像素坐标\r\n          let point_prev = (i => {\r\n            while (i--) {\r\n              if (lsp[i]) return lslj_prev[i]._point;\r\n            }\r\n          })(i);\r\n          if (i > 0 && getDistance(point, point_prev) < 8) {\r\n            lsp[i] = null;\r\n            return;\r\n          }\r\n        }\r\n        // \r\n        let marker = lsp[i] = _points[i] = _points[i] || createPoint([item.lng, item.lat], grades[item.power || 0], item).on('click mouseover mouseout', handleEvent)\r\n        if (i === 0 && !marker.getTooltip()) {\r\n          let tooltip = toTooltip(T.merge({\r\n            zoom: 1,\r\n            direction: 'right',\r\n            offset: [5, 0],\r\n          }, this.options.tooltip), marker).setContent(data.tfbh + data.name);\r\n          marker.bindTooltip(tooltip);\r\n        }\r\n      })\r\n      // 登录地\r\n      landPoints = options.land && (land || []).map(data => {\r\n        let tm = T.clock(data.land_time);\r\n        let ctm = T.clock(item.time);\r\n        if (tm.date < ctm.date) {\r\n          let marker = createLand(data, options.land)\r\n          return marker;\r\n        }\r\n      })\r\n\r\n      // 绘制风圈和预报路径\r\n      if (autoPlay || i === ci) { //\r\n        let {\r\n          radius7_quad,\r\n          radius10_quad,\r\n          radius12_quad,\r\n          forecast\r\n        } = item;\r\n        // 绘制飓风动画和风圈\r\n        let h = that.createHurricane(coor, hurricane, item.power);\r\n        let r7 = createQuadrant(coor, radius7_quad, c7) || createCicle(coor, item.radius7, c7);\r\n        let r10 = createQuadrant(coor, radius10_quad, c10) || createCicle(coor, item.radius10, c10);\r\n        let r12 = createQuadrant(coor, radius12_quad, c12) || createCicle(coor, item.radius12, c12);\r\n        tffq.push(r7, r10, r12, h);\r\n        // 绘制预报路径：回溯 \r\n        if (!autoPlay || i === len - 1) {\r\n          let _points = [];\r\n          orgs.forEach(data => {\r\n            let sets = data.label; //预报机构名称\r\n            let index = i;\r\n            let item;\r\n            let point;\r\n            let search = {\r\n              sets: sets\r\n            };\r\n            while (!item && index >= 0) {\r\n              point = points[index--];\r\n              forecast = point.forecast;\r\n              item = forecast && T.find(forecast, search);\r\n            }\r\n            if (item) {\r\n              let {\r\n                sets,\r\n                points\r\n              } = item;\r\n              let style = $assign({}, org, T.find(orgs, {\r\n                label: sets\r\n              }));\r\n              yblj.push(createPolyline([point].concat(points), style));\r\n              //\r\n              points.forEach((item) => {\r\n                item.sets = sets; // 用于显示信息窗\r\n                // 抽稀\r\n                let point = item._point = this.map.latLngToLayerPoint(toLatLng(item));\r\n                if (hitForPoint) {\r\n                  for (let j = 0, len = _points.length; j < len; j++) {\r\n                    if (getDistance(point, _points[j]) < 8) {\r\n                      return;\r\n                    }\r\n                  }\r\n                }\r\n                _points.push(point);\r\n                //\r\n                yblj.push(createPoint(item, grades[item.power || 0], item).on('click mouseover mouseout', handleEvent))\r\n                //\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n      //\r\n      tffq.forEach(addTempLayer);\r\n      yblj.forEach(addTempLayer);\r\n      addTempLayer(lslj);\r\n      addTempLayer(lslj_yb);\r\n      lsp.forEach(addLayer);\r\n      landPoints.forEach(addTempLayer);\r\n      tempLayer.bringToBack();\r\n    }\r\n\r\n    if (autoPlay) {\r\n      let i = 0;\r\n      let playing = () => {\r\n        //init 防止播放过程中就被移除\r\n        if (this.init) {\r\n          if (i < len && that.layer) {\r\n            drawing(i, i - 1);\r\n            setTimeout(playing, 30);\r\n            i++;\r\n          } else if (that.layer) {\r\n            T.do('typhoon-playend', {\r\n              tf: data,\r\n              attr: points[i - 1]\r\n            })\r\n            options.autoPlay = false;\r\n            that.complete = true;\r\n          }\r\n          // \r\n          if ((i === len) && options.inView && !this.layer.suspended) {\r\n            (this.map && options.keepZoom) ? this.map.setView(points[i - 1]): this.map.fitBounds(toPolyline([\r\n              [30, 105],\r\n              [10, 125]\r\n            ].concat(points)).getBounds());\r\n          }\r\n        }\r\n      }\r\n      playing();\r\n    } else {\r\n      drawing(ci, that.ci);\r\n      T.do('typhoon-playend', {\r\n        tf: data,\r\n        attr: points[ci]\r\n      })\r\n      that.complete = true;\r\n    }\r\n    that.ci = ci;\r\n  }\r\n\r\n  /**\r\n   * 获取台风播放时间点\r\n   * @param data \r\n   * @param time \r\n   */\r\n  getTimeIndex(data, time) {\r\n    if (time !== void 0) {\r\n      return +time;\r\n    }\r\n    return data.length - 1;\r\n  }\r\n  /**\r\n   * 设置台风播放时间点\r\n   * @param time\r\n   */\r\n  setTimeIndex(time) {\r\n    if (this.ci !== time) {\r\n      if (this.complete) {\r\n        // 用于二三维一体化，同步台风历史路径\r\n        this.data.do('setTimeIndex', time)\r\n        this.draw(time);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param layer \r\n   */\r\n  addTo(layer) {\r\n    let that = this;\r\n    if (layer.map) {\r\n      that.map = layer.map.on('zoomend', () => {\r\n        that.init && that.update()\r\n      });\r\n      that.layer = layer;\r\n      layer._add(this.group);\r\n      if (!that.init) {\r\n        that.init = true;\r\n        that.lsp = [];\r\n        that.draw();\r\n      }\r\n    } else {\r\n      // 未加载到地图上 \r\n      layer.layer.on('add', () => {\r\n        this.addTo(layer);\r\n      })\r\n    }\r\n  }\r\n  /**\r\n   * 移除\r\n   */\r\n  remove() {\r\n    this.init = false;\r\n    // 不能直接用 remove，当上层layer被挂起移除的时候无法删除。\r\n    // 所以这里用 removeFrom\r\n    this.layer && this.group.removeFrom(this.layer.layer);\r\n  }\r\n  /**\r\n   * 台风路径点点击/移入事件\r\n   * @param e\r\n   */\r\n  handleEvent(e) {\r\n    let {\r\n      data,\r\n      lsp,\r\n      complete,\r\n      _overTarget,\r\n      options\r\n    } = this;\r\n    let {\r\n      target,\r\n      type\r\n    } = e;\r\n    let i = lsp.indexOf(target);\r\n    if (!complete) {\r\n      return;\r\n    }\r\n    let event;\r\n    switch (type) {\r\n      case 'click':\r\n        event = {\r\n          data: data,\r\n          dataProvider: data.points,\r\n          selItem: data.points[i],\r\n          event: e\r\n        };\r\n        if (lsp[i]) {\r\n          options.click2drawOnTime && this.setTimeIndex(i);\r\n          target.openPopup();\r\n          target.setRadius(7);\r\n          T.do('typhoon-lslj-click', event);\r\n          //台风播放控件\r\n        } else {\r\n          target.openPopup();\r\n          T.do('typhoon-yblj-click', event);\r\n        }\r\n        break;\r\n      case 'mouseover':\r\n        event = {\r\n          tf: data,\r\n          attr: target.__data || data.points[i],\r\n          event: e\r\n        };\r\n        if (lsp[i]) {\r\n          if (_overTarget != target) {\r\n            target.setRadius(7);\r\n            this._overTarget = target;\r\n          }\r\n          T.do('typhoon-lslj-over', event);\r\n        } else {\r\n          T.do('typhoon-yblj-over', event);\r\n        }\r\n        break;\r\n      case 'mouseout':\r\n        if (_overTarget) {\r\n          _overTarget.setRadius(4);\r\n          this._overTarget = null;\r\n        }\r\n        T.do('typhoon-lslj-out', event);\r\n        break;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Typhoon.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.10.22\r\n */\r\nlet { Circle, CircleMarker } = L;\r\n/**\r\n * 台风四象限风圈\r\n */\r\nexport default Circle.extend({\r\n  /**\r\n   * 初始化\r\n   */\r\n  initialize(latlng, options) {\r\n    CircleMarker.prototype.initialize.call(this, latlng, options)\r\n    this._mRadius = this.options.radius;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _project() {\r\n    let { _latlng, _map: map, options, _mRadius } = this;\r\n    // let crs = L.CRS.EPSG3857;//map.options.crs;\r\n    let [ne, nw, se, sw] = _mRadius;//东北，西北，东南，西南 四象限的半径，单位米\r\n    let crs = map.options.crs;\r\n    let { Earth } = L.CRS;\r\n    let { lat, lng } = _latlng;\r\n    if (crs.distance === Earth.distance) {\r\n      let point;\r\n      function getR(r) {\r\n        let d = Math.PI / 180;\r\n        let latR = (r / Earth.R) / d;\r\n        let top = map.project([lat + latR, lng]);\r\n        let bottom = map.project([lat - latR, lng]);\r\n        let p = top.add(bottom).divideBy(2);\r\n        // let lat2 = map.unproject(p).lat;\r\n        // let lngR = Math.acos((Math.cos(latR * d) - Math.sin(lat * d) * Math.sin(lat2 * d)) /\r\n        //   (Math.cos(lat * d) * Math.cos(lat2 * d))) / d;\r\n\r\n        // if (isNaN(lngR) || lngR === 0) {\r\n        //   lngR = latR / Math.cos(Math.PI / 180 * lat); // Fallback for edge case, #2425\r\n        // }\r\n        point = point || p.subtract(map.getPixelOrigin());\r\n        // this._radius = isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\r\n        // this._radiusY = p.y - top.y;\r\n        // return isNaN(lngR) ? 0 : p.x - map.project([lat2, lng - lngR]).x;\r\n        return p.y - top.y;\r\n      }\r\n      ne = getR(ne);\r\n      nw = getR(nw);\r\n      se = getR(se);\r\n      sw = getR(sw);\r\n      this._point = point;\r\n      //\r\n      this._radius = [\r\n        sw,//西南\r\n        se,//东南\r\n        nw,//西北\r\n        ne //东北\r\n      ];\r\n    } else {\r\n      let xy = crs.project(_latlng);\r\n      ne = [crs.unproject(xy.add([ne, 0])), crs.unproject(xy.add([0, -ne]))]\r\n      nw = [crs.unproject(xy.add([-nw, 0])), crs.unproject(xy.add([0, -nw]))]\r\n      se = [crs.unproject(xy.add([se, 0])), crs.unproject(xy.add([0, se]))]\r\n      sw = [crs.unproject(xy.add([-sw, 0])), crs.unproject(xy.add([0, sw]))]\r\n      //中心点\r\n      let point = this._point = map.latLngToLayerPoint(_latlng);\r\n      let { x } = point;\r\n      //各象限半径 - 顺时针\r\n      this._radius = [\r\n        x - map.latLngToLayerPoint(sw[0]).x,//西南\r\n        map.latLngToLayerPoint(se[0]).x - x,//东南\r\n        x - map.latLngToLayerPoint(nw[0]).x,//西北\r\n        map.latLngToLayerPoint(ne[0]).x - x //东北\r\n      ]\r\n    }\r\n    this._updateBounds();\r\n  },\r\n  /**\r\n   * 绘制风圈\r\n   */\r\n  _updatePath() {\r\n    this._renderer._updateCircular(this);\r\n  },\r\n  /**\r\n   * 修改边界\r\n   */\r\n  _updateBounds() {\r\n    let { _point, _radius } = this;\r\n    let w = this._clickTolerance();\r\n    let [ne, nw, se, sw] = _radius;\r\n    let maxR = Math.max(ne, nw, se, sw);\r\n    let p = [maxR + w, maxR + w];\r\n    this._pxBounds = new L.Bounds(_point.subtract(p), _point.add(p));\r\n  }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Quadrant.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2018-3-23\r\n * @see https://github.com/yakitoritabetai/Leaflet.LabelTextCollision\r\n * @see https://github.com/XC-Zhang/leaflet-text\r\n */\r\nlet { Layer } = L;\r\n/** \r\n * \r\n */\r\nLayer.include({\r\n  /**\r\n   * \r\n   */\r\n  getText() {\r\n    return this._text;\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\r\n  bindText(content, options) {\r\n    //\r\n    if (this._text instanceof L.Text) {\r\n      this._text.setContent(content);\r\n    } else {\r\n      let { _latlng } = this;\r\n      // 绑定文本和图标，比如说危险区内部的警告图标，或者河流上的文本标注\r\n      this._text = content ? L.text(_latlng, content, options) : new L.VectorMarker(_latlng, options);\r\n    }\r\n    //\r\n    this._initTextInteractions();\r\n    //\r\n    if (this._map && this._map.hasLayer(this)) {\r\n      this.openText();\r\n    }\r\n    return this;\r\n  },\r\n  /**\r\n   * \r\n   * @param \r\n   */\r\n  _initTextInteractions: function () {\r\n    this.on({\r\n      remove: this._closeText,\r\n      move: this._moveText\r\n    });\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} layer \r\n   * @param {*} latlng \r\n   */\r\n  openText(layer, latlng) {\r\n    if (!(layer instanceof Layer)) {\r\n      latlng = layer;\r\n      layer = this;\r\n    }\r\n    if (!latlng) {\r\n      latlng = layer.getCenter ? layer.getCenter() : layer.getLatLng();\r\n    }\r\n    let { _map, _text } = this;\r\n    if (_map) {\r\n      _text._source = layer;\r\n      _text.setLatLng(latlng);\r\n      if (!_map.hasLayer(_text)) {\r\n        _map.addLayer(_text);\r\n      }\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} map \r\n   */\r\n  unbindText(map) {\r\n    let { _text } = this;\r\n    if (_text) {\r\n      map.removeLayer(_text);\r\n      this._text = null;\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _closeText() {\r\n    let { _map, _text } = this;\r\n    if (_map && _text && _map.hasLayer(_text)) {\r\n      _map.removeLayer(_text);\r\n    }\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _moveText(e) {\r\n    this._text.setLatLng(e.latlng);\r\n  }\r\n})\r\n/**\r\n * \r\n */\r\nL.Canvas.include({\r\n  /**\r\n   * 获取文本宽度\r\n   */\r\n  _getTextWidth(layer) {\r\n    this._ctx.font = layer.options.font;\r\n    return this._ctx.measureText(layer._text).width;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  _updateText(layer) {\r\n    if (!this._drawing || layer._empty()) {\r\n      return;\r\n    }\r\n\r\n    var p = layer._point;\r\n    var ctx = this._ctx;\r\n    var options = layer.options;\r\n\r\n    if (!options.fill) {\r\n      return;\r\n    }\r\n\r\n    if (options.offset) {\r\n      p = p.add(options.offset);\r\n    }\r\n\r\n    this._drawnLayers[layer._leaflet_id] = layer;\r\n    ctx.font = options.font;\r\n    ctx.translate(p.x, p.y);\r\n    ctx.rotate(options.rotation);\r\n    ctx.fillStyle = options.color;\r\n    ctx.textAlign = options.textAlign;\r\n    ctx.fillText(layer._text, 0, 0);\r\n    ctx.rotate(-options.rotation);\r\n    ctx.translate(-p.x, -p.y);\r\n  }\r\n});\r\n\r\n/**\r\n * \r\n */\r\nL.Text = L.Path.extend({\r\n  options: {\r\n    color: 'blue',\r\n    fill: true,\r\n    fillOpacity: 1.0,\r\n    rotation: 0.0,\r\n    stroke: false,\r\n    textAlign: 'center',\r\n    font: \"14px arial\"\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  initialize: function (latlng, text, options) {\r\n    L.setOptions(this, options);\r\n    this._latlng = L.latLng(latlng);\r\n    this._text = String(text || options.text);\r\n  },\r\n  /**\r\n   * \r\n   * @param {*} text \r\n   */\r\n  setContent(text) {\r\n    this._text = String(text);\r\n    this._update();\r\n  },\r\n\r\n  setLatLng(latlng) {\r\n    this._latlng = L.latLng(latlng);\r\n    this._update();\r\n  },\r\n\r\n  getLatLng() {\r\n    return this._latlng;\r\n  },\r\n\r\n  _project() {\r\n    this._point = this._map.latLngToLayerPoint(this._latlng);\r\n    this._updateBounds();\r\n  },\r\n\r\n  _updateBounds() {\r\n    var w = this._renderer._getTextWidth(this);\r\n    var p = [w / 2, w / 2];\r\n    this._pxBounds = L.bounds(this._point.subtract(p), this._point.add(p));\r\n  },\r\n\r\n  _update() {\r\n    if (this._map) {\r\n      this._updatePath();\r\n    }\r\n  },\r\n\r\n  _updatePath() {\r\n    this._renderer._updateText(this);\r\n  },\r\n\r\n  _empty() {\r\n    return !this._renderer._bounds.intersects(this._pxBounds);\r\n  },\r\n\r\n  _containsPoint: function (p) {\r\n    return false;\r\n  },\r\n  /**\r\n   * \r\n   */\r\n  toGeoJSON() {\r\n    let { lat, lng } = this.getLatLng();\r\n    this.options.text = this._text;\r\n\r\n    return {\r\n      type: 'Feature',\r\n      properties: {},\r\n      geometry: { coordinates: [lng, lat], type: 'Text' }\r\n    }\r\n  }\r\n});\r\n\r\nL.text = function (latlng, text, options) {\r\n  return new L.Text(latlng, text, options);\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Text.js","/**\r\n * @see https://github.com/mourner/simpleheat\r\n * @see https://github.com/Leaflet/Leaflet.heat\r\n */\r\nL.Heat = L.Layer.extend({\r\n\r\n  // options: {\r\n  //     minOpacity: 0.05,\r\n  //     maxZoom: 18,\r\n  //     radius: 25,\r\n  //     blur: 15,\r\n  //     max: 1.0\r\n  // },\r\n  /**\r\n   * \r\n   * @param {*} latlngs \r\n   * @param {*} options \r\n   */\r\n  initialize(latlngs, options) {\r\n    this._latlngs = latlngs;\r\n    L.setOptions(this, options);\r\n  },\r\n\r\n  setLatLngs(latlngs) {\r\n    this._latlngs = latlngs;\r\n    return this.redraw();\r\n  },\r\n\r\n  addLatLng(latlng) {\r\n    this._latlngs.push(latlng);\r\n    return this.redraw();\r\n  },\r\n\r\n  setOptions(options) {\r\n    L.setOptions(this, options);\r\n    if (this._heat) {\r\n      this._updateOptions();\r\n    }\r\n    return this.redraw();\r\n  },\r\n\r\n  redraw() {\r\n    if (this._heat && !this._frame && this._map && !this._map._animating) {\r\n      this._frame = L.Util.requestAnimFrame(this._redraw, this);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  onAdd(map) {\r\n    this._map = map;\r\n\r\n    if (!this._canvas) {\r\n      this._initCanvas();\r\n    }\r\n\r\n    if (this.options.pane) {\r\n      this.getPane().appendChild(this._canvas);\r\n    } else {\r\n      map._panes.overlayPane.appendChild(this._canvas);\r\n    }\r\n\r\n    map.on('moveend', this._reset, this);\r\n\r\n    if (map.options.zoomAnimation && L.Browser.any3d) {\r\n      map.on('zoomanim', this._animateZoom, this);\r\n    }\r\n\r\n    this._reset();\r\n  },\r\n\r\n  onRemove(map) {\r\n    if (this.options.pane) {\r\n      this.getPane().removeChild(this._canvas);\r\n    } else {\r\n      map.getPanes().overlayPane.removeChild(this._canvas);\r\n    }\r\n\r\n    map.off('moveend', this._reset, this);\r\n\r\n    if (map.options.zoomAnimation) {\r\n      map.off('zoomanim', this._animateZoom, this);\r\n    }\r\n  },\r\n\r\n  addTo(map) {\r\n    map.addLayer(this);\r\n    return this;\r\n  },\r\n\r\n  _initCanvas() {\r\n    var canvas = this._canvas = T.canvas('leaflet-heatmap-layer leaflet-layer') // L.DomUtil.create('canvas', 'leaflet-heatmap-layer leaflet-layer');\r\n\r\n    var originProp = L.DomUtil.testProp(['transformOrigin', 'WebkitTransformOrigin', 'msTransformOrigin']);\r\n    canvas.style[originProp] = '50% 50%';\r\n\r\n    var size = this._map.getSize();\r\n    canvas.width = size.x;\r\n    canvas.height = size.y;\r\n\r\n    var animated = this._map.options.zoomAnimation && L.Browser.any3d;\r\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\r\n\r\n    this._heat = simpleheat(canvas);\r\n    this._updateOptions();\r\n  },\r\n\r\n  _updateOptions() {\r\n    this._heat.radius(this.options.radius || this._heat.defaultRadius, this.options.blur);\r\n\r\n    if (this.options.gradient) {\r\n      this._heat.gradient(this.options.gradient);\r\n    }\r\n    if (this.options.max) {\r\n      this._heat.max(this.options.max);\r\n    }\r\n  },\r\n\r\n  _reset() {\r\n    var topLeft = this._map.containerPointToLayerPoint([0, 0]);\r\n    L.DomUtil.setPosition(this._canvas, topLeft);\r\n\r\n    var size = this._map.getSize();\r\n\r\n    if (this._heat._width !== size.x) {\r\n      this._canvas.width = this._heat._width = size.x;\r\n    }\r\n    if (this._heat._height !== size.y) {\r\n      this._canvas.height = this._heat._height = size.y;\r\n    }\r\n\r\n    this._redraw();\r\n  },\r\n\r\n  _redraw() {\r\n    if (!this._map) {\r\n      return;\r\n    }\r\n    var data = [],\r\n      r = this._heat._r,\r\n      size = this._map.getSize(),\r\n      bounds = new L.Bounds(\r\n        L.point([-r, -r]),\r\n        size.add([r, r])),\r\n\r\n      max = this.options.max === undefined ? 1 : this.options.max,\r\n      maxZoom = this.options.maxZoom === undefined ? this._map.getMaxZoom() : this.options.maxZoom,\r\n      v = 1 / Math.pow(2, Math.max(0, Math.min(maxZoom - this._map.getZoom(), 12))),\r\n      cellSize = r / 2,\r\n      grid = [],\r\n      panePos = this._map._getMapPanePos(),\r\n      offsetX = panePos.x % cellSize,\r\n      offsetY = panePos.y % cellSize,\r\n      i, len, p, cell, x, y, j, len2, k;\r\n\r\n    // console.time('process');\r\n    for (i = 0, len = this._latlngs.length; i < len; i++) {\r\n      p = this._map.latLngToContainerPoint(this._latlngs[i]);\r\n      if (bounds.contains(p)) {\r\n        x = Math.floor((p.x - offsetX) / cellSize) + 2;\r\n        y = Math.floor((p.y - offsetY) / cellSize) + 2;\r\n\r\n        var alt = this._latlngs[i].alt || 1;\r\n        k = alt * v;\r\n\r\n        grid[y] = grid[y] || [];\r\n        cell = grid[y][x];\r\n\r\n        if (!cell) {\r\n          grid[y][x] = [p.x, p.y, k];\r\n\r\n        } else {\r\n          cell[0] = (cell[0] * cell[2] + p.x * k) / (cell[2] + k); // x\r\n          cell[1] = (cell[1] * cell[2] + p.y * k) / (cell[2] + k); // y\r\n          cell[2] += k; // cumulated intensity value\r\n        }\r\n      }\r\n    }\r\n\r\n    for (i = 0, len = grid.length; i < len; i++) {\r\n      if (grid[i]) {\r\n        for (j = 0, len2 = grid[i].length; j < len2; j++) {\r\n          cell = grid[i][j];\r\n          if (cell) {\r\n            data.push([\r\n              Math.round(cell[0]),\r\n              Math.round(cell[1]),\r\n              Math.min(cell[2], max)\r\n            ]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // console.timeEnd('process');\r\n\r\n    // console.time('draw ' + data.length);\r\n    this._heat.data(data).draw(this.options.minOpacity);\r\n    // console.timeEnd('draw ' + data.length);\r\n\r\n    this._frame = null;\r\n  },\r\n\r\n  _animateZoom(e) {\r\n    var scale = this._map.getZoomScale(e.zoom),\r\n      offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\r\n\r\n    if (L.DomUtil.setTransform) {\r\n      L.DomUtil.setTransform(this._canvas, offset, scale);\r\n\r\n    } else {\r\n      this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\r\n    }\r\n  }\r\n});\r\n\r\nL.heat = function (latlngs, options) {\r\n  return new L.Heat(latlngs, options);\r\n};\r\n\r\n\r\nfunction simpleheat(canvas) {\r\n  if (!(this instanceof simpleheat)) return new simpleheat(canvas);\r\n\r\n  this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\r\n\r\n  this._ctx = canvas.getContext('2d');\r\n  this._width = canvas.width;\r\n  this._height = canvas.height;\r\n\r\n  this._max = 1;\r\n  this._data = [];\r\n}\r\n\r\nsimpleheat.prototype = {\r\n\r\n  defaultRadius: 25,\r\n\r\n  defaultGradient: {\r\n    0.4: 'blue',\r\n    0.6: 'cyan',\r\n    0.7: 'lime',\r\n    0.8: 'yellow',\r\n    1.0: 'red'\r\n  },\r\n\r\n  data(data) {\r\n    this._data = data;\r\n    return this;\r\n  },\r\n\r\n  max(max) {\r\n    this._max = max;\r\n    return this;\r\n  },\r\n\r\n  add(point) {\r\n    this._data.push(point);\r\n    return this;\r\n  },\r\n\r\n  clear() {\r\n    this._data = [];\r\n    return this;\r\n  },\r\n\r\n  radius(r, blur) {\r\n    blur = blur === undefined ? 15 : blur;\r\n\r\n    // create a grayscale blurred circle image that we'll use for drawing points\r\n    var circle = this._circle = this._createCanvas(),\r\n      ctx = circle.getContext('2d'),\r\n      r2 = this._r = r + blur;\r\n\r\n    circle.width = circle.height = r2 * 2;\r\n\r\n    ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\r\n    ctx.shadowBlur = blur;\r\n    ctx.shadowColor = 'black';\r\n\r\n    ctx.beginPath();\r\n    ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n\r\n    return this;\r\n  },\r\n\r\n  resize() {\r\n    this._width = this._canvas.width;\r\n    this._height = this._canvas.height;\r\n  },\r\n\r\n  gradient(grad) {\r\n    // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\r\n    var canvas = this._createCanvas(),\r\n      ctx = canvas.getContext('2d'),\r\n      gradient = ctx.createLinearGradient(0, 0, 0, 256);\r\n\r\n    canvas.width = 1;\r\n    canvas.height = 256;\r\n\r\n    for (var i in grad) {\r\n      gradient.addColorStop(+i, grad[i]);\r\n    }\r\n\r\n    ctx.fillStyle = gradient;\r\n    ctx.fillRect(0, 0, 1, 256);\r\n\r\n    this._grad = ctx.getImageData(0, 0, 1, 256).data;\r\n\r\n    return this;\r\n  },\r\n\r\n  draw(minOpacity) {\r\n    if (!this._circle) this.radius(this.defaultRadius);\r\n    if (!this._grad) this.gradient(this.defaultGradient);\r\n\r\n    var ctx = this._ctx;\r\n\r\n    ctx.clearRect(0, 0, this._width, this._height);\r\n\r\n    // draw a grayscale heatmap by putting a blurred circle at each data point\r\n    for (var i = 0, len = this._data.length, p; i < len; i++) {\r\n      p = this._data[i];\r\n      ctx.globalAlpha = Math.min(Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity), 1);\r\n      ctx.drawImage(this._circle, p[0] - this._r, p[1] - this._r);\r\n    }\r\n\r\n    // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\r\n    var colored = ctx.getImageData(0, 0, this._width, this._height);\r\n    this._colorize(colored.data, this._grad);\r\n    ctx.putImageData(colored, 0, 0);\r\n\r\n    return this;\r\n  },\r\n\r\n  _colorize(pixels, gradient) {\r\n    for (var i = 0, len = pixels.length, j; i < len; i += 4) {\r\n      j = pixels[i + 3] * 4; // get gradient color from opacity value\r\n\r\n      if (j) {\r\n        pixels[i] = gradient[j];\r\n        pixels[i + 1] = gradient[j + 1];\r\n        pixels[i + 2] = gradient[j + 2];\r\n      }\r\n    }\r\n  },\r\n\r\n  _createCanvas() {\r\n    if (typeof document !== 'undefined') {\r\n      return document.createElement('canvas');\r\n    } else {\r\n      // create a new canvas instance in node.js\r\n      // the canvas class needs to have a default constructor without any parameter\r\n      return new this._canvas.constructor();\r\n    }\r\n  }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/feature/Heat.js","/**\r\n * @see https://github.com/ggolikov/Leaflet.River\r\n */\r\nlet { FeatureGroup, setOptions, polyline: toPolyline } = L;\r\nlet FeatureGroupPrototype = FeatureGroup.prototype;\r\n/**\r\n * \r\n */\r\nexport default FeatureGroup.extend({\r\n  options: {\r\n    color: 'blue',\r\n    minWidth: 1,\r\n    maxWidth: 10,\r\n    ratio: null\r\n  },\r\n\r\n  initialize(latLngs, options) {\r\n    FeatureGroupPrototype.initialize.call(this, [], options);\r\n    this._latLngs = latLngs;\r\n\r\n    setOptions(this, options);\r\n    this._buildLines(latLngs);\r\n  },\r\n\r\n  onAdd(map) {\r\n    FeatureGroupPrototype.onAdd.call(this, map);\r\n    this._getLength(map);\r\n    this.setStyle();\r\n  },\r\n\r\n  _buildLines(latLngs) {\r\n    for (var i = 0; i < latLngs.length - 1; i++) {\r\n      var line = toPolyline([latLngs[i], latLngs[i + 1]]);\r\n      this.addLayer(line);\r\n    }\r\n  },\r\n\r\n  _getLength(map) {\r\n    var latLngs = this._latLngs,\r\n      totalLength = 0;\r\n\r\n    for (var i = 0; i < latLngs.length - 1; i++) {\r\n      totalLength += map.latLngToLayerPoint(latLngs[i]).distanceTo(map.latLngToLayerPoint(latLngs[i + 1]));\r\n    }\r\n\r\n    return this._length = totalLength;\r\n  },\r\n\r\n  /**\r\n   * \r\n   */\r\n  setStyle(style) {\r\n    var opt = this.options = L.extend(this.options, style),\r\n      totalLength = this._length,\r\n      map = this._map,\r\n      layers = this._layers,\r\n      length = 0,\r\n      layer, latLngs;\r\n\r\n    for (var key in layers) {\r\n      layer = layers[key];\r\n      latLngs = layer.getLatLngs();\r\n      length += map.latLngToLayerPoint(latLngs[0]).distanceTo(map.latLngToLayerPoint(latLngs[1]));\r\n      layer.setStyle(L.extend({}, opt, {\r\n        weight: opt.ratio ? length / opt.ratio : opt.minWidth + (opt.maxWidth - opt.minWidth) * (length / totalLength)\r\n      }));\r\n    }\r\n  },\r\n\r\n  setMinWidth(width) {\r\n    this.setStyle({\r\n      minWidth: width\r\n    })\r\n  },\r\n\r\n  setMaxWidth(width) {\r\n    this.setStyle({\r\n      maxWidth: width\r\n    })\r\n  },\r\n\r\n  getMinWidth() {\r\n    return this.options.minWidth;\r\n  },\r\n\r\n  getMaxWidth() {\r\n    return this.options.maxWidth;\r\n  },\r\n\r\n  useLength(ratio) {\r\n    setOptions(this, { ratio: ratio });\r\n    return this;\r\n  },\r\n\r\n  convertToPolyline(options) {\r\n    return toPolyline(this._latLngs, options);\r\n  }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/feature/River.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.7.11\r\n */\r\n// import {distance} from './Util'\r\n/**\r\n * n次贝塞尔曲线\r\n * @param arr [[x,y],[x,y]]\r\n */\r\nexport var bezier = (arr, step) => {\r\n  let points = [arr[0]];//第一个点\r\n  let l = arr.length;\r\n  for (let i = step; i < 1; i += step) {\r\n    points.push(PBezier(arr, l, i));\r\n  }\r\n  points.push(arr[l - 1]);\r\n  return points;\r\n}\r\n/** \r\n * 燕尾、军标箭头\r\n * @param arr\r\n * @param step\r\n * @param options\r\n */\r\nexport var coattail = (arr, step, options) => {\r\n  let { r, ra, ma } = T.assign({\r\n    r: 36,     //箭头两边长度\r\n    ra: 0.2,   //张开弧度系数\r\n    ma: 16     //最大宽度\r\n  }, options);\r\n  let { PI } = Math;\r\n  //\r\n  let points = [arr[0]];// 第一个点\r\n  let l = arr.length; //\r\n  let p0 = arr[0]; // 上个点\r\n  let num = Math.ceil((1 / step) + 1) * 2;// 贝塞尔曲线上的点数\r\n  let ci = 1, p;\r\n  if (l < 2) return arr;\r\n  // 贝塞尔\r\n  for (let i = step; i < 1; i += step, ci++) {\r\n    p = PBezier(arr, l, i);//当前点\r\n    let r = ma - i * 9;    //半径\r\n    let radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]) - Math.PI / 2;\r\n    let offsetX = r * Math.cos(radians);\r\n    let offsetY = r * Math.sin(radians);\r\n    points[ci] = [p[0] + offsetX, p[1] + offsetY];\r\n    points[num - ci] = [p[0] - offsetX, p[1] - offsetY];\r\n    p0 = p;\r\n  }\r\n  // 箭头\r\n  p = arr[l - 1];\r\n  let radians = Math.atan2(p[1] - p0[1], p[0] - p0[0]);\r\n  p = [p0[0] + (ma + 2) * Math.cos(radians), p0[1] + (ma + 2) * Math.sin(radians)];\r\n  points[ci++] = [p[0] + r * Math.cos(PI * (1 + ra) + radians), p[1] + r * Math.sin(PI * (1 + ra) + radians)]\r\n  points[ci++] = p;\r\n  points[ci] = [p[0] + r * Math.cos(PI * (1 - ra) + radians), p[1] + r * Math.sin(PI * (1 - ra) + radians)]\r\n  // 最后一个点 \r\n  points.push(arr[0]);\r\n  return points;\r\n}\r\n//\r\nlet PBezier = (arr, l, t) => {\r\n  let px = 0,\r\n    py = 0,\r\n    n = l - 1;//n次\r\n  for (let i = 0, b; i < l; i++) {\r\n    b = BEZ(n, i, t);\r\n    px += arr[i][0] * b;\r\n    py += arr[i][1] * b;\r\n  }\r\n  return [px, py]\r\n}\r\n//基函数\r\nlet BEZ = (n, k, t) => {\r\n  return C(n, k) * Math.pow(t, k) * Math.pow(1 - t, n - k);\r\n}\r\n//组合排序\r\nlet C = (n, k) => {\r\n  return Factorial(n) / (Factorial(k) * Factorial(n - k));\r\n}\r\n//阶乘\r\nlet Factorial = i => {\r\n  let n = 1;\r\n  for (let j = 1; j <= i; j++) {\r\n    n *= j;\r\n  }\r\n  return n;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Bezier.js","(function () {\n  'use strict';\n\n  /** @preserve OverlappingMarkerSpiderfier\n  https://github.com/jawj/OverlappingMarkerSpiderfier-Leaflet\n  Copyright (c) 2011 - 2012 George MacKerron\n  Released under the MIT licence: http://opensource.org/licenses/mit-license\n  Note: The Leaflet maps API must be included *before* this code\n   */\n  var hasProp = {}.hasOwnProperty,\n    slice = [].slice;\n\n  (function () {\n\n    if (this['L'] == null) {\n      return;\n    }\n    return this['OverlappingMarkerSpiderfier'] = L.OverlappingMarkerSpiderfier = (function () {\n      var p, twoPi;\n\n      p = _Class.prototype;\n\n      p['VERSION'] = '0.2.6';\n\n      twoPi = Math.PI * 2;\n\n      p['keepSpiderfied'] = false;\n\n      p['nearbyDistance'] = 20;\n\n      p['circleSpiralSwitchover'] = 9;\n\n      p['circleFootSeparation'] = 25;\n\n      p['circleStartAngle'] = twoPi / 12;\n\n      p['spiralFootSeparation'] = 28;\n\n      p['spiralLengthStart'] = 11;\n\n      p['spiralLengthFactor'] = 5;\n\n      p['legWeight'] = 1.5;\n\n      p['legColors'] = {\n        'usual': '#222',\n        'highlighted': '#f00'\n      };\n\n      function _Class(map, opts) {\n        var e, j, k, len, ref, v;\n        this.map = map;\n        if (opts == null) {\n          opts = {};\n        }\n        for (k in opts) {\n          if (!hasProp.call(opts, k)) continue;\n          v = opts[k];\n          this[k] = v;\n        }\n        this.initMarkerArrays();\n        this.listeners = {};\n        ref = ['click', 'zoomend'];\n        for (j = 0, len = ref.length; j < len; j++) {\n          e = ref[j];\n          this.map.addEventListener(e, (function (_this) {\n            return function () {\n              return _this['unspiderfy']();\n            };\n          })(this));\n        }\n      }\n\n      p.initMarkerArrays = function () {\n        this.markers = [];\n        return this.markerListeners = [];\n      };\n\n      p['addMarker'] = function (marker) {\n        var markerListener;\n        if (marker['_oms'] != null) {\n          return this;\n        }\n        marker['_oms'] = true;\n        markerListener = (function (_this) {\n          return function () {\n            return _this.spiderListener(marker);\n          };\n        })(this);\n        marker.addEventListener('click', markerListener);\n        this.markerListeners.push(markerListener);\n        this.markers.push(marker);\n        return this;\n      };\n\n      p['getMarkers'] = function () {\n        return this.markers.slice(0);\n      };\n\n      p['removeMarker'] = function (marker) {\n        var i, markerListener;\n        if (marker['_omsData'] != null) {\n          this['unspiderfy']();\n        }\n        i = this.arrIndexOf(this.markers, marker);\n        if (i < 0) {\n          return this;\n        }\n        markerListener = this.markerListeners.splice(i, 1)[0];\n        marker.removeEventListener('click', markerListener);\n        delete marker['_oms'];\n        this.markers.splice(i, 1);\n        return this;\n      };\n\n      p['clearMarkers'] = function () {\n        var i, j, len, marker, markerListener, ref;\n        this['unspiderfy']();\n        ref = this.markers;\n        for (i = j = 0, len = ref.length; j < len; i = ++j) {\n          marker = ref[i];\n          markerListener = this.markerListeners[i];\n          marker.removeEventListener('click', markerListener);\n          delete marker['_oms'];\n        }\n        this.initMarkerArrays();\n        return this;\n      };\n\n      p['addListener'] = function (event, func) {\n        var base;\n        ((base = this.listeners)[event] != null ? base[event] : base[event] = []).push(func);\n        return this;\n      };\n\n      p['removeListener'] = function (event, func) {\n        var i;\n        i = this.arrIndexOf(this.listeners[event], func);\n        if (!(i < 0)) {\n          this.listeners[event].splice(i, 1);\n        }\n        return this;\n      };\n\n      p['clearListeners'] = function (event) {\n        this.listeners[event] = [];\n        return this;\n      };\n\n      p.trigger = function () {\n        var args, event, func, j, len, ref, ref1, results;\n        event = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n        ref1 = (ref = this.listeners[event]) != null ? ref : [];\n        results = [];\n        for (j = 0, len = ref1.length; j < len; j++) {\n          func = ref1[j];\n          results.push(func.apply(null, args));\n        }\n        return results;\n      };\n\n      p.generatePtsCircle = function (count, centerPt) {\n        var angle, angleStep, circumference, i, j, legLength, ref, results;\n        circumference = this['circleFootSeparation'] * (2 + count);\n        legLength = circumference / twoPi;\n        angleStep = twoPi / count;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle = this['circleStartAngle'] + i * angleStep;\n          results.push(new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle)));\n        }\n        return results;\n      };\n\n      p.generatePtsSpiral = function (count, centerPt) {\n        var angle, i, j, legLength, pt, ref, results;\n        legLength = this['spiralLengthStart'];\n        angle = 0;\n        results = [];\n        for (i = j = 0, ref = count; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          angle += this['spiralFootSeparation'] / legLength + i * 0.0005;\n          pt = new L.Point(centerPt.x + legLength * Math.cos(angle), centerPt.y + legLength * Math.sin(angle));\n          legLength += twoPi * this['spiralLengthFactor'] / angle;\n          results.push(pt);\n        }\n        return results;\n      };\n\n      p.spiderListener = function (marker) {\n        var j, len, m, mPt, markerPt, markerSpiderfied, nearbyMarkerData, nonNearbyMarkers, pxSq, ref;\n        markerSpiderfied = marker['_omsData'] != null;\n        if (!(markerSpiderfied && this['keepSpiderfied'])) {\n          this['unspiderfy']();\n        }\n        if (markerSpiderfied) {\n          return this.trigger('click', marker);\n        } else {\n          nearbyMarkerData = [];\n          nonNearbyMarkers = [];\n          pxSq = this['nearbyDistance'] * this['nearbyDistance'];\n          markerPt = this.map.latLngToLayerPoint(marker.getLatLng());\n          ref = this.markers;\n          for (j = 0, len = ref.length; j < len; j++) {\n            m = ref[j];\n            if (!this.map.hasLayer(m)) {\n              continue;\n            }\n            mPt = this.map.latLngToLayerPoint(m.getLatLng());\n            if (this.ptDistanceSq(mPt, markerPt) < pxSq) {\n              nearbyMarkerData.push({\n                marker: m,\n                markerPt: mPt\n              });\n            } else {\n              nonNearbyMarkers.push(m);\n            }\n          }\n          if (nearbyMarkerData.length === 1) {\n            return this.trigger('click', marker);\n          } else {\n            return this.spiderfy(nearbyMarkerData, nonNearbyMarkers);\n          }\n        }\n      };\n\n      p.makeHighlightListeners = function (marker) {\n        return {\n          highlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['highlighted']\n              });\n            };\n          })(this),\n          unhighlight: (function (_this) {\n            return function () {\n              return marker['_omsData'].leg.setStyle({\n                color: _this['legColors']['usual']\n              });\n            };\n          })(this)\n        };\n      };\n\n      p.spiderfy = function (markerData, nonNearbyMarkers) {\n        var bodyPt, footLl, footPt, footPts, leg, marker, md, mhl, nearestMarkerDatum, numFeet, spiderfiedMarkers;\n        this.spiderfying = true;\n        numFeet = markerData.length;\n        bodyPt = this.ptAverage((function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = markerData.length; j < len; j++) {\n            md = markerData[j];\n            results.push(md.markerPt);\n          }\n          return results;\n        })());\n        footPts = numFeet >= this['circleSpiralSwitchover'] ? this.generatePtsSpiral(numFeet, bodyPt).reverse() : this.generatePtsCircle(numFeet, bodyPt);\n        spiderfiedMarkers = (function () {\n          var j, len, results;\n          results = [];\n          for (j = 0, len = footPts.length; j < len; j++) {\n            footPt = footPts[j];\n            footLl = this.map.layerPointToLatLng(footPt);\n            nearestMarkerDatum = this.minExtract(markerData, (function (_this) {\n              return function (md) {\n                return _this.ptDistanceSq(md.markerPt, footPt);\n              };\n            })(this));\n            marker = nearestMarkerDatum.marker;\n            leg = new L.Polyline([marker.getLatLng(), footLl], {\n              color: this['legColors']['usual'],\n              weight: this['legWeight'],\n              clickable: false\n            });\n            this.map.addLayer(leg);\n            marker['_omsData'] = {\n              usualPosition: marker.getLatLng(),\n              leg: leg\n            };\n            if (this['legColors']['highlighted'] !== this['legColors']['usual']) {\n              mhl = this.makeHighlightListeners(marker);\n              marker['_omsData'].highlightListeners = mhl;\n              marker.addEventListener('mouseover', mhl.highlight);\n              marker.addEventListener('mouseout', mhl.unhighlight);\n            }\n            marker.setLatLng(footLl);\n            marker.setZIndexOffset(1000000);\n            results.push(marker);\n          }\n          return results;\n        }).call(this);\n        delete this.spiderfying;\n        this.spiderfied = true;\n        return this.trigger('spiderfy', spiderfiedMarkers, nonNearbyMarkers);\n      };\n\n      p['unspiderfy'] = function (markerNotToMove) {\n        var j, len, marker, mhl, nonNearbyMarkers, ref, unspiderfiedMarkers;\n        if (markerNotToMove == null) {\n          markerNotToMove = null;\n        }\n        if (this.spiderfied == null) {\n          return this;\n        }\n        this.unspiderfying = true;\n        unspiderfiedMarkers = [];\n        nonNearbyMarkers = [];\n        ref = this.markers;\n        for (j = 0, len = ref.length; j < len; j++) {\n          marker = ref[j];\n          if (marker['_omsData'] != null) {\n            this.map.removeLayer(marker['_omsData'].leg);\n            if (marker !== markerNotToMove) {\n              marker.setLatLng(marker['_omsData'].usualPosition);\n            }\n            marker.setZIndexOffset(0);\n            mhl = marker['_omsData'].highlightListeners;\n            if (mhl != null) {\n              marker.removeEventListener('mouseover', mhl.highlight);\n              marker.removeEventListener('mouseout', mhl.unhighlight);\n            }\n            delete marker['_omsData'];\n            unspiderfiedMarkers.push(marker);\n          } else {\n            nonNearbyMarkers.push(marker);\n          }\n        }\n        delete this.unspiderfying;\n        delete this.spiderfied;\n        this.trigger('unspiderfy', unspiderfiedMarkers, nonNearbyMarkers);\n        return this;\n      };\n\n      p.ptDistanceSq = function (pt1, pt2) {\n        var dx, dy;\n        dx = pt1.x - pt2.x;\n        dy = pt1.y - pt2.y;\n        return dx * dx + dy * dy;\n      };\n\n      p.ptAverage = function (pts) {\n        var j, len, numPts, pt, sumX, sumY;\n        sumX = sumY = 0;\n        for (j = 0, len = pts.length; j < len; j++) {\n          pt = pts[j];\n          sumX += pt.x;\n          sumY += pt.y;\n        }\n        numPts = pts.length;\n        return new L.Point(sumX / numPts, sumY / numPts);\n      };\n\n      p.minExtract = function (set, func) {\n        var bestIndex, bestVal, index, item, j, len, val;\n        for (index = j = 0, len = set.length; j < len; index = ++j) {\n          item = set[index];\n          val = func(item);\n          if ((typeof bestIndex === \"undefined\" || bestIndex === null) || val < bestVal) {\n            bestVal = val;\n            bestIndex = index;\n          }\n        }\n        return set.splice(bestIndex, 1)[0];\n      };\n\n      p.arrIndexOf = function (arr, obj) {\n        var i, j, len, o;\n        if (arr.indexOf != null) {\n          return arr.indexOf(obj);\n        }\n        for (i = j = 0, len = arr.length; j < len; i = ++j) {\n          o = arr[i];\n          if (o === obj) {\n            return i;\n          }\n        }\n        return -1;\n      };\n\n      return _Class;\n\n    })();\n  }).call(window);\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/overlapping-marker-spiderfier-leaflet/build/oms.js\n// module id = 36\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 4\n// module chunks = 0 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.7.7\r\n */\r\nimport Tool from './Tool'\r\nimport VectorMarker from '@/feature/VectorMarker'\r\n//\r\n/**\r\n * 点图元绘制工具\r\n */\r\nexport default class PointTool extends Tool {\r\n  options = { feature: { src: 'circle', color: '#000', radius: 5, fillColor: '#FFF', weight: 1, fillOpacity: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    //\r\n    // this.map.once('mousedown', this.onMouseDown);\r\n    // this.map.once('mouseup', this.onEnd);\r\n    //\r\n    this.map.on('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    this.map.off('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 绘制-start\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { latlng } = e;\r\n    let { options, layer, marker } = this;\r\n\r\n    if (marker) {\r\n      marker.setLatLng(latlng);\r\n    } else {\r\n      this.marker = new VectorMarker(latlng, options.feature).addTo(layer);\r\n    }\r\n    this.onEnd();\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PointTool.js","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader/lib/addStylesClient.js\n// module id = 5\n// module chunks = 0 1","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polyline } = L;\r\n/**\r\n * 线绘制工具\r\n */\r\nexport default class PolylineTool extends Tool {\r\n  options = { feature: { color: 'red', weight: 2 } }\r\n\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null\r\n  }\r\n  /**\r\n   * 绘制\r\n   */\r\n  onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { latlng } = e;\r\n    //\r\n    if (!marker) {\r\n      marker = this.marker = new Polyline([latlng], options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    } else {\r\n      this.mp = null\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this;\r\n    let { latlng } = e;\r\n    if (!mp) {\r\n      //\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PolylineTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.1.4\r\n */\r\nimport Tool from './Tool'\r\n//\r\nlet { Polygon } = L;\r\n/**\r\n * 多边形绘制工具\r\n */\r\nexport default class PolygonTool extends Tool {\r\n  marker\r\n  mp // move point\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * \r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    //\r\n    let { map } = this;\r\n    map.on('mousedown', this.onMouseDown, this);\r\n    //\r\n    this.restart = true;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n    this.mp = null\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  _onMouseDown(e) {\r\n    this.reset();\r\n    //\r\n    let { marker, map, layer, options } = this;\r\n    let { latlng } = e;\r\n    if (!marker) {\r\n      marker = this.marker = new Polygon([latlng], options.feature).addTo(layer)\r\n      map.on('mousemove', this.onMouseMove, this);\r\n      map.once('dblclick', this.onEnd, this)\r\n    }\r\n    this.mp = null;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker, mp } = this;\r\n    let { latlng } = e;\r\n    if (!mp) {\r\n      marker.addLatLng(latlng);\r\n      this.mp = latlng;\r\n    } else {\r\n      mp.lat = latlng.lat;\r\n      mp.lng = latlng.lng;\r\n      marker.getBounds().extend(mp)\r\n      marker.redraw();\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/PolygonTool.js","/**\r\n * @author gyb(mocheer)\r\n * @email `mocheer@foxmail.com`  \r\n * @since 2017.6.12\r\n */\r\nimport Tool from './Tool'\r\nimport Circle from '@/feature/Circle'\r\n// let { Circle } = L;\r\n/**\r\n * 圆形绘制工具\r\n */\r\nexport default class CircleTool extends Tool {\r\n  marker\r\n  options = { feature: { color: 'red', fillOpacity: .5, weight: 1 } }\r\n  /**\r\n   * 启动\r\n   */\r\n  start() {\r\n    this.initMouseDownHandler();\r\n    let { map } = this;\r\n    map.once('mousedown', this.onMouseDown, this);\r\n  }\r\n  /**\r\n   * 取消\r\n   */\r\n  cancel() {\r\n    let { map } = this;\r\n    map.off('mousedown', this.onMouseDown, this);\r\n    map.off('mousemove', this.onMouseMove, this);\r\n  }\r\n  /**\r\n   * @param e \r\n   */\r\n  _onMouseDown(e) {\r\n    let { options } = this;\r\n    let { map, layer } = this;\r\n    let { latlng } = e;\r\n    this.clear();//重复绘制，先移除旧图元\r\n    //\r\n    this.marker = new Circle(latlng, options.feature).addTo(layer)\r\n    map.on('mousemove', this.onMouseMove, this);\r\n    map.once('mouseup', this.onEnd, this);\r\n  }\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onMouseMove(e) {\r\n    let { marker } = this;\r\n    let latlng = e.latlng;\r\n    let center = marker.getLatLng();\r\n    let r = latlng.distanceTo(center);\r\n    marker.setRadius(r);\r\n    marker.redraw();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/tools/CircleTool.js","/**\r\n * @author gyb(mocheer)\r\n * @since 2017.5.20\r\n */\r\nlet { isArray } = T;\r\nlet { latLng } = L;\r\n/**\r\n * @param coords 支持的格式:\r\n * 一维：\r\n * {lat,lng}\r\n * {lon,lat}\r\n * [lon,lat]\r\n * 二维：\r\n * [[lon,lat],[lon,lat]...]\r\n * [{lon,lat},{lon,lat}...]\r\n * [{lat,lng},{lon,lng}...]\r\n * 多维：\r\n * ...\r\n */\r\nexport default function lonlats(coords, deep) {\r\n  return (deep-- && coords.map(item => lonlats(item, deep)))\r\n    || (isArray(coords) && latLng(coords[1], coords[0]))\r\n    || latLng(coords);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/LonLats.js"],"sourceRoot":""}